(self.webpackChunkapp_studio_enterprise_schema_view=self.webpackChunkapp_studio_enterprise_schema_view||[]).push([[9596],{61430:(U,F,t)=>{t.d(F,{T:()=>e});var n=t(59131),d=t.n(n),o=t(27252);class e extends o.Z{constructor(){super(...arguments),this.readMoreClick=new n.EventEmitter}set hasExternalLoadMore(f){this._hasExternalLoadMore=f,f&&this._addButtonIfNotExists()}get hasExternalLoadMore(){return this._hasExternalLoadMore}_addButtonIfNotExists(){const f=this.nativeElement?.querySelector(".read-more-button");if(!this.nativeElement||f)return;const h=this.createButton();this.nativeElement.appendChild(h)}onReadMoreClick(f){this.hasExternalLoadMore?this.readMoreClick.emit():super.onReadMoreClick(f)}foldContent(){this.nativeElement?.classList.add(this.wrapperClassName)}static{this.\u0275fac=(()=>{let f;return function(b){return(f||(f=n.\u0275\u0275getInheritedFactory(e)))(b||e)}})()}static{this.\u0275dir=n.\u0275\u0275defineDirective({type:e,selectors:[["","crtQuotedReadMore",""]],inputs:{hasExternalLoadMore:"hasExternalLoadMore"},outputs:{readMoreClick:"readMoreClick"},features:[n.\u0275\u0275InheritDefinitionFeature]})}}},27252:(U,F,t)=>{t.d(F,{Z:()=>T});var n=t(59131),d=t.n(n),o=t(79772),e=t.n(o),w=t(26828),f=t.n(w),h=t(62278),b=t.n(h),K=t(36486),W=t.n(K);class T{get inLines(){return this._inLines}set inLines(a){this._inLines=a}get inUnits(){return this._inUnits}set inUnits(a){this._inUnits=a}constructor(a,m){this._elRef=a,this._translateService=m,this._fontScale=1.2,this._linesDefault=5,this._paddingTop=8,this._attributeName="oldHeight",this._blockquoteSelectors=["blockquote","blockquote.gmail_quote","div#appendonsend","div#divRplyFwdMsg",'[id*="yahoo_quoted_"]','div[name="quote"]','blockquote[id*="quote_zmail"]'],this._readMoreButtonClicked$=new h.Subject,this._destroyed$=new h.Subject,this.wrapperClassName="read-more-wrapper",this.fitToBlockquote=!1}_isNeedToShowButton(){if(this.nativeElement.querySelector(".read-more-button"))return!1;let a=0;return this.inLines&&(a=this._calculateLinesHeightInPx()),this.inUnits&&(a=parseInt(this.inUnits)||0),a>0&&this._nativeElementHeight>a}_calculateLinesHeightInPx(){let a=0;const m=window.getComputedStyle(this.nativeElement),C=m.getPropertyValue("line-height");return C==="normal"?a=parseInt(m.getPropertyValue("font-size"))*this._fontScale:a=parseInt(C)||0,a*(this.inLines+1)+this._paddingTop}_wrapElement(){this.nativeElement.classList.add(this.wrapperClassName);const a=this.nativeElement.style.getPropertyValue("height");a&&this.nativeElement.setAttribute(this._attributeName,a),this.nativeElement.style.setProperty("height",this._getWrapperHeight())}_getWrapperHeight(){return this.inLines?this._calculateLinesHeightInPx()+"px":this.inUnits}_findBlockquote(){let a=null;for(const m of this._blockquoteSelectors){const C=this.nativeElement.querySelector(m);C&&(a==null||a.innerHTML.length>C.innerHTML.length)&&(a=C)}return a}_blockqouteFit(){const a=this._findBlockquote();if(a){const m=window.getComputedStyle(a),C=parseInt(m.getPropertyValue("margin-top"))||0,l=parseInt(m.getPropertyValue("padding-top"))||0,v=a.offsetTop+C+l+this._paddingTop;this.nativeElement.style.setProperty("height",v+"px")}}_recalculateAfterAllImagesLoaded(){const a=[];this.nativeElement.querySelectorAll("img").forEach(m=>{a.push(new Promise(C=>{m.onload=C}))}),a.length>0&&Promise.all(a).then(this.addButton.bind(this))}_resizeObservable(a){return new h.Observable(m=>{const C=new(f())(l=>{m.next(l)});return C.observe(a),()=>C.unobserve(a)})}_fixFocusPosition(){this.focusTrapEl.setAttribute("tabindex","0"),this.focusTrapEl.addEventListener("blur",()=>this.nativeElement.removeChild(this.focusTrapEl)),this.focusTrapEl.focus({preventScroll:!0})}onReadMoreClick(a){this._readMoreButtonClicked$.next(!0),this.nativeElement.classList.remove(this.wrapperClassName);const m=this.nativeElement.getAttribute(this._attributeName);m?(this.nativeElement.style.setProperty("height",m),this.nativeElement.removeAttribute(this._attributeName)):this.nativeElement.style.removeProperty("height"),this.nativeElement.removeChild(a.target.parentElement),this._fixFocusPosition()}createButton(){const a=document.createElement("div");a.classList.add("read-more-button-wrap");const m=document.createElement("div");return m.innerText=this._translateService.instant("ReadMoreDirective.Label"),m.classList.add("read-more-button"),m.tabIndex=0,m.role="button",m.addEventListener("click",this.onReadMoreClick.bind(this)),m.addEventListener("keydown",C=>{(C.key==="Enter"||C.key==="Space")&&this.onReadMoreClick(C)}),a.appendChild(m),a}addFocusTrapElement(){this.focusTrapEl=document.createElement("div"),this.nativeElement.appendChild(this.focusTrapEl)}addButton(){this._nativeElementHeight=this.nativeElement.getBoundingClientRect().height,window.requestAnimationFrame(()=>{if(this._nativeElementHeight=this._nativeElementHeight===0?this.nativeElement.getBoundingClientRect().height:this._nativeElementHeight,this._isNeedToShowButton()){const a=this.createButton();this.nativeElement.appendChild(a),this.addFocusTrapElement(),this.foldContent()}})}foldContent(){this._wrapElement(),this.fitToBlockquote&&this._blockqouteFit()}ngAfterViewInit(){this.nativeElement=this._elRef?.nativeElement,this.nativeElement&&this._resizeObservable(this.nativeElement).pipe((0,K.filter)(a=>a[0]?.contentRect.height>0),(0,K.takeUntil)((0,h.merge)(this._destroyed$,this._readMoreButtonClicked$))).subscribe(()=>{!this.inLines&&!this.inUnits&&(this.inLines=this._linesDefault),this.addButton(),this._recalculateAfterAllImagesLoaded()})}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}static{this.\u0275fac=function(m){return new(m||T)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(o.TranslateService))}}static{this.\u0275dir=n.\u0275\u0275defineDirective({type:T,selectors:[["","crtReadMore",""]],inputs:{inLines:"inLines",inUnits:"inUnits",fitToBlockquote:"fitToBlockquote"}})}}},92527:(U,F,t)=>{t.d(F,{Q:()=>h});var n=t(40297),d=t.n(n),o=t(61430),e=t(27252),w=t(59131),f=t.n(w);class h{static{this.\u0275fac=function(W){return new(W||h)}}static{this.\u0275mod=w.\u0275\u0275defineNgModule({type:h})}static{this.\u0275inj=w.\u0275\u0275defineInjector({imports:[n.CommonModule]})}}(function(){(typeof ngJitMode>"u"||ngJitMode)&&w.\u0275\u0275setNgModuleScope(h,{declarations:[e.Z,o.T],imports:[n.CommonModule],exports:[e.Z,o.T]})})()},50524:(U,F,t)=>{t.d(F,{N:()=>v});var n=t(59131),d=t.n(n),o=t(6530),e=t(49973),w=t(58504),f=t(64429),h=t(91065),b=t(62278),K=t.n(b),W=t(64171),T=t(23092),R=t(72882),a=t(65751);const m=["commentComposer"];function C(x,i){if(x&1){const c=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div")(1,"crt-feed-item",4),n.\u0275\u0275listener("messageDeleted",function(y){n.\u0275\u0275restoreView(c);const I=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(I.onCommentDeleted(y))})("messageEdited",function(y){n.\u0275\u0275restoreView(c);const I=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(I.onCommentEdited(y))})("selectionChange",function(y){n.\u0275\u0275restoreView(c);const I=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(I.onSelectionChange(y))}),n.\u0275\u0275elementEnd()()}if(x&2){const c=i.$implicit,P=i.last,y=n.\u0275\u0275nextContext();n.\u0275\u0275advance(),n.\u0275\u0275property("item",c)("feedType",y.feedType)("isTheLastComment",P)("allowExternalPost",y.allowExternalPost)("disableSelectionOptions",y.disableSelectionOptions)("readingMode",y.readingMode)("isReadOnly",y.isReadOnly)}}function l(x,i){if(x&1){const c=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",5),n.\u0275\u0275element(1,"crt-feed-user-img",6),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275elementStart(3,"crt-feed-composer",7,0),n.\u0275\u0275listener("messagePosted",function(y){n.\u0275\u0275restoreView(c);const I=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(I.onCommentPosted(y))})("selectionChange",function(y){n.\u0275\u0275restoreView(c);const I=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(I.onSelectionChange(y))}),n.\u0275\u0275elementEnd()()}if(x&2){const c=n.\u0275\u0275nextContext();n.\u0275\u0275advance(),n.\u0275\u0275property("contact",n.\u0275\u0275pipeBind1(2,7,c.currentUserContact$)),n.\u0275\u0275advance(2),n.\u0275\u0275property("primaryColumnValue",c.entityId)("parentMessageId",c.messageId)("schemaUId",c.schemaUId)("allowExternalPost",c.allowExternalPost)("disableSelectionOptions",c.disableSelectionOptions)("forExternalDefault",c.getForExternalDefault())}}class v{constructor(i,c,P,y,I){this._feedMessageService=i,this._changeDetectorRef=c,this._userInfoService=P,this._queryExecutor=y,this._feedNotificationService=I,this.feedMessageComments=[],this.currentUserContact$=new b.Subject,this.newComment=new n.EventEmitter,this.removeComment=new n.EventEmitter,this.selectionChange=new n.EventEmitter,this.readingMode=f.w.All}_getMessageComments(){!this.messageId||!this.schemaUId||!this.entityId||!this.isVisible||(this.feedMessageComments=[],this._feedMessageService.getMessageComments(this.schemaUId,this.entityId,this.messageId,this.readingMode).subscribe(i=>this._onMessageCommentsLoaded(i)))}_onMessageCommentsLoaded(i){i.length>0&&(this.feedMessageComments=this.feedMessageComments.concat(i),this._changeDetectorRef.markForCheck())}_initializeCurrentUserInfo(){this._userInfoService.loadCurrentUserInfo().subscribe(i=>{const c=i?.userInfo.photoId;this._usrContactInfo={value:i?.userInfo.contactId,displayValue:i?.userInfo.contactName,primaryImageValue:(0,o.gZ)(c)?null:c},this.currentUserContact$.next(this._usrContactInfo),i&&this._getCurrentUserPhoto(i.userInfo.contactId)})}_getCurrentUserPhoto(i){const c=new e.s("Contact");c.addSchemaColumn("Photo"),c.filters.addSchemaColumnFilterWithParameter(w.H.Equal,"Id",i),this._queryExecutor.executeSelectQuery(c).pipe((0,b.map)(P=>{const I=P[0]?.Photo?.value;this._usrContactInfo.primaryImageValue=(0,o.gZ)(I)?null:I,this.currentUserContact$.next(this._usrContactInfo)})).subscribe()}_onMessageNotification(i){if(i.ParentId===this.messageId)switch(i.Operation){case h.x.Insert:this.feedMessageComments.some(c=>c.Id===i.MessageId)||this.onCommentPosted(i.MessageId);break;case h.x.Delete:this._onCommentDeleted(i.MessageId);break}}_onCommentDeleted(i){const c=this.feedMessageComments.find(P=>P.Id===i);c&&this.onCommentDeleted(c)}ngOnChanges(){this._getMessageComments()}onCommentPosted(i){this._feedMessageService.getComment(this.schemaUId,this.entityId,i,this.readingMode).subscribe(c=>{const P=c.filter(y=>!this.feedMessageComments.some(I=>I.Id===y.Id));P.length>0&&this.newComment.emit(i),this._onMessageCommentsLoaded(P)})}onCommentDeleted(i){const c=this.feedMessageComments.indexOf(i);c!==-1&&(this.feedMessageComments.splice(c,1),this.removeComment.emit(),this._changeDetectorRef.markForCheck())}onCommentEdited(i){this._feedMessageService.getComment(this.schemaUId,this.entityId,i,this.readingMode).subscribe(c=>{if(c.length>0){const P=c[0],y=this.feedMessageComments.findIndex(I=>I.Id===P.Id);y!==-1&&(this.feedMessageComments[y]=P,this._changeDetectorRef.markForCheck())}})}ngOnInit(){this._initializeCurrentUserInfo(),this._feedNotificationService.newMessageEvent.subscribe(i=>{this._onMessageNotification(i)})}onSelectionChange(i){this.selectionChange.next(i)}getForExternalDefault(){return this.readingMode===f.w.External}static{this.\u0275fac=function(c){return new(c||v)(n.\u0275\u0275directiveInject(W.t),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(T.fv),n.\u0275\u0275directiveInject(a.w),n.\u0275\u0275directiveInject(R.Z))}}static{this.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["crt-feed-comments"]],viewQuery:function(c,P){if(c&1&&n.\u0275\u0275viewQuery(m,5),c&2){let y;n.\u0275\u0275queryRefresh(y=n.\u0275\u0275loadQuery())&&(P.commentComposer=y.first)}},inputs:{schemaName:"schemaName",feedType:"feedType",allowExternalPost:"allowExternalPost",entityId:"entityId",schemaUId:"schemaUId",messageId:"messageId",isVisible:"isVisible",isReadOnly:"isReadOnly",disableSelectionOptions:"disableSelectionOptions",readingMode:"readingMode"},outputs:{newComment:"newComment",removeComment:"removeComment",selectionChange:"selectionChange"},features:[n.\u0275\u0275NgOnChangesFeature],decls:3,vars:2,consts:[["commentComposer",""],[1,"feed-item-comments"],[4,"ngFor","ngForOf"],["class","feed-item-comments-input",4,"ngIf"],[3,"messageDeleted","messageEdited","selectionChange","item","feedType","isTheLastComment","allowExternalPost","disableSelectionOptions","readingMode","isReadOnly"],[1,"feed-item-comments-input"],[3,"contact"],[3,"messagePosted","selectionChange","primaryColumnValue","parentMessageId","schemaUId","allowExternalPost","disableSelectionOptions","forExternalDefault"]],template:function(c,P){c&1&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275template(1,C,2,7,"div",2)(2,l,5,9,"div",3),n.\u0275\u0275elementEnd()),c&2&&(n.\u0275\u0275advance(),n.\u0275\u0275property("ngForOf",P.feedMessageComments),n.\u0275\u0275advance(),n.\u0275\u0275property("ngIf",!P.isReadOnly))},styles:[`.feed-item-comments{margin-inline-start:15px}.feed-item-comments-input{display:flex}.feed-item-comments-input crt-feed-user-img .feed-user-img{margin-top:7px}.feed-item-comments-input crt-feed-composer{width:calc(100% - 47px);margin-inline-start:15px}
`],encapsulation:2})}}},94404:(U,F,t)=>{t.d(F,{G:()=>G});var n=t(73308),d=t(5960),o=t.n(d),e=t(59131),w=t.n(e),f=t(91775),h=t(77592),b=t(34760),K=t(3671),W=t(96677),T=t(79772),R=t.n(T),a=t(88033),m=t(59969),C=t(60575),l=t(73270),v=t(65001),x=t(48693),i=t(31774),c=t(64429),P=t(4092),y=t(90983),I=t(26594),u=t(23092),D=t(97842),A=t(28399),$=t.n(A),X=t(64171),de=t(23854),oe=t(40297),ee=t.n(oe),_=t(52989),L=t.n(_),B=t(62115),H=t(45667),z=t(76556),se=t(80615),le=t(70362),me=t(53703),pe=t(4227),j=t(54653),Y=t(27252),Q=t(61430),O=t(50524),Z=t(33652),V=t(5680),te=t(8017),ve=t(38914),Ie=t(78027);const fe=["composerItem"],Ee=["composerItemComment"],Pe=["feedComments"],Oe=["feedItem"],ce=["feedItemContent"],xe=["itemMessage"],De=["feedItemActionsButton"],Te=[[["","customBody",""]],[["","userPhoto",""]],[["","customHead",""]],[["","skeletonLoader",""]]],Re=["[customBody]","[userPhoto]","[customHead]","[skeletonLoader]"],ge=g=>({"feed-item-post":g}),Fe=(g,p)=>({"feed-comment":g,"actions-visible":p}),S=(g,p,s,r,M,k)=>({"post-vertical-line":g,"post-vertical-line-dashed":p,"comment-vertical-line":s,"comment-vertical-line-dashed":r,"comment-horizontal-bottom-line-dashed":M,"comment-horizontal-line":k}),E=g=>({$implicit:g}),N=()=>({mode:"default"}),J=g=>({"feed-item-content-btn-group-post":g}),q=g=>({"feed-item-content-btn-active":g});function ie(g,p){g&1&&e.\u0275\u0275projection(0,1,["*ngIf","useCustomPhoto; else defaultPhoto"])}function ae(g,p){if(g&1&&e.\u0275\u0275element(0,"crt-feed-user-img",33),g&2){const s=e.\u0275\u0275nextContext();e.\u0275\u0275property("contact",s.item.CreatedBy)}}function ne(g,p){g&1&&(e.\u0275\u0275elementStart(0,"div",34),e.\u0275\u0275projection(1,2),e.\u0275\u0275elementEnd())}function re(g,p){g&1&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),g&2&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"Feed.Post.PostedInLabel")," "))}function he(g,p){if(g&1){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"crt-link",35),e.\u0275\u0275pipe(1,"lowercase"),e.\u0275\u0275listener("clicked",function(){e.\u0275\u0275restoreView(s);const M=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(M.onLinkClick(M.item.EntitySchemaName,M.item.EntityId))}),e.\u0275\u0275elementEnd()}if(g&2){const s=e.\u0275\u0275nextContext(2);e.\u0275\u0275propertyInterpolate("caption",e.\u0275\u0275pipeBind1(1,2,s.item.EntitySchemaCaption)),e.\u0275\u0275property("href",s.buildEntityLink(s.item.EntitySchemaName,s.item.EntityId))}}function _e(g,p){if(g&1){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",34)(1,"crt-link",35),e.\u0275\u0275listener("clicked",function(){e.\u0275\u0275restoreView(s);const M=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(M.onLinkClick("Contact",M.item.CreatedBy.value))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,re,3,3,"span",25)(3,he,2,4,"crt-link",36),e.\u0275\u0275elementEnd()}if(g&2){const s=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("caption",s.item.CreatedBy.displayValue),e.\u0275\u0275property("href",s.buildEntityLink("Contact",s.item.CreatedBy.value)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!s.isComment()),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!s.isComment())}}function Me(g,p){if(g&1){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"crt-button",37,5),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275listener("menuOpened",function(){e.\u0275\u0275restoreView(s);const M=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(M.isMenuOpened=!0)})("menuClosed",function(){e.\u0275\u0275restoreView(s);const M=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(M.isMenuOpened=!1)}),e.\u0275\u0275element(4,"crt-menu",38,6),e.\u0275\u0275elementEnd()}if(g&2){const s=e.\u0275\u0275reference(5),r=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(3,4,"Feed.ActionsButtonCaption")),e.\u0275\u0275property("crtMenuTriggerFor",s)("crtMenuTriggerData",e.\u0275\u0275pureFunction1(6,E,r.itemActionItems)),e.\u0275\u0275advance(4),e.\u0275\u0275property("items",r.itemActionItems)}}function ye(g,p){g&1&&(e.\u0275\u0275elementStart(0,"div",39)(1,"crt-chip",40),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()()),g&2&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,"Feed.DraftItemTagCaption")))}function ue(g,p){g&1&&e.\u0275\u0275element(0,"div",41)}function Se(g,p){g&1&&(e.\u0275\u0275elementStart(0,"div",42),e.\u0275\u0275element(1,"mat-icon",43),e.\u0275\u0275elementStart(2,"div",44)(3,"span"),e.\u0275\u0275text(4,"External"),e.\u0275\u0275elementEnd()()())}function Ae(g,p){g&1&&e.\u0275\u0275element(0,"div",41)}function Le(g,p){g&1&&e.\u0275\u0275projection(0,3,["*ngIf","!item.Message"])}function We(g,p){if(g&1){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"crt-feed-composer",45,7),e.\u0275\u0275listener("messageChangesCanceled",function(M){e.\u0275\u0275restoreView(s);const k=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(k.onMessageChangesCanceled(M))})("messagePosted",function(M){e.\u0275\u0275restoreView(s);const k=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(k.onMessageEdited(M))})("selectionChange",function(M){e.\u0275\u0275restoreView(s);const k=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(k.onSelectionChange(M))}),e.\u0275\u0275elementEnd()}if(g&2){const s=e.\u0275\u0275nextContext();e.\u0275\u0275property("messageId",s.item.Id)("message",s.item.Message)("entitySchemaName",s.item.EntitySchemaName)("primaryColumnValue",s.item.EntityId)("schemaUId",s.item.EntitySchemaUId)("forExternal",s.forExternal)("allowExternalPost",s.allowExternalPost)("selection",s.selection)}}function we(g,p){if(g&1){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"crt-feed-composer",46,8),e.\u0275\u0275listener("messageChangesCanceled",function(M){e.\u0275\u0275restoreView(s);const k=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(k.onMessageChangesCanceled(M))})("messagePosted",function(M){e.\u0275\u0275restoreView(s);const k=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(k.onMessageEdited(M))})("selectionChange",function(M){e.\u0275\u0275restoreView(s);const k=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(k.onSelectionChange(M))}),e.\u0275\u0275elementEnd()}if(g&2){const s=e.\u0275\u0275nextContext();e.\u0275\u0275property("messageId",s.item.Id)("message",s.item.Message)("primaryColumnValue",s.item.EntityId)("schemaUId",s.item.EntitySchemaUId)("parentMessageId",s.item.Parent.value)("forExternal",s.forExternal)("allowExternalPost",s.allowExternalPost)("selection",s.selection)}}function Ke(g,p){if(g&1&&(e.\u0275\u0275element(0,"div",47,9),e.\u0275\u0275pipe(2,"sanitizeHtml"),e.\u0275\u0275pipe(3,"bypassSecurityTrust")),g&2){const s=e.\u0275\u0275nextContext();e.\u0275\u0275property("fitToBlockquote",!0)("innerHTML",e.\u0275\u0275pipeBind2(3,5,e.\u0275\u0275pipeBind2(2,2,s.item.Message,e.\u0275\u0275pureFunction0(8,N)),"html"),e.\u0275\u0275sanitizeHtml)}}function Ve(g,p){if(g&1){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",48,9),e.\u0275\u0275pipe(2,"sanitizeHtml"),e.\u0275\u0275pipe(3,"bypassSecurityTrust"),e.\u0275\u0275listener("readMoreClick",function(){e.\u0275\u0275restoreView(s);const M=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(M.readMoreClick.emit(M))}),e.\u0275\u0275elementEnd()}if(g&2){const s=e.\u0275\u0275nextContext();e.\u0275\u0275property("hasExternalLoadMore",s.hasExternalLoadMore)("fitToBlockquote",!0)("innerHTML",e.\u0275\u0275pipeBind2(3,6,e.\u0275\u0275pipeBind2(2,3,s.item.Message,e.\u0275\u0275pureFunction0(9,N)),"html"),e.\u0275\u0275sanitizeHtml)}}function Ne(g,p){if(g&1&&(e.\u0275\u0275elementStart(0,"crt-expansion-panel",49),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275element(2,"crt-gallery",50),e.\u0275\u0275elementEnd()),g&2){const s=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(1,6,"Components.Attachment.Caption")),e.\u0275\u0275property("expanded",!1)("fullWidthHeader",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("items",s.files)("itemConfig",s.galleryItemConfig)("selectable",!1)}}function je(g,p){if(g&1){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"crt-button",55),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("clicked",function(){e.\u0275\u0275restoreView(s);const M=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(M.comment())}),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()}g&2&&(e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(1,2,"Feed.Post.AddCommentButtonCaption")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,4,"Feed.Post.AddCommentButtonCaption")," "))}function He(g,p){if(g&1){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"crt-button",56),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("clicked",function(){e.\u0275\u0275restoreView(s);const M=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(M.toggleComments())}),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()}if(g&2){const s=e.\u0275\u0275nextContext(2);e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(1,3,s.areCommentsShown?"Feed.Post.ExpandedCommentsButtonHint":"Feed.Post.CommentsButtonHint")),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(5,q,s.areCommentsShown===!0)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",s.commentsButtonCaption," ")}}function $e(g,p){if(g&1&&(e.\u0275\u0275elementStart(0,"div",51),e.\u0275\u0275template(1,je,4,6,"crt-button",52)(2,He,3,7,"crt-button",53),e.\u0275\u0275element(3,"crt-feed-reactions",54),e.\u0275\u0275elementEnd()),g&2){const s=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(6,J,!s.isComment())),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!s.isComment()&&!s.isReadOnly),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",s.hasInnerComments()),e.\u0275\u0275advance(),e.\u0275\u0275property("narrowMode",s.narrowMode)("messageId",s.item.Id)("reactionsCounters",s.item.ReactionsCounters)}}let G=class Ue{set composerItem(p){p?.focus()}set composerItemComment(p){p?.focus()}constructor(p,s,r,M,k,Ce,ke,ze,Qe){this._googleTagManager=p,this._messageService=s,this._messageDialogProvider=r,this._maskService=M,this._userInfo=k,this._changeDetector=Ce,this._translateService=ke,this._featureValues=ze,this._window=Qe,this._deleteActionCode="Delete",this._editActionCode="Edit",this._maskDelay=0,this._maxNarrowWidth=370,this._updateIsHoveredDebounceFn=(0,A.debounce)(this._updateIsHovered,50),this.areCommentsShown=!1,this.isHovered=!1,this.isMenuOpened=!1,this.galleryItemConfig={defaultImage:l.k.DEFAULT,componentClassFactory:()=>x.U,itemKeyProperty:"fileId",defaultSize:v.Z.Small},this.isEditMode=!1,this.messageDeleted=new e.EventEmitter,this.messageEdited=new e.EventEmitter,this.readMoreClick=new e.EventEmitter,this.hasExternalLoadMore=!1,this.isQuotationMode=!1,this.isTheLastComment=!1,this.useCustomPhoto=!1,this.useCustomHead=!1,this.disableLikesComments=!1,this.showMenuActionItems=!0,this.isDraftItem=!1,this.itemActionItems=[{caption:this._translateService.instant("Feed.Item.Edit"),type:"crt.MenuItem",name:this._editActionCode,icon:"feed-edit",handleItemClick:()=>this.menuItemSelected(this._editActionCode)},{caption:this._translateService.instant("Feed.Item.Delete"),type:"crt.MenuItem",name:this._deleteActionCode,icon:"feed-delete",handleItemClick:()=>this.menuItemSelected(this._deleteActionCode)}],this.selectionChange=new e.EventEmitter,this.readingMode=c.w.All}customVisibleItemActionsMenu(){return this._userInfo&&this.item&&this._userInfo.contactId===this.item.CreatedBy?.value}ngOnInit(){this._messageService.loadAttachments(this.item).subscribe(p=>{this.files=p,this._changeDetector.detectChanges()})}_onDeletionError(p=null){p&&console.error(p),this._messageDialogProvider.error("Feed.Item.DeletionErrorMsg"),this._maskService.hideBodyMask()}_onDeleted(p){p?(this.messageDeleted.emit(this.item),this._maskService.hideBodyMask()):this._onDeletionError()}_deleteCurrentItem(){const p=this.item;this._maskService.showBodyMask({delay:this._maskDelay}),this.isComment()?this._messageService.deleteMessageComment(p).subscribe({next:s=>this._onDeleted(s),error:s=>this._onDeletionError(s)}):this._messageService.deleteFeedMessage(p).subscribe({next:s=>this._onDeleted(s),error:s=>this._onDeletionError(s)})}_updateIsHovered(p,s=!1){this.isHovered!==p&&(this.isHovered=p,this._changeDetector.detectChanges(),s&&(this.isMenuOpened=!0,this.feedItemActionsButton.focus()))}get narrowMode(){return this.feedItem?.nativeElement?.offsetWidth<this._maxNarrowWidth}get commentsButtonCaption(){return this.narrowMode?this.item.CommentCount.toString():`${this._translateService.instant("Feed.Post.CommentsButtonCaption")} (${this.item.CommentCount})`}get forExternal(){return this.item.UserAccess===P.U.External}get externalTagVisible(){return this.forExternal&&!this._userInfo.isSSP}get visibleItemActionsMenu(){return(this.isHovered||this.isMenuOpened)&&this.showMenuActionItems&&this.customVisibleItemActionsMenu()}menuItemSelected(p){p===this._deleteActionCode?this._messageDialogProvider.confirmation("Feed.Item.DeletionConfirmation").subscribe(s=>{this._updateIsHovered(!0,!0),this._window.requestAnimationFrame(()=>{s&&this._deleteCurrentItem()})}):p===this._editActionCode&&(this.isEditMode=!0)}_sendGTMData(){const p={moduleName:"Feed",schemaName:"FeedComments",action:"FeedCommentsToggled"};this._googleTagManager.track(p)}_handleAnchorClick(p){var s=this;return(0,n.A)(function*(){const r=p?.target&&(p?.target).getAttribute("data-value");(0,A.isEmpty)(r)||(p?.preventDefault(),p?.stopPropagation(),yield s.onLinkClick("Contact",r))})()}buildEntityLink(p,s){return(0,y.TX)(p,s)}toggleComments(){this.areCommentsShown=!this.areCommentsShown,this._sendGTMData()}comment(){this.areCommentsShown||this.toggleComments(),setTimeout(()=>{this.feedComments?.commentComposer?.focus()},10)}isComment(){return!(0,A.isEmpty)(this.item.Parent)}hasInnerComments(){return this.item.CommentCount&&this.item.CommentCount!==0}onNewComment(p){this.item.CommentCount=this.item.CommentCount?this.item.CommentCount+1:1}onRemoveComment(){this.item.CommentCount=this.item.CommentCount>0?this.item.CommentCount-1:0}onMessageEdited(p){this.messageEdited.emit(p),this.onMessageChangesCanceled()}onMessageChangesCanceled(){this.isEditMode=!1,this.selectionChange.next("")}onLinkClick(p,s){return(0,n.A)(function*(){const r={type:"crt.UpdateRecordRequest",entityName:p,recordId:s,$context:null};yield f.t.instance.process(r)})()}ngAfterViewInit(){(this.itemMessage?.nativeElement?.querySelectorAll('a[data-link="mention"]')||[]).forEach(s=>{s.addEventListener("click",this._handleAnchorClick.bind(this))})}useQuotedMessages(){return!this._featureValues["LargeEmailsInTimeline.DisableEmailPreviewLoader"]&&this.isQuotationMode}onSelectionChange(p){this.selectionChange.next(p)}onFocusChange(){this._updateIsHoveredDebounceFn(this.feedItemContent?.nativeElement.contains(document.activeElement))}static{this.\u0275fac=function(s){return new(s||Ue)(e.\u0275\u0275directiveInject(C.A),e.\u0275\u0275directiveInject(X.t),e.\u0275\u0275directiveInject(i.r),e.\u0275\u0275directiveInject(a.s),e.\u0275\u0275directiveInject(u.oq),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(T.TranslateService),e.\u0275\u0275directiveInject(I.G),e.\u0275\u0275directiveInject(m.ZP))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ue,selectors:[["crt-feed-item"]],viewQuery:function(s,r){if(s&1&&(e.\u0275\u0275viewQuery(fe,5),e.\u0275\u0275viewQuery(Ee,5),e.\u0275\u0275viewQuery(Pe,5),e.\u0275\u0275viewQuery(Oe,5),e.\u0275\u0275viewQuery(ce,5),e.\u0275\u0275viewQuery(xe,5),e.\u0275\u0275viewQuery(De,5)),s&2){let M;e.\u0275\u0275queryRefresh(M=e.\u0275\u0275loadQuery())&&(r.composerItem=M.first),e.\u0275\u0275queryRefresh(M=e.\u0275\u0275loadQuery())&&(r.composerItemComment=M.first),e.\u0275\u0275queryRefresh(M=e.\u0275\u0275loadQuery())&&(r.feedComments=M.first),e.\u0275\u0275queryRefresh(M=e.\u0275\u0275loadQuery())&&(r.feedItem=M.first),e.\u0275\u0275queryRefresh(M=e.\u0275\u0275loadQuery())&&(r.feedItemContent=M.first),e.\u0275\u0275queryRefresh(M=e.\u0275\u0275loadQuery())&&(r.itemMessage=M.first),e.\u0275\u0275queryRefresh(M=e.\u0275\u0275loadQuery())&&(r.feedItemActionsButton=M.first)}},inputs:{feedType:"feedType",isEditMode:"isEditMode",schemaName:"schemaName",item:"item",allowExternalPost:"allowExternalPost",hasExternalLoadMore:"hasExternalLoadMore",isReadOnly:"isReadOnly",isQuotationMode:"isQuotationMode",isTheLastComment:"isTheLastComment",useCustomPhoto:"useCustomPhoto",useCustomHead:"useCustomHead",disableLikesComments:"disableLikesComments",showMenuActionItems:"showMenuActionItems",isDraftItem:"isDraftItem",itemActionItems:"itemActionItems",disableSelectionOptions:"disableSelectionOptions",readingMode:"readingMode",customVisibleItemActionsMenu:"customVisibleItemActionsMenu"},outputs:{messageDeleted:"messageDeleted",messageEdited:"messageEdited",readMoreClick:"readMoreClick",selectionChange:"selectionChange"},ngContentSelectors:Re,decls:35,vars:46,consts:[["feedItem",""],["defaultPhoto",""],["feedItemContent",""],["defaultHead",""],["feedComments",""],["feedItemActionsButton","","trigger","crtMenuTrigger"],["itemActionsMenu",""],["composerItem",""],["composerItemComment",""],["itemMessage",""],[1,"feed-item",3,"ngClass"],[4,"ngIf","ngIfElse"],[1,"inner"],["crtFullSizeImage","",1,"feed-item-content",3,"mouseenter","mouseleave","focusin","focusout","ngClass"],[3,"ngClass"],[1,"feed-item-content-user"],[1,"feed-item-content-user-head"],["class","feed-item-content-user-head-posted",4,"ngIf","ngIfElse"],["data-qa","feed-item-actions-button","class","feed-item-content-user-head-actions-button","icon","kebab","iconSize","extra-large","iconPosition","only-icon","displayType","text",3,"crtMenuTriggerFor","crtMenuTriggerData","title","menuOpened","menuClosed",4,"ngIf"],[1,"feed-item-content-user-job"],[1,"feed-item-content-user-desc"],["class","feed-item-content-user-desc-draft",4,"ngIf"],["class","feed-item-content-user-desc-divider",4,"ngIf"],["class","feed-item-content-user-desc-external",4,"ngIf"],[1,"feed-item-content-user-desc-date"],[4,"ngIf"],[3,"messageId","message","entitySchemaName","primaryColumnValue","schemaUId","forExternal","allowExternalPost","selection","messageChangesCanceled","messagePosted","selectionChange",4,"ngIf"],[3,"messageId","message","primaryColumnValue","schemaUId","parentMessageId","forExternal","allowExternalPost","selection","messageChangesCanceled","messagePosted","selectionChange",4,"ngIf"],["tabindex","-1","crtReadMore","","class","feed-item-content-desc",3,"fitToBlockquote","innerHTML",4,"ngIf"],["crtQuotedReadMore","","class","feed-item-content-desc",3,"hasExternalLoadMore","fitToBlockquote","innerHTML","readMoreClick",4,"ngIf"],["togglePosition","after","toggleType","material","class","feed-item-attachments",3,"expanded","fullWidthHeader","title",4,"ngIf"],["class","feed-item-content-btn-group",3,"ngClass",4,"ngIf"],[3,"newComment","removeComment","selectionChange","hidden","isVisible","isReadOnly","entityId","schemaUId","messageId","feedType","schemaName","allowExternalPost","disableSelectionOptions","readingMode"],[3,"contact"],[1,"feed-item-content-user-head-posted"],["mode","'preventDefault'",1,"feed-item-content-user-link",3,"clicked","href","caption"],["mode","'preventDefault'","class","feed-item-content-user-link",3,"href","caption","clicked",4,"ngIf"],["data-qa","feed-item-actions-button","icon","kebab","iconSize","extra-large","iconPosition","only-icon","displayType","text",1,"feed-item-content-user-head-actions-button",3,"menuOpened","menuClosed","crtMenuTriggerFor","crtMenuTriggerData","title"],[3,"items"],[1,"feed-item-content-user-desc-draft"],["color","var(--crt-palette-navigation-primary-500)"],[1,"feed-item-content-user-desc-divider"],[1,"feed-item-content-user-desc-external"],["svgIcon","external-user-icon"],[1,"feed-item-content-user-desc-external-caption"],[3,"messageChangesCanceled","messagePosted","selectionChange","messageId","message","entitySchemaName","primaryColumnValue","schemaUId","forExternal","allowExternalPost","selection"],[3,"messageChangesCanceled","messagePosted","selectionChange","messageId","message","primaryColumnValue","schemaUId","parentMessageId","forExternal","allowExternalPost","selection"],["tabindex","-1","crtReadMore","",1,"feed-item-content-desc",3,"fitToBlockquote","innerHTML"],["crtQuotedReadMore","",1,"feed-item-content-desc",3,"readMoreClick","hasExternalLoadMore","fitToBlockquote","innerHTML"],["togglePosition","after","toggleType","material",1,"feed-item-attachments",3,"expanded","fullWidthHeader","title"],[1,"file-list-gallery",3,"items","itemConfig","selectable"],[1,"feed-item-content-btn-group",3,"ngClass"],["icon","feed-add-comment","iconPosition","left-icon","displayType","text","data-qa","feed-add-comments-button",3,"title","clicked",4,"ngIf"],["class","feed-item-content-btn","icon","feed-comment","iconPosition","left-icon","displayType","text","data-qa","feed-comments-button",3,"ngClass","title","clicked",4,"ngIf"],[3,"narrowMode","messageId","reactionsCounters"],["icon","feed-add-comment","iconPosition","left-icon","displayType","text","data-qa","feed-add-comments-button",3,"clicked","title"],["icon","feed-comment","iconPosition","left-icon","displayType","text","data-qa","feed-comments-button",1,"feed-item-content-btn",3,"clicked","ngClass","title"]],template:function(s,r){if(s&1){const M=e.\u0275\u0275getCurrentView();e.\u0275\u0275projectionDef(Te),e.\u0275\u0275elementStart(0,"div",10,0),e.\u0275\u0275template(2,ie,1,0,"ng-content",11)(3,ae,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(5,"div",12)(6,"div",13,2),e.\u0275\u0275listener("mouseenter",function(){return e.\u0275\u0275restoreView(M),e.\u0275\u0275resetView(r.isHovered=!0)})("mouseleave",function(){return e.\u0275\u0275restoreView(M),e.\u0275\u0275resetView(r.isHovered=!1)})("focusin",function(){return e.\u0275\u0275restoreView(M),e.\u0275\u0275resetView(r.onFocusChange())})("focusout",function(){return e.\u0275\u0275restoreView(M),e.\u0275\u0275resetView(r.onFocusChange())}),e.\u0275\u0275element(8,"div",14),e.\u0275\u0275elementStart(9,"div",15)(10,"div",16),e.\u0275\u0275template(11,ne,2,0,"div",17)(12,_e,4,4,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)(14,Me,6,8,"crt-button",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(15,"div",19),e.\u0275\u0275elementStart(16,"div",20),e.\u0275\u0275template(17,ye,4,3,"div",21)(18,ue,1,0,"div",22)(19,Se,5,0,"div",23)(20,Ae,1,0,"div",22),e.\u0275\u0275elementStart(21,"div",24)(22,"span"),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"smartDateTimeFormat"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275projection(25),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,Le,1,0,"ng-content",25)(27,We,2,8,"crt-feed-composer",26)(28,we,2,8,"crt-feed-composer",27)(29,Ke,4,9,"div",28)(30,Ve,4,10,"div",29)(31,Ne,3,8,"crt-expansion-panel",30)(32,$e,4,8,"div",31),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"crt-feed-comments",32,4),e.\u0275\u0275listener("newComment",function(Ce){return e.\u0275\u0275restoreView(M),e.\u0275\u0275resetView(r.onNewComment(Ce))})("removeComment",function(){return e.\u0275\u0275restoreView(M),e.\u0275\u0275resetView(r.onRemoveComment())})("selectionChange",function(Ce){return e.\u0275\u0275restoreView(M),e.\u0275\u0275resetView(r.onSelectionChange(Ce))}),e.\u0275\u0275elementEnd()()()}if(s&2){const M=e.\u0275\u0275reference(4),k=e.\u0275\u0275reference(13);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(34,ge,!r.isComment())),e.\u0275\u0275attribute("data-qa","feed_"+r.item.Id),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.useCustomPhoto)("ngIfElse",M),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(36,Fe,r.isComment()||r.areCommentsShown===!0,r.visibleItemActionsMenu)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction6(39,S,!r.isComment()&&r.areCommentsShown,!r.isComment()&&r.areCommentsShown&&!r.hasInnerComments(),r.isComment()&&!r.isTheLastComment,r.isTheLastComment&&!r.isReadOnly,r.isTheLastComment&&!r.isReadOnly||!r.isComment()&&r.areCommentsShown&&!r.hasInnerComments(),r.isComment())),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",r.useCustomHead)("ngIfElse",k),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",r.customVisibleItemActionsMenu()&&!r.isReadOnly),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",r.isDraftItem),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.isDraftItem),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.externalTagVisible),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.externalTagVisible),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(24,32,r.item.CreatedOn)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!r.item.Message),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.isEditMode&&!r.isComment()),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.isEditMode&&r.isComment()),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!r.isEditMode&&!r.useQuotedMessages()),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!r.isEditMode&&r.useQuotedMessages()),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!r.isEditMode&&r.files&&r.files.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!r.disableLikesComments),e.\u0275\u0275advance(),e.\u0275\u0275property("hidden",!r.areCommentsShown)("isVisible",r.areCommentsShown)("isReadOnly",r.isReadOnly)("entityId",r.item.EntityId)("schemaUId",r.item.EntitySchemaUId)("messageId",r.item.Id)("feedType",r.feedType)("schemaName",r.schemaName)("allowExternalPost",r.allowExternalPost)("disableSelectionOptions",r.disableSelectionOptions)("readingMode",r.readingMode)}},dependencies:[de.r,oe.NgClass,oe.NgIf,_.MatIcon,B.B,H.w,z.o,se.j,le.D,me.h,pe.IK,j.O,Y.Z,Q.T,O.N,Z.D,V.B,te.b,oe.LowerCasePipe,T.TranslatePipe,ve.O,Ie.v],styles:[`body{--focus-outline-outer-color: var(--crt-palette-secondary-500);--focus-outline-inner-color: white}[dir=rtl] .feed-item .post-vertical-line{right:-31px;border-left:none;border-right:1px solid var(--crt-palette-border-500)}[dir=rtl] .feed-item .post-vertical-line-dashed{border-left:none;border-right:1px dashed var(--crt-palette-border-500)}[dir=rtl] .feed-item .comment-vertical-line{border-left:none;border-right:1px solid var(--crt-palette-border-500)}[dir=rtl] .feed-item .comment-vertical-line-dashed{border-left:none;border-right:1px dashed var(--crt-palette-border-500)}[dir=rtl] .feed-item .comment-horizontal-line{right:-78px}.feed-item{display:flex;container-type:inline-size}.feed-item.feed-item-post{margin-bottom:4px}.feed-item .post-vertical-line{left:-31px;top:24px;height:calc(100% - 8px);width:31px;position:absolute;border-left:1px solid var(--crt-palette-border-500)}.feed-item .post-vertical-line-dashed{border-left:1px dashed var(--crt-palette-border-500)}.feed-item .comment-vertical-line{border-left:1px solid var(--crt-palette-border-500)}.feed-item .comment-vertical-line-dashed{border-left:1px dashed var(--crt-palette-border-500)}.feed-item .comment-horizontal-bottom-line-dashed{border-bottom:1px dashed var(--crt-palette-border-500)}.feed-item .comment-horizontal-line{left:-78px;top:8px;width:30px;height:calc(100% + 8px);position:absolute;border-top:1px solid var(--crt-palette-border-500)}.feed-item .inner{width:calc(100% - 32px)}.feed-item .inner .feed-item-content{position:relative;margin-top:8px;margin-inline-start:15px;width:auto}.feed-item .inner .feed-item-content-user-head{display:flex;justify-content:flex-start}.feed-item .inner .feed-item-content-user-head-posted{font-family:var(--crt-body-1-font-family);font-size:var(--crt-body-1-font-size);line-height:var(--crt-body-1-line-height);font-weight:var(--crt-body-1-font-weight);letter-spacing:var(--crt-body-1-letter-spacing);text-transform:var(--crt-body-1-text-transform);-webkit-font-smoothing:antialiased;margin-right:16px}.feed-item .inner .feed-item-content-user-head-posted crt-link{display:inline-flex}.feed-item .inner .feed-item-content-user-head-actions-button{height:18px;position:relative;bottom:8px;visibility:hidden}.feed-item .inner .feed-item-content-user-head-actions-button mat-icon{transform:rotate(90deg)}.feed-item .inner .feed-item-content-user-job{display:none}.feed-item .inner .feed-item-content-user-desc{display:flex;gap:8px}.feed-item .inner .feed-item-content-user-desc-external{display:flex;gap:2px;max-height:20px;border-radius:16px;background-color:#d2eed0;color:#11560a}.feed-item .inner .feed-item-content-user-desc-external mat-icon{height:16px;width:16px;padding:2px 2px 0}.feed-item .inner .feed-item-content-user-desc-external-caption,.feed-item .inner .feed-item-content-user-desc-draft{font-family:var(--crt-caption-font-family);font-size:var(--crt-caption-font-size);line-height:var(--crt-caption-line-height);font-weight:var(--crt-caption-font-weight);letter-spacing:var(--crt-caption-letter-spacing);text-transform:var(--crt-caption-text-transform);-webkit-font-smoothing:antialiased;align-self:center}.feed-item .inner .feed-item-content-user-desc-draft crt-chip .crt-chip-focus-overlay{background-color:var(--crt-palette-navigation-primary-500);opacity:.2}.feed-item .inner .feed-item-content-user-desc-divider{margin-top:4px;width:0px;height:12px;border-left:1px solid var(--crt-palette-foreground-100)}.feed-item .inner .feed-item-content-user-desc-date{font-family:var(--crt-body-2-font-family);font-size:var(--crt-body-2-font-size);line-height:var(--crt-body-2-line-height);font-weight:var(--crt-body-2-font-weight);letter-spacing:var(--crt-body-2-letter-spacing);text-transform:var(--crt-body-2-text-transform);-webkit-font-smoothing:antialiased;display:inline-flex;color:var(--crt-palette-label-500)}.feed-item .inner .feed-item-content-desc{font-family:var(--crt-body-2-font-family);font-size:var(--crt-body-2-font-size);line-height:var(--crt-body-2-line-height);font-weight:var(--crt-body-2-font-weight);letter-spacing:var(--crt-body-2-letter-spacing);text-transform:var(--crt-body-2-text-transform);-webkit-font-smoothing:antialiased;margin-top:8px;overflow-wrap:anywhere;overflow-x:auto}@-moz-document url-prefix(){.feed-item .inner .feed-item-content-desc{scrollbar-width:thin}}.feed-item .inner .feed-item-content-desc p{margin:0;max-width:calc(100% - 32px)}.feed-item .inner .feed-item-content-desc *:focus-visible{box-shadow:inset 0 0 0 1px var(--focus-outline-outer-color),inset 0 0 0 2px var(--focus-outline-inner-color);outline:none;border-radius:4px}.feed-item .inner .feed-item-content-btn-group{display:flex;flex-wrap:wrap}.feed-item .inner .feed-item-content-btn-group .crt-button{margin-inline-end:16px}.feed-item .inner .feed-item-content-btn-group .crt-button.feed-item-content-btn-active{color:var(--crt-palette-primary-500);stroke:var(--crt-palette-primary-500)}.feed-item .inner .feed-item-content .feed-item-attachments{padding:0}.feed-item .inner .feed-item-content .feed-item-attachments crt-expansion-panel-header .expansion-panel-title{width:auto}.feed-item .inner .feed-item-content .feed-item-attachments crt-expansion-panel-header .expansion-panel-title .expansion-panel-tools{padding-inline-start:0}.feed-item .inner .feed-item-content .feed-item-attachments crt-expansion-panel-header .expansion-panel-header{justify-content:flex-end}.feed-item .inner .feed-item-content .feed-item-attachments crt-gallery .crt-gallery-items-wrap{padding:0}.feed-item .inner .feed-item-content.actions-visible .feed-item-content-user-head-actions-button,.feed-item .inner .feed-item-content:focus-within .feed-item-content-user-head-actions-button{visibility:unset}.feed-item .inner .feed-item-content.feed-comment{padding-bottom:24px}.feed-item .inner .feed-item-content-btn-group{margin-bottom:-8px}@container (max-width: 370px){.inner .feed-item-content .feed-item-content-user-desc-external-caption{display:none}}@container (min-width: 370px){.feed-item-content-user-desc-external{padding:0 6px}}
`],encapsulation:2})}};(0,d.__decorate)([(0,h.k)(),(0,d.__metadata)("design:type",String)],G.prototype,"feedType",void 0),(0,d.__decorate)([(0,h.k)(),(0,d.__metadata)("design:type",Object)],G.prototype,"isEditMode",void 0),(0,d.__decorate)([(0,h.k)(),(0,d.__metadata)("design:type",String)],G.prototype,"schemaName",void 0),(0,d.__decorate)([(0,h.k)(),(0,d.__metadata)("design:type",Object)],G.prototype,"item",void 0),(0,d.__decorate)([(0,h.k)(),(0,d.__metadata)("design:type",Boolean)],G.prototype,"allowExternalPost",void 0),(0,d.__decorate)([(0,b.j)(),(0,d.__metadata)("design:type",e.EventEmitter)],G.prototype,"messageDeleted",void 0),(0,d.__decorate)([(0,b.j)(),(0,d.__metadata)("design:type",e.EventEmitter)],G.prototype,"messageEdited",void 0),(0,d.__decorate)([(0,h.k)(),(0,d.__metadata)("design:type",Object)],G.prototype,"isTheLastComment",void 0),(0,d.__decorate)([(0,h.k)(),(0,d.__metadata)("design:type",Object)],G.prototype,"useCustomPhoto",void 0),(0,d.__decorate)([(0,h.k)(),(0,d.__metadata)("design:type",Object)],G.prototype,"useCustomHead",void 0),(0,d.__decorate)([(0,h.k)(),(0,d.__metadata)("design:type",Object)],G.prototype,"disableLikesComments",void 0),(0,d.__decorate)([(0,h.k)(),(0,d.__metadata)("design:type",Object)],G.prototype,"showMenuActionItems",void 0),(0,d.__decorate)([(0,h.k)(),(0,d.__metadata)("design:type",Object)],G.prototype,"isDraftItem",void 0),(0,d.__decorate)([(0,h.k)(),(0,d.__metadata)("design:type",Array)],G.prototype,"itemActionItems",void 0),(0,d.__decorate)([(0,b.j)(),(0,d.__metadata)("design:type",Object)],G.prototype,"selectionChange",void 0),(0,d.__decorate)([(0,h.k)(),(0,d.__metadata)("design:type",Boolean)],G.prototype,"disableSelectionOptions",void 0),(0,d.__decorate)([(0,h.k)(),(0,d.__metadata)("design:type",Number)],G.prototype,"readingMode",void 0),(0,d.__decorate)([(0,h.k)(),(0,d.__metadata)("design:type",Function),(0,d.__metadata)("design:paramtypes",[]),(0,d.__metadata)("design:returntype",Boolean)],G.prototype,"customVisibleItemActionsMenu",null),G=(0,d.__decorate)([(0,K.v)({type:"crt.FeedItem",reuseStrategy:W.B.Reuse}),(0,d.__metadata)("design:paramtypes",[C.A,X.t,i.r,a.s,u.oq,e.ChangeDetectorRef,T.TranslateService,D.x,Window])],G)},57134:(U,F,t)=>{t.d(F,{G:()=>oe});var n=t(59131),d=t.n(n),o=t(6530),e=t(67159),w=t(64429),f=t(91065),h=t(28399),b=t.n(h),K=t(62278),W=t.n(K),T=t(36486),R=t.n(T),a=t(86575),m=t(72882),C=t(64171),l=t(60575),v=t(40297),x=t.n(v),i=t(58433),c=t(12325),P=t(41571),y=t(86432),I=t(94404),u=t(79772),D=t.n(u);function A(ee,_){if(ee&1&&(n.\u0275\u0275elementStart(0,"div",5),n.\u0275\u0275element(1,"crt-lottie",6)(2,"crt-label",7),n.\u0275\u0275pipe(3,"translate"),n.\u0275\u0275elementEnd()),ee&2){const L=n.\u0275\u0275nextContext();n.\u0275\u0275advance(),n.\u0275\u0275property("config",L.noDataAnimationOptions),n.\u0275\u0275advance(),n.\u0275\u0275property("caption",n.\u0275\u0275pipeBind1(3,2,"Feed.NoDataContainerLabel"))}}function $(ee,_){if(ee&1){const L=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div")(1,"crt-feed-item",8),n.\u0275\u0275listener("messageDeleted",function(H){n.\u0275\u0275restoreView(L);const z=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(z.onMessageDeleted(H))})("messageEdited",function(H){n.\u0275\u0275restoreView(L);const z=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(z.onMessageEdited(H))})("selectionChange",function(H){n.\u0275\u0275restoreView(L);const z=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(z.onSelectionChange(H))}),n.\u0275\u0275elementEnd()()}if(ee&2){const L=_.$implicit,B=n.\u0275\u0275nextContext();n.\u0275\u0275advance(),n.\u0275\u0275property("item",L)("feedType",B.feedType)("schemaName",B.schemaName)("allowExternalPost",B.allowExternalPost)("disableSelectionOptions",B.disableSelectionOptions)("readingMode",B.readingMode)("isReadOnly",B.isReadOnly)}}function X(ee,_){if(ee&1){const L=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",9),n.\u0275\u0275listener("crtObserveElementInViewportStateChange",function(H){n.\u0275\u0275restoreView(L);const z=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(z.onLastTableRowInViewportStateChange(H))}),n.\u0275\u0275elementEnd()}}function de(ee,_){if(ee&1&&n.\u0275\u0275element(0,"crt-skeleton-loader",10),ee&2){const L=n.\u0275\u0275nextContext();n.\u0275\u0275property("styles",L.skeletonStyles)}}class oe{get feedMessages(){return this.feedType===e.Q.User?this._feedMessages:this._feedMessages.filter(_=>_.EntityId===this.masterRecordId)}set feedMessages(_){_&&(this._feedMessages=_)}set feedOffsetDate(_){this._offsetDate=_}set feedMessagesPage(_){_&&this._onMessagesLoaded(_,!1,!1)}constructor(_,L,B,H){this._feedNotificationService=_,this._feedMessageService=L,this._changeDetectorRef=B,this._googleTagManager=H,this._destroyed$=new K.Subject,this._newMessageDebounce=2e3,this._newMessageDebounceFn=(0,h.debounce)(this._onNewMessage,this._newMessageDebounce),this._feedSortColumn=a.K.CreatedOn,this._feedMessages=[],this.loading=!1,this.noDataAnimationOptions=null,this.feedMessagesChange=new n.EventEmitter,this.feedSortColumnChange=new n.EventEmitter,this.showBlankSlate=!0,this.offsetDateChange=new n.EventEmitter,this.selectionChange=new n.EventEmitter,this.readingMode=w.w.All}_onNewMessage(_,L,B){this._feedMessageService.getMessage(_,L,B,this.readingMode).subscribe(H=>this._onMessagesLoaded(H,!0,!0))}_onMessagesLoaded(_,L,B){if(this.loading=!1,this._offsetDate||(this._feedMessages=[]),_.length>0){const H=_.filter(z=>!this._feedMessages.some(se=>se.Id===z.Id));if(H.length===0){const z=this._feedMessages.filter(se=>!_.some(le=>se.Id===le.Id));this._feedMessages=this._concatFeedMessages(L,_,z)}else this._feedMessages=this._concatFeedMessages(L,H,this._feedMessages);this.feedMessagesChange.emit(this.feedMessages),(B||!this._offsetDate)&&this._setOffsetDate()}this._changeDetectorRef.markForCheck()}_onFeedPostPublished(_){this._isInsertOperation(_)&&this._isUserNotificationByRecordId(_)&&this._newMessageDebounceFn(this.schemaName,this.masterRecordId,_.MessageId)}_onMessageNotification(_){if(this._isUserNotificationByRecordId(_)&&this._isNotComment(_))switch(_.Operation){case f.x.Insert:this._feedMessages.some(L=>L.Id===_.MessageId)||this._newMessageDebounceFn(_.EntityName,_.EntityId,_.MessageId);break;case f.x.ForceUpdate:this._newMessageDebounceFn(_.EntityName,_.EntityId,_.MessageId);break;case f.x.Delete:this._onMessageDeleted(_.MessageId);break}}_onMessageDeleted(_){const L=this._feedMessages.find(B=>B.Id===_);L&&this.onMessageDeleted(L)}_concatFeedMessages(_,L,B){return _?L.concat(B):B.concat(L)}_isUserNotificationByRecordId(_){return this.feedType===e.Q.User||_.EntityId===this.masterRecordId}_isInsertOperation(_){return _.Operation===f.x.Insert}_isNotComment(_){return(0,h.isEmpty)(_.ParentId)||_.ParentId===o.To}_sendGTMData(){const _={moduleName:"Feed",schemaName:"FeedPosts",action:"FeedContentScrolled"};this._googleTagManager.track(_)}_setOffsetDate(){const _=this._feedMessages[this._feedMessages.length-1];this._offsetDate=this._feedSortColumn===a.K.CreatedOn?_?.CreatedOn:_?.LastActionOn,this.offsetDateChange.emit(this._offsetDate)}onLastTableRowInViewportStateChange(_){if(_.visible===!1||_.visible===this._scrolledToEnd){this._scrolledToEnd=_.visible;return}this._scrolledToEnd=_.visible,this._sendGTMData(),!(this.loading||!this._feedMessages||this._feedMessages.length===0)&&this._setOffsetDate()}ngOnInit(){this.noDataAnimationOptions={animationData:()=>t.e(4772).then(t.t.bind(t,24772,19)),autoplay:!0,loop:!1},this._feedNotificationService.feedPostPublishedEvent.pipe((0,T.takeUntil)(this._destroyed$)).subscribe(_=>this._onFeedPostPublished(_)),this._feedNotificationService.newMessageEvent.pipe((0,T.takeUntil)(this._destroyed$)).subscribe(_=>this._onMessageNotification(_)),this.feedSortColumn?.pipe((0,T.takeUntil)(this._destroyed$))?.subscribe(_=>{this._feedSortColumn!==_&&(this._feedSortColumn=_,this.feedSortColumnChange.emit(_),this.reloadFeed())})}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}reloadFeed(){this._offsetDate=null,this.offsetDateChange.emit(null)}onMessageDeleted(_){const L=this._feedMessages.indexOf(_);L!==-1&&(this._feedMessages.splice(L,1),this.feedMessagesChange.emit(this._feedMessages),this._changeDetectorRef.markForCheck())}onMessageEdited(_){const L=this._feedMessages.find(B=>B.Id===_);L&&this._feedMessageService.getMessage(L.EntitySchemaName,L.EntityId,_,this.readingMode).subscribe(B=>{if(B.length>0){const H=B[0],z=this._feedMessages.findIndex(se=>se.Id===H.Id);z!==-1&&(this._feedMessages[z]=H,this.feedMessagesChange.emit(this._feedMessages),this._changeDetectorRef.markForCheck())}})}onSelectionChange(_){this.selectionChange.next(_)}static{this.\u0275fac=function(L){return new(L||oe)(n.\u0275\u0275directiveInject(m.Z),n.\u0275\u0275directiveInject(C.t),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(l.A))}}static{this.\u0275cmp=n.\u0275\u0275defineComponent({type:oe,selectors:[["crt-feed-posts"]],inputs:{feedMessages:"feedMessages",feedOffsetDate:"feedOffsetDate",feedMessagesPage:"feedMessagesPage",schemaName:"schemaName",masterRecordId:"masterRecordId",feedType:"feedType",feedSortColumn:"feedSortColumn",allowExternalPost:"allowExternalPost",showBlankSlate:"showBlankSlate",disableSelectionOptions:"disableSelectionOptions",readingMode:"readingMode",isReadOnly:"isReadOnly"},outputs:{feedMessagesChange:"feedMessagesChange",feedSortColumnChange:"feedSortColumnChange",offsetDateChange:"offsetDateChange",selectionChange:"selectionChange"},decls:5,vars:4,consts:[["class","feed-no-data-container",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"observe-last-row"],["crtObserveElementInViewport","",3,"crtObserveElementInViewportStateChange",4,"ngIf"],[3,"styles",4,"ngIf"],[1,"feed-no-data-container"],[3,"config"],[1,"feed-no-data-container-label",3,"caption"],[3,"messageDeleted","messageEdited","selectionChange","item","feedType","schemaName","allowExternalPost","disableSelectionOptions","readingMode","isReadOnly"],["crtObserveElementInViewport","",3,"crtObserveElementInViewportStateChange"],[3,"styles"]],template:function(L,B){L&1&&(n.\u0275\u0275template(0,A,4,4,"div",0)(1,$,2,7,"div",1),n.\u0275\u0275elementStart(2,"div",2),n.\u0275\u0275template(3,X,1,0,"div",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(4,de,1,1,"crt-skeleton-loader",4)),L&2&&(n.\u0275\u0275property("ngIf",!B.loading&&(B.feedMessages==null?null:B.feedMessages.length)===0&&B.showBlankSlate),n.\u0275\u0275advance(),n.\u0275\u0275property("ngForOf",B.feedMessages),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",B.feedMessages==null?null:B.feedMessages.length),n.\u0275\u0275advance(),n.\u0275\u0275property("ngIf",B.loading))},dependencies:[v.NgForOf,v.NgIf,i.W,c.V,P.w,y.w,I.G,u.TranslatePipe],styles:["[_nghost-%COMP%]{height:100%}.new-feed-messages[_ngcontent-%COMP%]{color:var(--crt-palette-primary-500);background:var(--crt-palette-primary-50);text-align:center;cursor:pointer}.reload-feed-icon[_ngcontent-%COMP%]{height:12px;width:10px;margin:0 5px}.feed-no-data-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;height:100%}.feed-no-data-container[_ngcontent-%COMP%]   ng-lottie[_ngcontent-%COMP%]{cursor:pointer}"]})}}},5680:(U,F,t)=>{t.d(F,{B:()=>y});var n=t(59131),d=t.n(n),o=t(79772),e=t.n(o),w=t(59969),f=t(28399),h=t.n(f),b=t(29957),K=t.n(b),W=t(2106),T=t(72615),R=t(40297),a=t.n(R),m=t(52989),C=t.n(m);function l(I,u){if(I&1){const D=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",4),n.\u0275\u0275pipe(1,"translate"),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(D);const $=n.\u0275\u0275nextContext().$implicit,X=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(X.onReactionClick($))})("mouseenter",function(){n.\u0275\u0275restoreView(D);const $=n.\u0275\u0275nextContext().$implicit,X=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(X.onReactionMouseEnter($))})("focusin",function(){n.\u0275\u0275restoreView(D);const $=n.\u0275\u0275nextContext().$implicit,X=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(X.onReactionMouseEnter($))})("focusout",function(){n.\u0275\u0275restoreView(D);const $=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView($.onReactionMouseLeave())})("keyup.enter",function(){n.\u0275\u0275restoreView(D);const $=n.\u0275\u0275nextContext().$implicit,X=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(X.onReactionClick($))}),n.\u0275\u0275element(2,"mat-icon",5),n.\u0275\u0275text(3),n.\u0275\u0275pipe(4,"translate"),n.\u0275\u0275elementEnd()}if(I&2){let D;const A=n.\u0275\u0275nextContext().$implicit,$=n.\u0275\u0275nextContext();n.\u0275\u0275classMapInterpolate1("feed-reaction ",A.currentUserReacted?"feed-reaction-selected":"",""),n.\u0275\u0275attributeInterpolate2("data-qa","",$.messageId,"-",A.type,"-feed-reaction"),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(1,10,$.getReactionCaptionKey(A)))("aria-pressed",(D=A.currentUserReacted)!==null&&D!==void 0?D:!1),n.\u0275\u0275advance(2),n.\u0275\u0275property("svgIcon",$.getReactionIcon(A)),n.\u0275\u0275advance(),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(4,12,$.getCounterText(A))," ")}}function v(I,u){if(I&1&&(n.\u0275\u0275elementStart(0,"span"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),I&2){const D=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(),n.\u0275\u0275textInterpolate(D.contactName)}}function x(I,u){if(I&1&&(n.\u0275\u0275elementStart(0,"span"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),I&2){const D=n.\u0275\u0275nextContext().count,A=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(),n.\u0275\u0275textInterpolate(A.getExpandedExtraReactionsText(D))}}function i(I,u){if(I&1&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,v,2,1,"span",8)(2,x,2,1,"span",8),n.\u0275\u0275elementEnd()),I&2){const D=u.index,A=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(),n.\u0275\u0275property("ngIf",D<A.expandedReactionsLimit),n.\u0275\u0275advance(),n.\u0275\u0275property("ngIf",D===A.expandedReactionsLimit)}}function c(I,u){if(I&1&&(n.\u0275\u0275elementStart(0,"div",6)(1,"div",7)(2,"strong"),n.\u0275\u0275text(3),n.\u0275\u0275pipe(4,"translate"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(5,i,3,2,"div",1),n.\u0275\u0275elementEnd()),I&2){const D=n.\u0275\u0275nextContext().$implicit,A=n.\u0275\u0275nextContext();n.\u0275\u0275attributeInterpolate2("data-qa","",A.messageId,"-",D.type,"-feed-reaction-expandable"),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(4,5,A.getReactionCaptionKey(D))),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",A.getFilteredReactions(D.type))}}function P(I,u){if(I&1&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,l,5,14,"div",2)(2,c,6,7,"div",3),n.\u0275\u0275elementContainerEnd()),I&2){const D=u.$implicit,A=n.\u0275\u0275nextContext();n.\u0275\u0275advance(),n.\u0275\u0275property("ngIf",A.showCounter(D)),n.\u0275\u0275advance(),n.\u0275\u0275property("ngIf",A.isReactionExpanded(D))}}class y{constructor(u,D,A,$){this._reactionService=u,this._changeDetectorRef=D,this._translateService=A,this._liveAnnouncementService=$,this._debounceTime=300,this._debounceOnReactionMouseEnter=(0,f.debounce)(X=>this._prepareReactionsExpanding(X),this._debounceTime,{}),this.expandedReactionsLimit=10,this._subscriptions=[],this._reactions=[],this._expandedReactionsType=[],this.narrowMode=!1}_tooggleLike(u){this._reactionChanging||(this._reactionChanging=!0,u.currentUserReacted?(u.currentUserReacted=!1,u.count--,this._subscriptions.push(this._reactionService.dislikeMessage(this.messageId).subscribe(()=>this._onReactionProcessed())),this._liveAnnouncementService.announce("Feed.Reactions.LikeRemoved")):(u.currentUserReacted=!0,u.count++,this._subscriptions.push(this._reactionService.likeMessage(this.messageId).subscribe(()=>this._onReactionProcessed())),this._liveAnnouncementService.announce("Feed.Reactions.PostLiked")))}_onReactionProcessed(){this._resetFetchedReactions(),this._changeDetectorRef.markForCheck(),this._reactionChanging=!1}_resetFetchedReactions(){this._fetchedReactions=!1,this._expandedReactionsType=[]}_prepareReactionsExpanding(u){if(this._fetchedReactions)return u();this._subscriptions.push(this._reactionService.getMessageReactions(this.messageId).subscribe(D=>{this._fetchedReactions=!0,this._reactions=D,u()}))}showCounter(u){return u.count&&u.count>0||u.type===W.U.Like}getReactionIcon(u){return u.currentUserReacted?"feed-heart-filled":"feed-heart"}getCounterText(u){return u.count>0||this.narrowMode?u.count.toString():this.getReactionCaptionKey(u)}onReactionClick(u){u.type===W.U.Like&&this._tooggleLike(u)}onReactionMouseEnter(u){u.count!==0&&this._debounceOnReactionMouseEnter(()=>{this._expandedReactionsType.push(u.type),this._changeDetectorRef.markForCheck()})}onReactionMouseLeave(){this._debounceOnReactionMouseEnter.cancel(),this._expandedReactionsType=[],this._changeDetectorRef.markForCheck()}getReactionCaptionKey(u){return u.type===W.U.Like?"Feed.Reactions.Like":""}getExpandedExtraReactionsText(u){const D=this._translateService.instant("Feed.Reactions.ExtraReactionsTemplate"),A=u-this.expandedReactionsLimit;return b.String.format(D,A>0?A:0)}getFilteredReactions(u){return this._reactions.filter(D=>D.type===u)}isReactionExpanded(u){return this._expandedReactionsType.includes(u.type)}ngOnDestroy(){this._subscriptions.forEach(u=>u.unsubscribe())}static{this.\u0275fac=function(D){return new(D||y)(n.\u0275\u0275directiveInject(T.d),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(o.TranslateService),n.\u0275\u0275directiveInject(w.DW))}}static{this.\u0275cmp=n.\u0275\u0275defineComponent({type:y,selectors:[["crt-feed-reactions"]],inputs:{reactionsCounters:"reactionsCounters",messageId:"messageId",narrowMode:"narrowMode"},decls:2,vars:1,consts:[[1,"feed-reactions",3,"mouseleave"],[4,"ngFor","ngForOf"],["role","button","tabindex","0",3,"class","click","mouseenter","focusin","focusout","keyup.enter",4,"ngIf"],["class","feed-reaction-expandable",4,"ngIf"],["role","button","tabindex","0",3,"click","mouseenter","focusin","focusout","keyup.enter"],[1,"feed-reaction-icon",3,"svgIcon"],[1,"feed-reaction-expandable"],[1,"feed-reaction-expandable-title"],[4,"ngIf"]],template:function(D,A){D&1&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275listener("mouseleave",function(){return A.onReactionMouseLeave()}),n.\u0275\u0275template(1,P,3,2,"ng-container",1),n.\u0275\u0275elementEnd()),D&2&&(n.\u0275\u0275advance(),n.\u0275\u0275property("ngForOf",A.reactionsCounters))},dependencies:[R.NgForOf,R.NgIf,m.MatIcon,o.TranslatePipe],styles:["body[_ngcontent-%COMP%]{--focus-outline-outer-color: var(--crt-palette-secondary-500);--focus-outline-inner-color: white}.feed-reactions[_ngcontent-%COMP%]{display:inline-flex;height:100%}.feed-reactions[_ngcontent-%COMP%]   .feed-reaction[_ngcontent-%COMP%]{font-family:var(--crt-caption-font-family);font-size:var(--crt-caption-font-size);line-height:var(--crt-caption-line-height);font-weight:var(--crt-caption-font-weight);letter-spacing:var(--crt-caption-letter-spacing);text-transform:var(--crt-caption-text-transform);-webkit-font-smoothing:antialiased;height:100%;align-items:center;display:flex;color:var(--crt-palette-foreground-500);margin-inline-end:5px;cursor:pointer;padding-inline-end:8px;border-radius:4px}.feed-reactions[_ngcontent-%COMP%]   .feed-reaction[_ngcontent-%COMP%]:hover{color:var(--crt-palette-primary-500);stroke:var(--crt-palette-primary-500)}.feed-reactions[_ngcontent-%COMP%]   .feed-reaction-expandable[_ngcontent-%COMP%]{font-family:var(--crt-overline-font-family);font-size:var(--crt-overline-font-size);line-height:var(--crt-overline-line-height);font-weight:var(--crt-overline-font-weight);letter-spacing:var(--crt-overline-letter-spacing);text-transform:var(--crt-overline-text-transform);-webkit-font-smoothing:antialiased;border:1px solid var(--crt-palette-border-500);background:var(--crt-palette-background-500);opacity:1;padding:8px;border-radius:4px;position:absolute;bottom:25px;z-index:2;white-space:nowrap}.feed-reactions[_ngcontent-%COMP%]   .feed-reaction-expandable-title[_ngcontent-%COMP%]{font-family:var(--crt-caption-font-family);font-size:var(--crt-caption-font-size);line-height:var(--crt-caption-line-height);font-weight:var(--crt-caption-font-weight);letter-spacing:var(--crt-caption-letter-spacing);text-transform:var(--crt-caption-text-transform);-webkit-font-smoothing:antialiased;margin-bottom:5px}.feed-reactions[_ngcontent-%COMP%]   .feed-reaction-icon[_ngcontent-%COMP%]{width:16px;height:16px;margin-inline-end:4px}.feed-reactions[_ngcontent-%COMP%]   .feed-reaction[_ngcontent-%COMP%]:focus-visible{box-shadow:inset 0 0 0 1px var(--focus-outline-outer-color),inset 0 0 0 2px var(--focus-outline-inner-color);outline:none;border-radius:4px}"]})}}},33652:(U,F,t)=>{t.d(F,{D:()=>R});var n=t(6530),d=t(41314),o=t(90983),e=t(59131),w=t.n(e),f=t(19816),h=t(73916),b=t(40297),K=t.n(b);function W(a,m){if(a&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"img",4),e.\u0275\u0275elementContainerEnd()),a&2){const C=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("src",C.getPhotoUrl(),e.\u0275\u0275sanitizeUrl)}}function T(a,m){if(a&1&&(e.\u0275\u0275elementStart(0,"span",5),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),a&2){const C=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("background",C.getColor()),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(C.getInitials())}}class R{constructor(m,C){this._contactColorService=m,this._initialsService=C}_getImageUrlById(m){return(0,d.Mc)(m)}hasPhoto(){return this.contact?.primaryImageValue&&!(0,n.gZ)(this.contact?.primaryImageValue)}getPhotoUrl(){return this.hasPhoto()?this._getImageUrlById(this.contact?.primaryImageValue):""}getInitials(){return this.contact?this._initialsService.getInitials(this.contact.displayValue):""}getContactLink(){return(0,o.TX)("Contact",this.contact?.value)}getColor(){return this._contactColorService.getNextColor(this.contact?.value)}static{this.\u0275fac=function(C){return new(C||R)(e.\u0275\u0275directiveInject(f.d),e.\u0275\u0275directiveInject(h.j))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:R,selectors:[["crt-feed-user-img"]],inputs:{contact:"contact"},decls:5,vars:5,consts:[["noPhoto",""],[1,"feed-user-img"],["tabindex","-1",3,"href"],[4,"ngIf","ngIfElse"],["alt","Contact photo",1,"contact-photo",3,"src"],[1,"contact-photo","no-photo"]],template:function(C,l){if(C&1&&(e.\u0275\u0275elementStart(0,"div",1)(1,"a",2),e.\u0275\u0275template(2,W,2,1,"ng-container",3)(3,T,2,3,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()),C&2){const v=e.\u0275\u0275reference(4);e.\u0275\u0275advance(),e.\u0275\u0275attributeInterpolate1("data-qa","",l.contact==null?null:l.contact.value,"-feed-user-img"),e.\u0275\u0275propertyInterpolate("href",l.getContactLink(),e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",l.hasPhoto())("ngIfElse",v)}},dependencies:[b.NgIf],styles:["body[_ngcontent-%COMP%]{--focus-outline-outer-color: var(--crt-palette-secondary-500);--focus-outline-inner-color: white}.feed-user-img[_ngcontent-%COMP%]{display:inline-block}.feed-user-img[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.feed-user-img[_ngcontent-%COMP%]   .contact-photo[_ngcontent-%COMP%]{border-radius:50%;width:32px;height:32px}.feed-user-img[_ngcontent-%COMP%]   .contact-photo.no-photo[_ngcontent-%COMP%]{font-family:var(--crt-caption-font-family);font-size:var(--crt-caption-font-size);line-height:var(--crt-caption-line-height);font-weight:var(--crt-caption-font-weight);letter-spacing:var(--crt-caption-letter-spacing);text-transform:var(--crt-caption-text-transform);-webkit-font-smoothing:antialiased;text-align:center;display:flex;flex-direction:column;justify-content:center;min-width:32px;min-height:32px;color:var(--crt-palette-background-500)}"]})}}},47062:(U,F,t)=>{t.d(F,{F:()=>j});var n=t(5960),d=t.n(n),o=t(59131),e=t.n(o),w=t(61541),f=t(77592),h=t(34760),b=t(3671),K=t(96677),W=t(52793),T=t(10098),R=t(58001),a=t(68712),m=t(64429),C=t(67159),l=t(29423),v=t(62278),x=t.n(v),i=t(86575),c=t(23854),P=t(40297),y=t.n(P),I=t(52989),u=t.n(I),D=t(58433),A=t(4227),$=t(54653),X=t(57134),de=t(79772),oe=t.n(de);const ee=["selectionActionsPanel"],_=["feedWrap"],L=["crtFeedPosts"],B=["*"],H=Y=>({display:Y});function z(Y,Q){if(Y&1){const O=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"crt-feed-composer",15),o.\u0275\u0275listener("selectionChange",function(V){o.\u0275\u0275restoreView(O);const te=o.\u0275\u0275nextContext(3);return o.\u0275\u0275resetView(te.onSelectionChange(V))}),o.\u0275\u0275elementEnd()}if(Y&2){const O=o.\u0275\u0275nextContext(3);o.\u0275\u0275property("primaryColumnValue",O.primaryColumnValue)("entitySchemaName",O.entitySchemaName)("allowExternalPost",O.allowExternalPost)("disableSelectionOptions",O.disableSelectionOptions)("selection",O.selection)("forExternalDefault",O.getForExternalDefault())}}function se(Y,Q){if(Y&1){const O=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",16)(1,"button",17,4),o.\u0275\u0275pipe(3,"translate"),o.\u0275\u0275element(4,"mat-icon",18)(5,"mat-icon",19),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"crt-menu",20,5),o.\u0275\u0275listener("itemSelected",function(V){o.\u0275\u0275restoreView(O);const te=o.\u0275\u0275nextContext(3);return o.\u0275\u0275resetView(te.menuItemSelected(V))}),o.\u0275\u0275elementEnd()()}if(Y&2){const O=o.\u0275\u0275reference(7),Z=o.\u0275\u0275nextContext(3);o.\u0275\u0275advance(),o.\u0275\u0275property("crtMenuTriggerFor",O),o.\u0275\u0275attribute("aria-label",o.\u0275\u0275pipeBind1(3,3,"Feed.SortButtonCaption")),o.\u0275\u0275advance(5),o.\u0275\u0275property("menuItems",Z.feedActionItems)}}function le(Y,Q){if(Y&1&&(o.\u0275\u0275elementStart(0,"div",12),o.\u0275\u0275template(1,z,1,6,"crt-feed-composer",13)(2,se,8,5,"div",14),o.\u0275\u0275elementEnd()),Y&2){const O=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(),o.\u0275\u0275property("ngIf",O.isPostComposerVisible),o.\u0275\u0275advance(),o.\u0275\u0275property("ngIf",O.isPostsActionsVisibled)}}function me(Y,Q){if(Y&1){const O=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",9,2),o.\u0275\u0275template(3,le,3,2,"div",10),o.\u0275\u0275elementStart(4,"crt-feed-posts",11,3),o.\u0275\u0275listener("offsetDateChange",function(V){o.\u0275\u0275restoreView(O);const te=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(te.onOffsetDateChange(V))})("feedSortColumnChange",function(V){o.\u0275\u0275restoreView(O);const te=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(te.onSortColumnChange(V))})("feedMessagesChange",function(V){o.\u0275\u0275restoreView(O);const te=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(te.onFeedMessagesChange(V))})("selectionChange",function(V){o.\u0275\u0275restoreView(O);const te=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(te.onSelectionChange(V))}),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementContainerEnd()}if(Y&2){const O=o.\u0275\u0275nextContext();o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",!O.isUserTypeFeed&&!O.isReadOnly),o.\u0275\u0275advance(),o.\u0275\u0275property("allowExternalPost",O.allowExternalPost)("schemaName",O.entitySchemaName)("masterRecordId",O.primaryColumnValue)("feedType",O.feedType)("feedSortColumn",O.sortChanged.asObservable())("showBlankSlate",O.showBlankSlate)("feedOffsetDate",O.offsetDate)("feedMessages",O.feedMessages)("feedMessagesPage",O.feedMessagesPage)("disableSelectionOptions",O.disableSelectionOptions)("readingMode",O.readingMode)("isReadOnly",O.isReadOnly)}}function pe(Y,Q){Y&1&&(o.\u0275\u0275elementStart(0,"div",21)(1,"div",22),o.\u0275\u0275element(2,"mat-icon",23)(3,"div",24),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"div",25)(5,"div",26),o.\u0275\u0275element(6,"mat-icon",23),o.\u0275\u0275elementStart(7,"div",27),o.\u0275\u0275element(8,"div",28)(9,"div",29)(10,"div",29)(11,"div",29),o.\u0275\u0275elementStart(12,"div",30),o.\u0275\u0275element(13,"div",31)(14,"div",32)(15,"div",32)(16,"div",32),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(17,"div",33)(18,"div",26),o.\u0275\u0275element(19,"mat-icon",23),o.\u0275\u0275elementStart(20,"div",27),o.\u0275\u0275element(21,"div",28)(22,"div",29)(23,"div",34),o.\u0275\u0275elementStart(24,"div",30),o.\u0275\u0275element(25,"div",32)(26,"div",32),o.\u0275\u0275elementEnd()()()()()(),o.\u0275\u0275elementStart(27,"div",26),o.\u0275\u0275element(28,"mat-icon",23),o.\u0275\u0275elementStart(29,"div",27),o.\u0275\u0275element(30,"div",35)(31,"div",29),o.\u0275\u0275elementStart(32,"div",30),o.\u0275\u0275element(33,"div",31)(34,"div",32)(35,"div",32)(36,"div",32),o.\u0275\u0275elementEnd()()()()())}let j=class be extends a.K{get isDesignerMode(){return this._isDesignTime}get feedActionItems(){return[{caption:"Feed.SortByCreatedOn",type:"action",code:"CreatedOn",icon:"sort-feed"},{caption:"Feed.SortByLastAction",type:"action",code:"LastActionOn",icon:"sort-feed"}]}constructor(Q,O){super(Q),this._isDesignTime=O,this.sortChanged=new v.Subject,this.offsetDateChange=new o.EventEmitter,this.readingMode=m.w.All,this.sortColumnChange=new o.EventEmitter,this.feedMessagesChange=new o.EventEmitter,this.feedMessages=[],this.feedMessagesPage=[],this.showBlankSlate=!0,this.selectionChange=new o.EventEmitter,this._selectionActionsPositionService=Q.get(R.O)}get isUserTypeFeed(){return this.feedType===C.Q.User}get isPostComposerVisible(){return!this.isUserTypeFeed&&this.cardState!==w.n.Add}get isPostsActionsVisibled(){return this.crtFeedPosts?.feedMessages?.length>0}menuItemSelected({code:Q}){this.sortChanged.next(i.K[Q])}canLoadFeed(){return!this.isDesignerMode&&(this.feedType===C.Q.User||this.feedType===C.Q.Record&&!!this.entitySchemaName&&!!this.primaryColumnValue)}onOffsetDateChange(Q){this.offsetDateChange.emit(Q)}onFeedMessagesChange(Q){this.feedMessagesChange.emit(Q)}onSortColumnChange(Q){this.sortColumnChange.emit(Q)}onSelectionChange(){if(!this._selectionActionsPositionService.updatePosition(this.selectionActionsPanel,this.feedWrap?.nativeElement))return;const O=getSelection()?.toString();O!==this.selection&&this.selectionChange.next(O)}getForExternalDefault(){return this.readingMode===m.w.External}static{this.\u0275fac=function(O){return new(O||be)(o.\u0275\u0275directiveInject(o.Injector),o.\u0275\u0275directiveInject(l.w,8))}}static{this.\u0275cmp=o.\u0275\u0275defineComponent({type:be,selectors:[["crt-feed"]],viewQuery:function(O,Z){if(O&1&&(o.\u0275\u0275viewQuery(ee,5,o.ElementRef),o.\u0275\u0275viewQuery(_,5,o.ElementRef),o.\u0275\u0275viewQuery(L,5)),O&2){let V;o.\u0275\u0275queryRefresh(V=o.\u0275\u0275loadQuery())&&(Z.selectionActionsPanel=V.first),o.\u0275\u0275queryRefresh(V=o.\u0275\u0275loadQuery())&&(Z.feedWrap=V.first),o.\u0275\u0275queryRefresh(V=o.\u0275\u0275loadQuery())&&(Z.crtFeedPosts=V.first)}},inputs:{offsetDate:"offsetDate",sortColumn:"sortColumn",readingMode:"readingMode",feedMessages:"feedMessages",feedMessagesPage:"feedMessagesPage",entitySchemaName:"entitySchemaName",dataSourceName:"dataSourceName",primaryColumnValue:"primaryColumnValue",primaryDisplayColumnValue:"primaryDisplayColumnValue",feedType:"feedType",cardState:"cardState",allowExternalPost:"allowExternalPost",showBlankSlate:"showBlankSlate",selection:"selection",disableSelectionOptions:"disableSelectionOptions",isReadOnly:"isReadOnly"},outputs:{offsetDateChange:"offsetDateChange",sortColumnChange:"sortColumnChange",feedMessagesChange:"feedMessagesChange",selectionChange:"selectionChange"},features:[o.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:B,decls:8,vars:8,consts:[["selectionActionsPanel",""],["feed_plug",""],["feedWrap",""],["crtFeedPosts",""],["trigger","crtMenuTrigger"],["feedActionsMenu",""],[3,"ngStyle"],[1,"rich-text-selection-actions","feed-selection-actions"],[4,"ngIf","ngIfElse"],[1,"feed"],["class","feed-header",4,"ngIf"],[3,"offsetDateChange","feedSortColumnChange","feedMessagesChange","selectionChange","allowExternalPost","schemaName","masterRecordId","feedType","feedSortColumn","showBlankSlate","feedOffsetDate","feedMessages","feedMessagesPage","disableSelectionOptions","readingMode","isReadOnly"],[1,"feed-header"],[3,"primaryColumnValue","entitySchemaName","allowExternalPost","disableSelectionOptions","selection","forExternalDefault","selectionChange",4,"ngIf"],["class","feed-posts-actions",4,"ngIf"],[3,"selectionChange","primaryColumnValue","entitySchemaName","allowExternalPost","disableSelectionOptions","selection","forExternalDefault"],[1,"feed-posts-actions"],["data-qa","feed-sort-button",1,"feed-posts-actions-button",3,"crtMenuTriggerFor"],["svgIcon","sort-feed"],["svgIcon","menu-arrow"],[3,"itemSelected","menuItems"],[1,"feed-plug"],[1,"feed-plug-publisher","d-flex"],["svgIcon","feed-user-photo-mock",1,"feed-plug-user-img"],[1,"feed-plug-input"],[1,"feed-plug-posts"],[1,"feed-plug-posts-item","d-flex"],[1,"feed-plug-posts-item-message"],[1,"feed-plug-posts-item-message-sender","small"],[1,"feed-plug-posts-item-message-text"],[1,"feed-plug-posts-item-message-files","d-flex"],[1,"feed-plug-posts-item-message-files-item","big"],[1,"feed-plug-posts-item-message-files-item","small"],[1,"feed-plug-posts-item-message-comments"],[1,"feed-plug-posts-item-message-text","small"],[1,"feed-plug-posts-item-message-sender","big"]],template:function(O,Z){if(O&1&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275element(0,"crt-skeleton-loader",6),o.\u0275\u0275elementStart(1,"div",7,0),o.\u0275\u0275projection(3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"div",6),o.\u0275\u0275template(5,me,6,13,"ng-container",8)(6,pe,37,0,"ng-template",null,1,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd()),O&2){const V=o.\u0275\u0275reference(7);o.\u0275\u0275property("ngStyle",o.\u0275\u0275pureFunction1(4,H,Z.loading?"":"none")),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngStyle",o.\u0275\u0275pureFunction1(6,H,Z.loading?"none":"")),o.\u0275\u0275advance(),o.\u0275\u0275property("ngIf",Z.canLoadFeed())("ngIfElse",V)}},dependencies:[c.r,P.NgIf,P.NgStyle,I.MatIcon,D.W,A.IK,$.O,X.G,de.TranslatePipe],styles:["body[_ngcontent-%COMP%]{--focus-outline-outer-color: var(--crt-palette-secondary-500);--focus-outline-inner-color: white}[_nghost-%COMP%]{height:100%}.feed[_ngcontent-%COMP%]{font-family:var(--crt-body-1-font-family);font-size:var(--crt-body-1-font-size);line-height:var(--crt-body-1-line-height);font-weight:var(--crt-body-1-font-weight);letter-spacing:var(--crt-body-1-letter-spacing);text-transform:var(--crt-body-1-text-transform);-webkit-font-smoothing:antialiased;background:var(--crt-palette-interaction-A100);border-radius:8px;padding:8px 5px 5px;overflow:hidden;height:100%;display:flex;flex-direction:column;container-type:inline-size}.feed[_ngcontent-%COMP%]   .feed-header[_ngcontent-%COMP%]   .feed-posts-actions[_ngcontent-%COMP%]{width:100%;margin-top:5px;display:inline-flex;justify-content:flex-end}.feed[_ngcontent-%COMP%]   .feed-header[_ngcontent-%COMP%]   .feed-posts-actions[_ngcontent-%COMP%]   button.feed-posts-actions-button[_ngcontent-%COMP%]{border:none;background-color:inherit;cursor:pointer;padding-right:0}.feed[_ngcontent-%COMP%]   .feed-header[_ngcontent-%COMP%]   .feed-posts-actions[_ngcontent-%COMP%]   button.feed-posts-actions-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:18px;height:16px}.feed[_ngcontent-%COMP%]   .feed-header[_ngcontent-%COMP%]   .feed-posts-actions[_ngcontent-%COMP%]   button.feed-posts-actions-button[_ngcontent-%COMP%]:hover{color:var(--crt-palette-primary-500)}@container (max-width: 370px){.feed[_ngcontent-%COMP%]   .feed-header[_ngcontent-%COMP%]{margin-bottom:17px}.feed[_ngcontent-%COMP%]   .feed-header[_ngcontent-%COMP%]   .feed-posts-actions[_ngcontent-%COMP%]{display:none}}.feed-plug[_ngcontent-%COMP%]{background:var(--crt-palette-interaction-A100);border-radius:8px;padding:16px;width:100%;height:100%;overflow:hidden}.feed-plug[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{display:flex}.feed-plug-user-img[_ngcontent-%COMP%]{width:32px;height:32px}.feed-plug-input[_ngcontent-%COMP%]{margin-left:16px;width:100%;border:1px solid var(--crt-palette-foreground-50);border-radius:8px;height:32px}.feed-plug-posts-item[_ngcontent-%COMP%]{margin-top:24px}.feed-plug-posts-item-message[_ngcontent-%COMP%]{width:100%;margin-left:16px}.feed-plug-posts-item-message-sender[_ngcontent-%COMP%]{height:12px;border-radius:4px;background-color:var(--crt-palette-interaction-900);margin-bottom:8px}.feed-plug-posts-item-message-sender.big[_ngcontent-%COMP%]{width:60%}.feed-plug-posts-item-message-sender.small[_ngcontent-%COMP%]{width:40%}.feed-plug-posts-item-message-text[_ngcontent-%COMP%]{margin-top:4px;width:100%;height:8px;border-radius:4px;background-color:var(--crt-palette-foreground-50)}.feed-plug-posts-item-message-text.small[_ngcontent-%COMP%]{width:70%}.feed-plug-posts-item-message-files[_ngcontent-%COMP%]{margin-top:8px}.feed-plug-posts-item-message-files-item[_ngcontent-%COMP%]{height:16px;border-radius:4px;background-color:var(--crt-palette-secondary-50);margin-right:8px}.feed-plug-posts-item-message-files-item.big[_ngcontent-%COMP%]{width:22%}.feed-plug-posts-item-message-files-item.small[_ngcontent-%COMP%]{width:10%}.feed-plug-posts-item-message-comments[_ngcontent-%COMP%]{margin-top:24px}.feed-selection-actions[_ngcontent-%COMP%]{position:fixed;display:none;z-index:2010}"]})}};(0,n.__decorate)([(0,f.k)(),(0,n.__metadata)("design:type",String)],j.prototype,"offsetDate",void 0),(0,n.__decorate)([(0,h.j)(),(0,n.__metadata)("design:type",Object)],j.prototype,"offsetDateChange",void 0),(0,n.__decorate)([(0,f.k)(),(0,n.__metadata)("design:type",Number)],j.prototype,"sortColumn",void 0),(0,n.__decorate)([(0,f.k)(),(0,n.__metadata)("design:type",Number)],j.prototype,"readingMode",void 0),(0,n.__decorate)([(0,h.j)(),(0,n.__metadata)("design:type",Object)],j.prototype,"sortColumnChange",void 0),(0,n.__decorate)([(0,h.j)(),(0,n.__metadata)("design:type",Object)],j.prototype,"feedMessagesChange",void 0),(0,n.__decorate)([(0,f.k)(),(0,n.__metadata)("design:type",Array)],j.prototype,"feedMessages",void 0),(0,n.__decorate)([(0,f.k)({reuseStrategy:{resetValue:!0}}),(0,n.__metadata)("design:type",Array)],j.prototype,"feedMessagesPage",void 0),(0,n.__decorate)([(0,f.k)(),(0,n.__metadata)("design:type",String)],j.prototype,"entitySchemaName",void 0),(0,n.__decorate)([(0,f.k)(),(0,n.__metadata)("design:type",String)],j.prototype,"dataSourceName",void 0),(0,n.__decorate)([(0,f.k)(),(0,n.__metadata)("design:type",String)],j.prototype,"primaryColumnValue",void 0),(0,n.__decorate)([(0,f.k)(),(0,n.__metadata)("design:type",String)],j.prototype,"primaryDisplayColumnValue",void 0),(0,n.__decorate)([(0,f.k)(),(0,n.__metadata)("design:type",String)],j.prototype,"feedType",void 0),(0,n.__decorate)([(0,f.k)(),(0,n.__metadata)("design:type",String)],j.prototype,"cardState",void 0),(0,n.__decorate)([(0,f.k)(),(0,n.__metadata)("design:type",Boolean)],j.prototype,"allowExternalPost",void 0),(0,n.__decorate)([(0,f.k)(),(0,n.__metadata)("design:type",Object)],j.prototype,"showBlankSlate",void 0),(0,n.__decorate)([(0,f.k)(),(0,n.__metadata)("design:type",String)],j.prototype,"selection",void 0),(0,n.__decorate)([(0,h.j)(),(0,n.__metadata)("design:type",Object)],j.prototype,"selectionChange",void 0),(0,n.__decorate)([(0,f.k)(),(0,n.__metadata)("design:type",Boolean)],j.prototype,"disableSelectionOptions",void 0),(0,n.__decorate)([(0,f.k)(),(0,n.__metadata)("design:type",Boolean)],j.prototype,"isReadOnly",void 0),j=(0,n.__decorate)([(0,b.v)({type:"crt.Feed",contentSlots:["selectionActions"],reuseStrategy:K.B.Reuse}),(0,W.f)({toolbarConfig:{position:90,icon:t(1372),defaultPropertyValues:{feedType:C.Q.Record,primaryColumnValue:"$Id",cardState:"$CardState",allowExternalPost:!1},addCommandTypeName:"crt.AddFeedCommand"},propertiesPanelComponentTypeName:"crt.FeedPropertiesPanel",viewElementGroupType:T.J.Components,typeCaption:"Feed.Caption",placeholderSize:{height:"328px"}}),(0,n.__metadata)("design:paramtypes",[o.Injector,Boolean])],j)},30289:(U,F,t)=>{t.d(F,{e:()=>b});var n=t(5960),d=t.n(n),o=t(59131),e=t.n(o),w=t(4164),f=t(79772),h=t.n(f);let b=class{constructor(W){this._translateService=W.get(f.TranslateService)}convert(W){return W?this._translateService.instant("Feed.Following.ButtonCaption.Unfollow"):this._translateService.instant("Feed.Following.ButtonCaption.Follow")}};b=(0,n.__decorate)([(0,w.a)({type:"crt.FollowFeedButtonCaption"}),(0,n.__metadata)("design:paramtypes",[o.Injector])],b)},25415:(U,F,t)=>{t.d(F,{P:()=>m});var n=t(73308),d=t(5960),o=t.n(d),e=t(6530),w=t(4164),f=t(64429),h=t(67159),b=t(28399),K=t.n(b),W=t(62278),T=t.n(W),R=t(86575),a=t(64171);let m=class{constructor(l){this._feedMessageService=l,this._messagesPageSize=15,this._feedSortColumn=R.K.CreatedOn,this._feedReadingMode=f.w.All}_getUserMessages(l,v){const x=this._getReadFeedConfig(l,v);return(0,W.lastValueFrom)(this._feedMessageService.getUserFeedMessages(x))}_getEntityMessages(l,v,x,i){if(!l||!v)return;const c=this._getReadFeedConfig(x,i);return(0,W.lastValueFrom)(this._feedMessageService.getEntityFeedMessages(v,l,c))}_getReadFeedConfig(l,v){const x={ReadMessageCount:this._messagesPageSize,SortedBy:this._feedSortColumn,ReadingMode:this._feedReadingMode};return l&&(x.OffsetDate=l),v&&(x.ReadingMode=v),x}convert(l,v,x,i,c,P){var y=this;return(0,n.A)(function*(){const I=yield v[c];y._feedSortColumn=I||y._feedSortColumn;const u=l.find(D=>!!D&&!(0,e.n7)(D));if(x===h.Q.User)return y._getUserMessages(u,P);if(x===h.Q.Record){const D=l.find(A=>(0,e.n7)(A));if(!(0,b.isEmpty)(D)&&!(0,b.isEmpty)(i)&&i!=="#DataSourceEntityName()#")return y._getEntityMessages(D,i,u,P)}return(0,W.lastValueFrom)((0,W.of)([]))})()}};m=(0,d.__decorate)([(0,w.a)({type:"crt.LoadFeedMessages"}),(0,d.__metadata)("design:paramtypes",[a.t])],m)},39596:(U,F,t)=>{t.d(F,{S:()=>ge});var n=t(5960),d=t(40297),o=t(52989),e=t(67047),w=t(55642),f=t(79772),h=t(5476),b=t(28627),K=t(1891),W=t(18351),T=t(92527),R=t(47951),a=t(69647),m=t(50663),C=t(48067),l=t(43981),v=t(31149),x=t(44267),i=t(25063),c=t(48629),P=t(24091),y=t(57274),I=t(76509),u=t(94439),D=t(40203),A=t(65269),$=t(15841),X=t(57463),de=t(96176),oe=t(72882),ee=t(12841),_=t(1624),L=t(43691),B=t(24507),H=t(47062),z=t(94404),se=t(50524),le=t(57134),me=t(33652),pe=t(5680),j=t(30289),Y=t(25415),Q=t(5344),O=t(62480),Z=t(73308),V=t(59131),te=t(74368),ve=t(67159),Ie=t(64429),fe=t(1499),Ee=t(28399),Pe=t(62278),Oe=t(12404);class ce{constructor(S){this._selectionActionsMetadataService=S,this._metadataSchemaUtils=(0,V.inject)(te.u)}_getFeedViewConfigs(S){return this._metadataSchemaUtils.getViewConfigInfoByProperty("type","crt.Feed",S.viewConfig).map(E=>E?.viewConfig).filter(Boolean)}_fixFeedByRecordBindings(S,E){E.feedType!==ve.Q.Record||this._validateRecordFeedConfig(S,E)||!(0,fe.h)(S)||(E.primaryColumnValue=`$${this._getOrAddRecordIdAttribute(S,E)}`,E.entitySchemaName=this._getEntitySchemaName(S))}_validateRecordFeedConfig(S,E){const N=S.viewModelConfig.attributes,J=E.primaryColumnValue?.split("$")[1],q=N[J];return!(0,Ee.isEmpty)(E.entitySchemaName)&&!!q}_getOrAddRecordIdAttribute(S,E){return this._findRecordIdAttribute(S,E)||this._createRecordIdAttribute(S,E)}_findRecordIdAttribute(S,E){const J=`${(0,fe.h)(S)}.Id`,q="#PrimaryDataSourceName()#.Id",ie=S.viewModelConfig.attributes,ae=Object.keys(ie).find(re=>{const _e=(ie[re]??{}).modelConfig?.path;return _e===J||_e===q});if(!(0,Ee.isEmpty)(ae))return ae;const ne=`${E.name}_RecordId`;return ne in ie?ne:void 0}_createRecordIdAttribute(S,E){const N=(0,fe.h)(S),J=S.viewModelConfig.attributes,q=`${E.name}_RecordId`;return J[q]={modelConfig:{path:`${N}.Id`}},q}_getEntitySchemaName(S){const E=(0,fe.h)(S);return(S.modelConfig?.dataSources||{})[E]?.config?.entitySchemaName}_addMessagesBindings(S,E){if(E.feedMessages)return;const N=S.viewModelConfig.attributes,J=`${E.name}_FeedMessagesPage`,q=this._createEmptyAttribute("OffsetDate",N,E),ie=this._createEmptyAttribute("SortColumn",N,E);E.feedMessages=`$${this._createEmptyAttribute("FeedMessages",N,E)}`,E.offsetDate=`$${q}`,E.sortColumn=`$${ie}`,E.feedMessagesPage=`$${J}`;const ae=E.readingMode?E.readingMode:Ie.w.All,ne=[q];E.feedType===ve.Q.Record&&ne.push(E.primaryColumnValue.replace("$","")),N[J]={from:ne,converter:`crt.LoadFeedMessages: '${E.feedType}' : '${E.entitySchemaName}' : '${ie}' : '${ae}'`}}_createEmptyAttribute(S,E,N){const J=`${N.name}_${S}`;return E[J]={value:null},J}_setupFollowFeedCaptionAttribute(S,E){var N=this;return(0,Z.A)(function*(){const J=N._getFollowButtonViewConfigs(S);for(const q of J){const ie=S.viewModelConfig.attributes,ae=q.clicked.params||{},ne=ae.componentName?.toString();if(!ne)continue;const re=N._getFeedViewConfig(S,ne),he=E.find(Le=>Le.name===re.dataSourceName),_e=he?yield(0,Pe.lastValueFrom)(he.getSchema()):{primaryAttributeName:"Id",primaryDisplayAttributeName:"Name"},Me=`FollowFeedRecordId_${ne}_To_${re.entitySchemaName}`,ye=`FollowFeedRecordName_${ne}_To_${re.entitySchemaName}`,ue=`FollowFeed_${ne}_To_${re.entitySchemaName}`,Se=re.primaryColumnValue.replace("$","")||_e?.primaryAttributeName,Ae=_e.primaryDisplayAttributeName;ie[ue]={value:!1},ie[Me]={modelConfig:{path:`${re.dataSourceName}.${Se}`}},ie[ye]={modelConfig:{path:`${re.dataSourceName}.${Ae}`}},ae.isSubscribedAttributeName=ue,ae.recordId=`$${Me}`,ae.recordName=`$${ye}`,q.caption=`$${ue} | crt.FollowFeedButtonCaption`}})()}_getFollowButtonViewConfigs(S){return this._metadataSchemaUtils.getViewConfigInfoByPropertyForValues("type",["crt.Button","crt.MenuItem"],S.viewConfig).filter(E=>E.viewConfig?.clicked?.request==="crt.ToggleFollowFeedRequest").map(E=>E.viewConfig)}_getFeedViewConfig(S,E){return this._metadataSchemaUtils.getViewConfigInfoByProperty("type","crt.Feed",S.viewConfig).filter(N=>N.viewConfig.name===E).map(N=>N.viewConfig)[0]}crtOnMetaDataInit(S){var E=this;return(0,Z.A)(function*(){const N=S,J=E._getFeedViewConfigs(N);for(const q of J)E._fixFeedByRecordBindings(N,q),E._addMessagesBindings(N,q),yield E._selectionActionsMetadataService.setRewriteOptions(N,q);return Promise.resolve(S)})()}crtOnModelInit(S,E){var N=this;return(0,Z.A)(function*(){const J=S;return yield N._setupFollowFeedCaptionAttribute(J,E),S})()}static{this.\u0275fac=function(E){return new(E||ce)(V.\u0275\u0275inject(Oe.S))}}static{this.\u0275prov=V.\u0275\u0275defineInjectable({token:ce,factory:ce.\u0275fac})}}var xe=t(64171),De=t(72615),Te=t(47555),Re=t(23854);let ge=class Be{constructor(S){this._materialIconsRegistrator=S,this._materialIconsRegistrator.addIcons([{name:"external-user-icon",icon:t(59536)},{name:"feed-add-comment",icon:t(85893)},{name:"feed-comment",icon:t(16063)},{name:"feed-delete",icon:t(81049)},{name:"feed-edit",icon:t(11044)},{name:"feed-heart",icon:t(86876)},{name:"feed-heart-filled",icon:t(33089)},{name:"esn-feed",icon:t(1372)},{name:"feed-user-photo-mock",icon:t(61729)},{name:"sort-feed",icon:t(74072)},{name:"kebab",icon:t(71970)}])}static{this.\u0275fac=function(E){return new(E||Be)(V.\u0275\u0275inject(m.K))}}static{this.\u0275mod=V.\u0275\u0275defineNgModule({type:Be})}static{this.\u0275inj=V.\u0275\u0275defineInjector({providers:[xe.t,De.d,oe.Z,Te.K,{provide:ee.m,useClass:ce,multi:!0}],imports:[$.Q,_.X,d.CommonModule,o.MatIconModule,de.c,l.k,h.q,b.f,X.q,v.q,x.D,e.MatLegacyMenuModule,i.D,c.U,P.S,y.u,K.H,L.X,B.P,W.C,T.Q,I.Y,u.y,D.D,R.x,A.a,a.b,f.TranslateModule]})}};ge=(0,n.__decorate)([(0,w.g)({viewElements:[H.F,z.G],requestHandlers:[Q.A,O.l],converters:[j.e,Y.P]}),(0,n.__metadata)("design:paramtypes",[m.K])],ge),function(){(typeof ngJitMode>"u"||ngJitMode)&&V.\u0275\u0275setNgModuleScope(ge,{declarations:[H.F,se.N,z.G,le.G,me.D,pe.B],imports:[$.Q,_.X,d.CommonModule,o.MatIconModule,de.c,C.C,l.k,h.q,b.f,X.q,v.q,x.D,e.MatLegacyMenuModule,i.D,c.U,P.S,y.u,K.H,L.X,B.P,W.C,T.Q,I.Y,u.y,D.D,R.x,A.a,a.b,f.TranslateModule],exports:[H.F,z.G]})}(),V.\u0275\u0275setComponentScope(se.N,[Re.r,d.NgForOf,d.NgIf,z.G,me.D],[d.AsyncPipe])},62480:(U,F,t)=>{t.d(F,{l:()=>K});var n=t(73308),d=t(5960),o=t.n(d),e=t(59131),w=t.n(e),f=t(41287),h=t(844),b=t(47555);let K=class extends f.l{constructor(T){super(),this._recordIdAttributeStartWith="FollowFeedRecordId_",this._buttonCaptionAttributeStartWith="FollowFeed_",this._followFeedSubscriptionService=T.get(b.K)}handle(T){var R=this;return(0,n.A)(function*(){if(T.attributeName.startsWith(R._recordIdAttributeStartWith)){const a=T.attributeName.replace(R._recordIdAttributeStartWith,R._buttonCaptionAttributeStartWith);if(!T.value)return T.$context[a]=!1,R.next?.handle(T);try{T.$context[a]=yield R._followFeedSubscriptionService.getIsSubscribed(T.value)}catch{}}return R.next?.handle(T)})()}};K=(0,d.__decorate)([(0,h.l)({type:"crt.SetIsUserSubscribedToFeedHandler",requestType:"crt.HandleViewModelAttributeChangeRequest"}),(0,d.__metadata)("design:paramtypes",[e.Injector])],K)},5344:(U,F,t)=>{t.d(F,{A:()=>v,n:()=>l});var n=t(73308),d=t(5960),o=t.n(d),e=t(59131),w=t.n(e),f=t(81517),h=t(2828),b=t(41287),K=t(844),W=t(79772),T=t.n(W),R=t(6503),a=t(29957),m=t.n(a),C=t(47555);let l=class extends f.S{};l=(0,d.__decorate)([(0,h.$)({type:"crt.ToggleFollowFeedRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.ToggleFollowFeedRequest",propertiesPanelComponentTypeName:"crt.CrtSetFollowFeedRequestPropertiesPanelComponent",position:900})],l);let v=class extends b.l{constructor(i){super(),this._feedSubscriptionService=i.get(C.K),this._notifyService=i.get(R.F),this._translateService=i.get(W.TranslateService)}_getTranslation(i,...c){const P=this._translateService.instant(i);return a.String.format(P,c)}handle(i){var c=this;return(0,n.A)(function*(){if(!i?.recordId||!i?.isSubscribedAttributeName||!i?.entitySchemaUId){yield c.next?.handle(i);return}try{(yield i.$context[i.isSubscribedAttributeName])?(yield c._feedSubscriptionService.unsubscribeUser(i?.recordId))&&(yield c._notifyService.show({message:c._getTranslation("Feed.Following.NotificationTemplate.Unfollow",i.recordName)}),i.$context[i.isSubscribedAttributeName]=!1):(yield c._feedSubscriptionService.subscribeUser(i?.recordId,i.entitySchemaUId))&&(yield c._notifyService.show({message:c._getTranslation("Feed.Following.NotificationTemplate.Follow",i.recordName)}),i.$context[i.isSubscribedAttributeName]=!0)}catch{}yield c.next?.handle(i)})()}};v=(0,d.__decorate)([(0,K.l)({requestType:"crt.ToggleFollowFeedRequest",type:"crt.ToggleFollowFeedHandler"}),(0,d.__metadata)("design:paramtypes",[e.Injector])],v)},2106:(U,F,t)=>{t.d(F,{U:()=>n});var n;(function(d){d.Like="like"})(n||(n={}))},86575:(U,F,t)=>{t.d(F,{K:()=>n});var n;(function(d){d[d.CreatedOn=0]="CreatedOn",d[d.LastActionOn=1]="LastActionOn"})(n||(n={}))},64171:(U,F,t)=>{t.d(F,{t:()=>m});var n=t(63721),d=t.n(n),o=t(16397),e=t(64429),w=t(26594),f=t(36486),h=t.n(f),b=t(2106),K=t(59131),W=t.n(K),T=t(81923),R=t(72615),a=t(98488);class m{get getIsFeedReadingModeEnabled(){return this._featureValues.UseFeedReadingMode}constructor(l,v,x,i,c){this._httpClient=l,this._entitySchemaRepository=v,this._reactionService=x,this._feedMessageComposerService=i,this._featureValues=c,this._readFeedMethod="/rest/EsnService/ReadFeed",this._readEntityFeedMethod="/rest/EsnService/ReadEntityMessage",this._readCommentsMethod="/rest/EsnService/ReadComments",this._readCommentsWithModeMethod="/rest/EsnService/ReadCommentsWithMode",this._readMessageMethod="/rest/EsnService/ReadMessage",this._readMessageWithModeMethod="/rest/EsnService/ReadMessageWithMode",this._readCommentWithModeMethod="/rest/EsnService/ReadCommentWithMode",this._deleteMessageMethod="/rest/EsnService/DeleteMessage",this._deleteCommentMethod="/rest/EsnService/DeleteComment",this._subscriptions=[]}_getUserReactions(l){const v=l.map(x=>x.Id);return this._reactionService.getUserMessagesReactions(v).pipe((0,f.map)(x=>(x.forEach(i=>{const c=l.find(P=>P.Id===i.socialMessageId);if(c){const P=c.ReactionsCounters.find(y=>y.type===b.U.Like);P.currentUserReacted=!0}}),l)))}_getMessages(l,v){return this._httpClient.post(l,v).pipe((0,f.pluck)("EsnMessages"),(0,f.map)(x=>x??[]),(0,f.map)(x=>x.map(i=>(i.ReactionsCounters=[{type:b.U.Like,count:i.LikeCount}],i))),(0,f.switchMap)(x=>this._getUserReactions(x)))}_modifyMessage(l,v){return this._httpClient.post(l,v).pipe((0,f.map)(x=>x.success))}_getSchemaUId(l){return this._entitySchemaRepository.getSchemaByName(l).pipe((0,f.map)(v=>v.uId))}_prepareOffsetDate(l){l.OffsetDate&&(l.OffsetDate=JSON.stringify((0,o.g)(new Date(l.OffsetDate))))}getUserFeedMessages(l){return this._prepareOffsetDate(l),this._getMessages(this._readFeedMethod,{readOptions:l})}getEntityFeedMessages(l,v,x){return this._prepareOffsetDate(x),this._getSchemaUId(l).pipe((0,f.switchMap)(i=>this._getMessages(this._readEntityFeedMethod,{entityId:v,schemaUId:i,readOptions:x})))}getMessageComments(l,v,x,i=e.w.All){let c=this._readCommentsMethod;const P={entityId:v,schemaUId:l,messageId:x};return this.getIsFeedReadingModeEnabled&&i!==e.w.All&&(P.readingMode=i,c=this._readCommentsWithModeMethod),this._getMessages(c,P).pipe((0,f.map)(y=>(y.forEach(I=>{I.EntitySchemaUId=l,I.EntityId=v}),y)))}getMessage(l,v,x,i=e.w.All){let c=this._readMessageMethod;return this._getSchemaUId(l).pipe((0,f.switchMap)(P=>{const y={entityId:v,schemaUId:P,messageId:x};return this.getIsFeedReadingModeEnabled&&i!==e.w.All&&(y.readingMode=i,c=this._readMessageWithModeMethod),this._getMessages(c,y).pipe((0,f.map)(I=>(I.forEach(u=>{u.EntitySchemaUId=P,u.EntityId=v}),I)))}))}getComment(l,v,x,i=e.w.All){let c=this._readMessageMethod;const P={entityId:v,schemaUId:l,messageId:x};return this.getIsFeedReadingModeEnabled&&i!==e.w.All&&(P.readingMode=i,c=this._readCommentWithModeMethod),this._getMessages(c,P).pipe((0,f.map)(y=>(y.forEach(I=>{I.EntitySchemaUId=l,I.EntityId=v}),y)))}deleteFeedMessage(l){return this._modifyMessage(this._deleteMessageMethod,{schemaUId:l.EntitySchemaUId,entityId:l.EntityId,messageId:l.Id})}deleteMessageComment(l){return this._modifyMessage(this._deleteCommentMethod,{schemaUId:l.EntitySchemaUId,entityId:l.EntityId,commentId:l.Id})}loadAttachments(l){return this._feedMessageComposerService.loadAttachments(l.Id,l.EntitySchemaUId,l.EntityId,l.FileSchemaName,l.FileColumnName)}ngOnDestroy(){this._subscriptions.forEach(l=>l?.unsubscribe())}static{this.\u0275fac=function(v){return new(v||m)(K.\u0275\u0275inject(n.HttpClient),K.\u0275\u0275inject(T.v),K.\u0275\u0275inject(R.d),K.\u0275\u0275inject(a.D),K.\u0275\u0275inject(w.G))}}static{this.\u0275prov=K.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac})}}},72615:(U,F,t)=>{t.d(F,{d:()=>W});var n=t(63721),d=t.n(n),o=t(62278),e=t.n(o),w=t(36486),f=t.n(w),h=t(2106),b=t(59131),K=t.n(b);class W{constructor(R){this.httpClient=R,this._readUserLikesMethod="/rest/EsnService/GetMessageLikesForUser",this._readMessageLikesMethod="/rest/EsnService/GetWhoLikedMessage",this._likeMessageMethod="/rest/EsnService/LikeMessage",this._dislikeMessageMethod="/rest/EsnService/UnLikeMessage"}_getLikes(R,a){return this.httpClient.post(R,a).pipe((0,w.map)(m=>{const C=m.likes;return C.forEach(l=>l.type=h.U.Like),C}))}_modifyLike(R,a){return this.httpClient.post(R,{messageId:a}).pipe((0,w.switchMap)(m=>(0,o.of)(m.success)),(0,o.catchError)(()=>(0,o.of)(!1)))}getUserMessagesReactions(R){return R.length===0?(0,o.of)([]):this._getLikes(this._readUserLikesMethod,{messageIds:R})}getMessageReactions(R){return this._getLikes(this._readMessageLikesMethod,{messageId:R})}likeMessage(R){return this._modifyLike(this._likeMessageMethod,R)}dislikeMessage(R){return this._modifyLike(this._dislikeMessageMethod,R)}static{this.\u0275fac=function(a){return new(a||W)(b.\u0275\u0275inject(n.HttpClient))}}static{this.\u0275prov=b.\u0275\u0275defineInjectable({token:W,factory:W.\u0275fac})}}},47555:(U,F,t)=>{t.d(F,{K:()=>T});var n=t(73308),d=t(63721),o=t.n(d),e=t(26594),w=t(62278),f=t.n(w),h=t(36486),b=t.n(h),K=t(59131),W=t.n(K);class T{constructor(a,m){this.httpClient=a,this._featureValues=m,this._getIsUserSubscribed="/rest/SocialSubscriptionService/GetIsUserSubscribed",this._unsubscribeUser="/rest/SocialSubscriptionService/UnsubscribeUser",this._subscribeUser="/rest/SocialSubscriptionService/SubscribeUser"}_executeRequest(a,m){return this.httpClient.post(a,m).pipe((0,h.switchMap)(C=>C?(0,w.of)(C):(0,w.of)({})),(0,w.catchError)(()=>(0,w.of)({})))}_getIsUseOnlyOwnSubscription(a=!0){return this._featureValues.CanUseOnlyOwnSubscription?a:!1}getIsSubscribed(a){var m=this;return(0,n.A)(function*(){const C={entityId:a,useOnlyOwn:m._getIsUseOnlyOwnSubscription(!1)};return(yield(0,w.lastValueFrom)(m._executeRequest(m._getIsUserSubscribed,C))).GetIsUserSubscribedResult||!1})()}unsubscribeUser(a){var m=this;return(0,n.A)(function*(){const C={entityId:a,useOnlyOwn:m._getIsUseOnlyOwnSubscription(!1)};return(yield(0,w.lastValueFrom)(m._executeRequest(m._unsubscribeUser,C))).UnsubscribeUserResult===""})()}subscribeUser(a,m){var C=this;return(0,n.A)(function*(){const l={entityId:a,entitySchemaUId:m,useOnlyOwn:C._getIsUseOnlyOwnSubscription(!1)};return(yield(0,w.lastValueFrom)(C._executeRequest(C._subscribeUser,l)))?.SubscribeUserResult?.success??!1})()}static{this.\u0275fac=function(m){return new(m||T)(K.\u0275\u0275inject(d.HttpClient),K.\u0275\u0275inject(e.G))}}static{this.\u0275prov=K.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac,providedIn:"root"})}}},64429:(U,F,t)=>{t.d(F,{w:()=>n});var n;(function(d){d[d.All=0]="All",d[d.External=1]="External",d[d.Internal=2]="Internal"})(n||(n={}))},67159:(U,F,t)=>{t.d(F,{Q:()=>n});var n;(function(d){d.User="User",d.Record="Record"})(n||(n={}))},71970:U=>{U.exports=`<svg id="Component_2995_69" data-name="Component 2995 \u2013 69" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
  <rect id="Rectangle_42510" data-name="Rectangle 42510" width="24" height="24" rx="4" fill="rgba(0,0,0,0)" opacity="0"/>
  <g id="Group_14771" data-name="Group 14771" transform="translate(11 6)">
    <rect id="Rectangle_6186" data-name="Rectangle 6186" width="2" height="2" fill="currentColor" stroke="rgba(0,0,0,0)" stroke-width="1"/>
    <rect id="Rectangle_6187" data-name="Rectangle 6187" width="2" height="2" transform="translate(0 5)" fill="currentColor" stroke="rgba(0,0,0,0)" stroke-width="1"/>
    <rect id="Rectangle_6188" data-name="Rectangle 6188" width="2" height="2" transform="translate(0 10)" fill="currentColor" stroke="rgba(0,0,0,0)" stroke-width="1"/>
  </g>
</svg>
`},1372:U=>{U.exports=`<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64" viewBox="0 0 72 64">
  <g id="Group_14560" data-name="Group 14560" transform="translate(-464 -425)">
    <rect id="Rectangle_24800" data-name="Rectangle 24800" width="72" height="64" rx="6" transform="translate(464 425)" fill="none"/>
    <g id="Group_14731" data-name="Group 14731" transform="translate(-18.251 -1)">
      <g id="Group_14728" data-name="Group 14728" transform="translate(490.547 439)">
        <rect id="Rectangle_6612" data-name="Rectangle 6612" width="36" height="5" rx="2.5" transform="translate(5.704)" fill="#d1d1d1"/>
        <rect id="Rectangle_38970" data-name="Rectangle 38970" width="50" height="5" rx="2.5" transform="translate(5.704 8)" fill="#d1d1d1"/>
        <rect id="Rectangle_41224" data-name="Rectangle 41224" width="3" height="20" transform="translate(-0.296)" fill="#22ac14"/>
        <rect id="Rectangle_41225" data-name="Rectangle 41225" width="17" height="4" rx="2" transform="translate(5.704 16)" fill="#0091ea" opacity="0.5"/>
      </g>
      <g id="Group_14728-2" data-name="Group 14728" transform="translate(490.547 465)">
        <rect id="Rectangle_6612-2" data-name="Rectangle 6612" width="36" height="5" rx="2.5" transform="translate(5.704)" fill="#d1d1d1"/>
        <rect id="Rectangle_41224-2" data-name="Rectangle 41224" width="3" height="12" transform="translate(-0.296)" fill="#22ac14"/>
        <rect id="Rectangle_41225-2" data-name="Rectangle 41225" width="17" height="4" rx="2" transform="translate(5.704 8)" fill="#0091ea" opacity="0.5"/>
      </g>
    </g>
  </g>
</svg>
`},59536:U=>{U.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4.95278 7.23096C4.93773 7.38804 4.80738 7.51038 4.64958 7.51038H2.32548C2.15017 7.51038 2.01154 7.36033 2.03552 7.18667C2.35022 4.90772 3.98462 3.04105 6.15721 2.35497C6.4163 2.27315 6.60985 2.56791 6.46531 2.79796C5.62387 4.13714 5.1039 5.65365 4.95278 7.23096Z" fill="#22AC14"/>
<path d="M4.95278 7.23096C4.93773 7.38804 4.80738 7.51038 4.64958 7.51038H2.32548C2.15017 7.51038 2.01154 7.36033 2.03552 7.18667C2.35022 4.90772 3.98462 3.04105 6.15721 2.35497C6.4163 2.27315 6.60985 2.56791 6.46531 2.79796C5.62387 4.13714 5.1039 5.65365 4.95278 7.23096Z" fill="black" fill-opacity="0.5"/>
<path d="M6.23175 7.51038C6.05724 7.51038 5.91917 7.36205 5.93794 7.18855C6.12106 5.49585 6.75639 3.65663 7.77596 2.28596C7.88843 2.13476 8.11157 2.13476 8.22404 2.28596C9.24361 3.65663 9.87894 5.49585 10.0621 7.18855C10.0808 7.36205 9.94276 7.51038 9.76824 7.51038H6.23175Z" fill="#22AC14"/>
<path d="M6.23175 7.51038C6.05724 7.51038 5.91917 7.36205 5.93794 7.18855C6.12106 5.49585 6.75639 3.65663 7.77596 2.28596C7.88843 2.13476 8.11157 2.13476 8.22404 2.28596C9.24361 3.65663 9.87894 5.49585 10.0621 7.18855C10.0808 7.36205 9.94276 7.51038 9.76824 7.51038H6.23175Z" fill="black" fill-opacity="0.5"/>
<path d="M13.9645 7.18667C13.9885 7.36033 13.8498 7.51038 13.6745 7.51038H11.3504C11.1926 7.51038 11.0623 7.38804 11.0472 7.23096C10.8961 5.65365 10.3761 4.13714 9.53469 2.79796C9.39015 2.5679 9.5837 2.27315 9.84279 2.35497C12.0154 3.04105 13.6498 4.90772 13.9645 7.18667Z" fill="#22AC14"/>
<path d="M13.9645 7.18667C13.9885 7.36033 13.8498 7.51038 13.6745 7.51038H11.3504C11.1926 7.51038 11.0623 7.38804 11.0472 7.23096C10.8961 5.65365 10.3761 4.13714 9.53469 2.79796C9.39015 2.5679 9.5837 2.27315 9.84279 2.35497C12.0154 3.04105 13.6498 4.90772 13.9645 7.18667Z" fill="black" fill-opacity="0.5"/>
<path d="M9.84279 13.6254C9.5837 13.7072 9.39015 13.4125 9.53469 13.1824C10.3761 11.8432 10.8961 10.3267 11.0472 8.74942C11.0623 8.59234 11.1926 8.47 11.3504 8.47H13.6745C13.8498 8.47 13.9885 8.62005 13.9645 8.79371C13.6498 11.0727 12.0154 12.9393 9.84279 13.6254Z" fill="#22AC14"/>
<path d="M9.84279 13.6254C9.5837 13.7072 9.39015 13.4125 9.53469 13.1824C10.3761 11.8432 10.8961 10.3267 11.0472 8.74942C11.0623 8.59234 11.1926 8.47 11.3504 8.47H13.6745C13.8498 8.47 13.9885 8.62005 13.9645 8.79371C13.6498 11.0727 12.0154 12.9393 9.84279 13.6254Z" fill="black" fill-opacity="0.5"/>
<path d="M9.76824 8.47C9.94276 8.47 10.0808 8.61832 10.0621 8.79182C9.87898 10.4865 9.2436 12.3412 8.22393 13.714C8.11157 13.8652 7.88843 13.8652 7.77607 13.714C6.7564 12.3412 6.12102 10.4865 5.93792 8.79182C5.91917 8.61832 6.05724 8.47 6.23175 8.47H9.76824Z" fill="#22AC14"/>
<path d="M9.76824 8.47C9.94276 8.47 10.0808 8.61832 10.0621 8.79182C9.87898 10.4865 9.2436 12.3412 8.22393 13.714C8.11157 13.8652 7.88843 13.8652 7.77607 13.714C6.7564 12.3412 6.12102 10.4865 5.93792 8.79182C5.91917 8.61832 6.05724 8.47 6.23175 8.47H9.76824Z" fill="black" fill-opacity="0.5"/>
<path d="M2.03552 8.79371C2.01154 8.62005 2.15017 8.47 2.32548 8.47H4.64958C4.80738 8.47 4.93773 8.59234 4.95278 8.74942C5.1039 10.3267 5.62387 11.8432 6.4653 13.1824C6.60985 13.4125 6.4163 13.7072 6.15721 13.6254C3.98462 12.9393 2.35022 11.0727 2.03552 8.79371Z" fill="#22AC14"/>
<path d="M2.03552 8.79371C2.01154 8.62005 2.15017 8.47 2.32548 8.47H4.64958C4.80738 8.47 4.93773 8.59234 4.95278 8.74942C5.1039 10.3267 5.62387 11.8432 6.4653 13.1824C6.60985 13.4125 6.4163 13.7072 6.15721 13.6254C3.98462 12.9393 2.35022 11.0727 2.03552 8.79371Z" fill="black" fill-opacity="0.5"/>
</svg>
`},85893:U=>{U.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M8.90992 2.91063C8.90992 2.4077 8.50222 2 7.99929 2C7.49636 2 7.08865 2.4077 7.08865 2.91063V7.09079H2.91063C2.4077 7.09079 2 7.49849 2 8.00142C2 8.50435 2.4077 8.91205 2.91063 8.91205H7.08865V13.0894C7.08865 13.5923 7.49636 14 7.99929 14C8.50222 14 8.90992 13.5923 8.90992 13.0894V8.91205H13.0894C13.5923 8.91205 14 8.50435 14 8.00142C14 7.49849 13.5923 7.09079 13.0894 7.09079H8.90992V2.91063Z" fill="currentColor"/>
</svg>
`},16063:U=>{U.exports=`<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2 3.89844C2 3.07001 2.67157 2.39844 3.5 2.39844H12.5C13.3284 2.39844 14 3.07001 14 3.89844V9.99656C14 10.825 13.3284 11.4966 12.5 11.4966H8.9074H4.84368H3.5C2.67157 11.4966 2 10.825 2 9.99656V3.89844Z" fill="currentColor"/>
<path d="M4.84368 11.4966V13.427C4.84368 13.8337 5.30331 14.0702 5.63425 13.8339L8.9074 11.4966H4.84368Z" fill="currentColor"/>
</svg>
`},81049:U=>{U.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M12.5704 5.59961V13.7C12.5704 14.0448 12.4335 14.3754 12.1899 14.6192C11.9463 14.863 11.616 15 11.2715 15H4.77706C4.43257 15 4.1022 14.863 3.85861 14.6192C3.61502 14.3754 3.47818 14.0448 3.47818 13.7V5.59961H3C2.44772 5.59961 2 5.15189 2 4.59961C2 4.04732 2.44772 3.59961 3 3.59961H5.4265V3.3C5.4265 2.95522 5.56335 2.62456 5.80693 2.38076C6.05052 2.13696 6.3809 2 6.72538 2H9.32315C9.66763 2 9.99801 2.13696 10.2416 2.38076C10.4852 2.62456 10.622 2.95522 10.622 3.3V3.59961H13C13.5523 3.59961 14 4.04732 14 4.59961C14 5.15189 13.5523 5.59961 13 5.59961H12.5704ZM6.72655 7.36328C6.99556 7.36328 7.21363 7.58154 7.21363 7.85078V11.7508C7.21363 12.02 6.99556 12.2383 6.72655 12.2383C6.45755 12.2383 6.23947 12.02 6.23947 11.7508V7.85078C6.23947 7.58154 6.45755 7.36328 6.72655 7.36328ZM9.32432 7.36328C9.59332 7.36328 9.8114 7.58154 9.8114 7.85078V11.7508C9.8114 12.02 9.59332 12.2383 9.32432 12.2383C9.05531 12.2383 8.83724 12.02 8.83724 11.7508V7.85078C8.83724 7.58154 9.05531 7.36328 9.32432 7.36328Z" fill="currentColor"/>
</svg>
`},11044:U=>{U.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.8532 2.11607C11.7151 1.97799 11.4943 1.95446 11.3563 2.09255L10.3717 3.07715C10.1764 3.27241 10.1764 3.589 10.3717 3.78426L12.2161 5.6287C12.4114 5.82396 12.7279 5.82396 12.9232 5.6287L13.9078 4.6441C14.0459 4.50601 14.0224 4.28526 13.8843 4.14718L11.8532 2.11607Z" fill="currentColor"/>
<path d="M13.9078 2.09255C13.9371 2.12182 13.9129 2.14602 13.8836 2.11675C13.8543 2.08748 13.8785 2.06328 13.9078 2.09255Z" fill="currentColor"/>
<path d="M8.81564 4.63316C9.0109 4.4379 9.32748 4.4379 9.52274 4.63317L11.3672 6.47761C11.5625 6.67287 11.5625 6.98945 11.3672 7.18471L5.39022 13.1617C5.32869 13.2232 5.25217 13.2676 5.16822 13.2905L2.63211 13.9822C2.25886 14.084 1.91637 13.7415 2.01817 13.3682L2.70984 10.8321C2.73273 10.7482 2.77714 10.6717 2.83867 10.6101L8.81564 4.63316Z" fill="currentColor"/>
</svg>
`},33089:U=>{U.exports=`<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M6.42067 4.94605C6.00336 4.73894 5.52194 4.67299 5.05833 4.7594C4.59472 4.84582 4.17755 5.07927 3.87781 5.42004C3.57806 5.76081 3.41426 6.18784 3.41426 6.62848C3.41426 8.00236 4.52318 9.36165 5.82661 10.455C6.45693 10.9837 7.09048 11.415 7.56794 11.7146C7.73396 11.8188 7.88029 11.9066 8 11.9764C8.11971 11.9066 8.26604 11.8188 8.43206 11.7146C8.90952 11.415 9.54307 10.9837 10.1734 10.455C11.4768 9.36165 12.5857 8.00236 12.5857 6.62848C12.5857 6.18784 12.4219 5.76081 12.1222 5.42004C11.8224 5.07927 11.4053 4.84582 10.9417 4.7594C10.4781 4.67299 9.99664 4.73894 9.57933 4.94605C9.16201 5.15316 8.83458 5.48862 8.65273 5.89537C8.54294 6.14096 8.28547 6.30093 8 6.30093C7.71453 6.30093 7.45706 6.14096 7.34727 5.89537C7.16542 5.48862 6.83799 5.15316 6.42067 4.94605ZM8 12.7453C7.6545 13.3204 7.65432 13.3203 7.65412 13.3202L7.65228 13.3192L7.64813 13.317L7.6342 13.3096C7.62244 13.3034 7.60578 13.2945 7.58456 13.2829C7.54213 13.2599 7.48139 13.2264 7.40496 13.1831C7.25218 13.0964 7.0362 12.97 6.77804 12.808C6.26308 12.4848 5.57342 12.0159 4.88052 11.4347C3.53751 10.3082 2 8.60902 2 6.62848C2 5.88313 2.27708 5.1608 2.78411 4.58439C3.29113 4.00798 3.99677 3.61309 4.78097 3.46691C5.56518 3.32074 6.3795 3.4323 7.08539 3.78263C7.4302 3.95375 7.73873 4.17668 8 4.44016C8.26127 4.17668 8.5698 3.95375 8.91461 3.78263C9.6205 3.4323 10.4348 3.32074 11.219 3.46691C12.0032 3.61309 12.7089 4.00798 13.2159 4.58439C13.7229 5.1608 14 5.88313 14 6.62848C14 8.60902 12.4625 10.3082 11.1195 11.4347C10.4266 12.0159 9.73691 12.4848 9.22196 12.808C8.9638 12.97 8.74783 13.0964 8.59504 13.1831C8.51861 13.2264 8.45787 13.2599 8.41544 13.2829C8.39422 13.2945 8.37756 13.3034 8.3658 13.3096L8.35187 13.317L8.34772 13.3192L8.34637 13.3199C8.34618 13.32 8.34551 13.3204 8 12.7453ZM8 12.7453L8.34551 13.3204C8.13085 13.4324 7.86878 13.4322 7.65412 13.3202L8 12.7453Z" fill="currentColor"/>
<path d="M5.05833 4.7594C5.52194 4.67299 6.00336 4.73894 6.42067 4.94605C6.83799 5.15316 7.16542 5.48862 7.34727 5.89537C7.45706 6.14096 7.71453 6.30093 8 6.30093C8.28547 6.30093 8.54294 6.14096 8.65273 5.89537C8.83458 5.48862 9.16201 5.15316 9.57933 4.94605C9.99664 4.73894 10.4781 4.67299 10.9417 4.7594C11.4053 4.84582 11.8224 5.07927 12.1222 5.42004C12.4219 5.76081 12.5857 6.18784 12.5857 6.62848C12.5857 8.00236 11.4768 9.36165 10.1734 10.455C9.54307 10.9837 8.90952 11.415 8.43206 11.7146C8.26604 11.8188 8.11971 11.9066 8 11.9764C7.88029 11.9066 7.73396 11.8188 7.56794 11.7146C7.09048 11.415 6.45693 10.9837 5.82661 10.455C4.52318 9.36165 3.41426 8.00236 3.41426 6.62848C3.41426 6.18784 3.57806 5.76081 3.87781 5.42004C4.17755 5.07927 4.59472 4.84582 5.05833 4.7594Z" fill="currentColor"/>
</svg>
`},86876:U=>{U.exports=`<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M6.42067 4.94605C6.00336 4.73894 5.52194 4.67299 5.05833 4.7594C4.59472 4.84582 4.17755 5.07927 3.87781 5.42004C3.57806 5.76081 3.41426 6.18784 3.41426 6.62848C3.41426 8.00236 4.52318 9.36165 5.82661 10.455C6.45693 10.9837 7.09048 11.415 7.56794 11.7146C7.73396 11.8188 7.88029 11.9066 8 11.9764C8.11971 11.9066 8.26604 11.8188 8.43206 11.7146C8.90952 11.415 9.54307 10.9837 10.1734 10.455C11.4768 9.36165 12.5857 8.00236 12.5857 6.62848C12.5857 6.18784 12.4219 5.76081 12.1222 5.42004C11.8224 5.07927 11.4053 4.84582 10.9417 4.7594C10.4781 4.67299 9.99664 4.73894 9.57933 4.94605C9.16201 5.15316 8.83458 5.48862 8.65273 5.89537C8.54294 6.14096 8.28547 6.30093 8 6.30093C7.71453 6.30093 7.45706 6.14096 7.34727 5.89537C7.16542 5.48862 6.83799 5.15316 6.42067 4.94605ZM8 12.7453C7.6545 13.3204 7.65432 13.3203 7.65412 13.3202L7.65228 13.3192L7.64813 13.317L7.6342 13.3096C7.62244 13.3034 7.60578 13.2945 7.58456 13.2829C7.54213 13.2599 7.48139 13.2264 7.40496 13.1831C7.25218 13.0964 7.0362 12.97 6.77804 12.808C6.26308 12.4848 5.57342 12.0159 4.88052 11.4347C3.53751 10.3082 2 8.60902 2 6.62848C2 5.88313 2.27708 5.1608 2.78411 4.58439C3.29113 4.00798 3.99677 3.61309 4.78097 3.46691C5.56518 3.32074 6.3795 3.4323 7.08539 3.78263C7.4302 3.95375 7.73873 4.17668 8 4.44016C8.26127 4.17668 8.5698 3.95375 8.91461 3.78263C9.6205 3.4323 10.4348 3.32074 11.219 3.46691C12.0032 3.61309 12.7089 4.00798 13.2159 4.58439C13.7229 5.1608 14 5.88313 14 6.62848C14 8.60902 12.4625 10.3082 11.1195 11.4347C10.4266 12.0159 9.73691 12.4848 9.22196 12.808C8.9638 12.97 8.74783 13.0964 8.59504 13.1831C8.51861 13.2264 8.45787 13.2599 8.41544 13.2829C8.39422 13.2945 8.37756 13.3034 8.3658 13.3096L8.35187 13.317L8.34772 13.3192L8.34637 13.3199C8.34618 13.32 8.34551 13.3204 8 12.7453ZM8 12.7453L8.34551 13.3204C8.13085 13.4324 7.86878 13.4322 7.65412 13.3202L8 12.7453Z" fill="currentColor"/>
</svg>
`},61729:U=>{U.exports=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.4.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Component_632_2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
	 y="0px" viewBox="0 0 48 48" style="enable-background:new 0 0 48 48;" xml:space="preserve">
<style type="text/css">
	.st0{fill:#FFFFFF;}
	.st1{fill:#CACACA;}
</style>
<g>
	<circle class="st0" cx="24" cy="24" r="24"/>
	<path class="st1" d="M42.1,39.7L34,36.1l-0.5-1.6c-0.2-0.6-0.4-1.1-0.9-1.2c-0.2-0.1-0.4-0.3-0.4-0.6l-0.3-3.2
		c0-0.3,0.1-0.5,0.3-0.7c0.9-1,1.4-2.3,1.5-3.6c0.1-0.7,0.5-1.3,0.6-2l0.7-3.8c0.1-0.5,0-0.9-0.5-1.1c-0.2,0-0.3-0.3-0.3-0.7
		c0,0,0.7-5,0.5-6.7c-0.3-2.3-2.1-7-6.9-6.7C15.1,0.4,16.1,6.6,11.7,8.5c1.2,0.9,2.1,0.8,2.8,0.5c-0.2,0.2-1.8,0.3-2.5,3.3
		c0.9-1.2,1.4-1.2,2-1.5c-1.5,0.8-0.1,5.7-0.1,6.2v0.6c0,0.3-0.1,0.6-0.3,0.7C13,18.6,13,18.9,13,19.4l0.7,3.8
		c0.2,0.7,0.6,1.3,0.6,2c0.2,1.3,0.7,2.6,1.5,3.6c0.2,0.2,0.3,0.4,0.3,0.7l-0.3,3.2c0,0.2-0.2,0.5-0.4,0.6c-0.5,0.1-0.8,0.7-0.9,1.2
		l-0.5,1.6l-8.2,3.6c4.4,5,10.9,8.2,18.1,8.2S37.8,44.8,42.1,39.7z"/>
</g>
</svg>
`},74072:U=>{U.exports=`<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3 2.01074H4V11.0107H6L3.5 14.0107L1 11.0107H3V2.01074Z" fill="currentColor"/>
<path d="M11 11.0107H7V12.0107H11V11.0107Z" fill="currentColor"/>
<path d="M13 7.01074H7V8.01074H13V7.01074Z" fill="currentColor"/>
<path d="M15 3.01074H7V4.01074H15V3.01074Z" fill="currentColor"/>
</svg>
`}}]);
