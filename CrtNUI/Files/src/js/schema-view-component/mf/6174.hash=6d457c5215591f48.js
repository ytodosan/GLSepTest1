(self.webpackChunkapp_studio_enterprise_schema_view=self.webpackChunkapp_studio_enterprise_schema_view||[]).push([[6174],{36174:(w,Ne,s)=>{s.r(Ne),s.d(Ne,{CrtEntityHierarchyFilterComponent:()=>y,CrtEntityHierarchyFilterModule:()=>ie,CrtHierarchyTreeNodePaddingDirectiveModule:()=>P,CrtSpecificationFilterModule:()=>j,EntityHierarchyDisplayMode:()=>_,HierarchyTreeNodePaddingDirective:()=>z,createHierarchyFilters:()=>A});var d=s(5960),S=s(40297),ce=s(52989),ze=s(55642),N=s(79772),Fe=s(5476),Se=s(50663),Ie=s(42331),Ee=s(31149),be=s(24091),we=s(80953),Ve=s(96176),Je=s(12841),t=s(59131),V=s(77592),R=s(34760),Ge=s(3671),Xe=s(96677),Ue=s(52793),Ze=s(10098),He=s(36377),Ye=s(68712);function I(o,e,i){let n;for(let r=0;n===void 0&&r<o?.length;r++){const a=o[r];a[i]===e?n=a:n=I(a.children,e,i)}return n}function qe(o,e){return Te(o)?.map(n=>I(e,n,"id"))||[]}function Te(o){const e=o?.split("_");if(!e?.length)return[];const i=e.map((n,r)=>e[r-1]?e.slice(0,r+1).join("_"):n);return i.pop(),i}var C;(function(o){o.Boolean="359e0e35-bb39-4f07-9b9f-aec6ad076828",o.String="7aad419a-9e7a-4785-8d13-c7ff1402e13d",o.Integer="2212241a-71eb-468b-a3d5-c0f39dfe51c9",o.Decimal="beb46531-4f29-452c-be18-1ed5f1aa8b80",o.List="ecf578a0-4b4d-40e6-909c-39af2a798d32"})(C||(C={}));class F{constructor(e){this._cdk=e,this.valueChange=new t.EventEmitter}ngOnDestroy(){this._valueChangeSubscription?.unsubscribe(),this._valueChangeSubscription=null}static{this.\u0275fac=function(i){return new(i||F)(t.\u0275\u0275directiveInject(t.ChangeDetectorRef))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:F,selectors:[["crt-base-specification-filter"]],inputs:{specificationId:"specificationId"},outputs:{valueChange:"valueChange"},decls:0,vars:0,template:function(i,n){},encapsulation:2})}}var B=s(56711),et=s(12092),tt=s(76556);const it=["*"];class H{constructor(){this.customToggleStyles={toggle:{height:"20px",width:"20px"}}}static{this.\u0275fac=function(i){return new(i||H)}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:H,selectors:[["crt-specification-filter-panel"]],inputs:{caption:"caption"},ngContentSelectors:it,decls:3,vars:6,consts:[["togglePosition","after","toggleType","material",3,"expanded","fullWidthHeader","title","extraStyles"]],template:function(i,n){i&1&&(t.\u0275\u0275projectionDef(),t.\u0275\u0275elementStart(0,"crt-expansion-panel",0),t.\u0275\u0275pipe(1,"uppercase"),t.\u0275\u0275projection(2),t.\u0275\u0275elementEnd()),i&2&&t.\u0275\u0275property("expanded",!0)("fullWidthHeader",!1)("title",t.\u0275\u0275pipeBind1(1,4,n.caption))("extraStyles",n.customToggleStyles)},dependencies:[tt.o,S.UpperCasePipe],styles:[`crt-specification-filter-panel crt-expansion-panel-header{padding:4px 0}
`],encapsulation:2,changeDetection:0})}}class k extends F{set caption(e){this._caption=e,this.radioGroupAriaLabel=`Choose the state for ${this.caption} filter`}get caption(){return this._caption}constructor(e,i){super(e),this._cdk=e,this._translateService=i,this._booleanSpecFilterTranslateKey="SpecificationFilter.Boolean",this.radioButtonOptions=[{value:!0,caption:this._translateService.instant(`${this._booleanSpecFilterTranslateKey}.Yes`)},{value:!1,caption:this._translateService.instant(`${this._booleanSpecFilterTranslateKey}.No`)}]}ngOnInit(){this.reset()}reset(){this._valueChangeSubscription?.unsubscribe(),this.control=new B.FormControl(void 0),this._valueChangeSubscription=this.control.valueChanges.subscribe(e=>this.valueChange.emit({specificationId:this.specificationId,value:e})),this._cdk.detectChanges()}static{this.\u0275fac=function(i){return new(i||k)(t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(N.TranslateService))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:k,selectors:[["crt-boolean-specification-filter"]],inputs:{caption:"caption"},features:[t.\u0275\u0275ProvidersFeature([{provide:F,useExisting:(0,t.forwardRef)(()=>k)}]),t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:5,consts:[[3,"caption"],[3,"radioGroupAriaLabel","items","control"]],template:function(i,n){i&1&&(t.\u0275\u0275elementStart(0,"crt-specification-filter-panel",0),t.\u0275\u0275element(1,"crt-icon-radio-button",1),t.\u0275\u0275elementEnd()),i&2&&(t.\u0275\u0275property("caption",n.caption),t.\u0275\u0275advance(),t.\u0275\u0275property("radioGroupAriaLabel",n.radioGroupAriaLabel)("items",n.radioButtonOptions)("control",n.control),t.\u0275\u0275attribute("data-qa",n.caption))},dependencies:[et.b,H],styles:[`crt-boolean-specification-filter .crt-icon-radio-button{padding-top:2px}crt-boolean-specification-filter .crt-icon-radio-group{gap:1rem}crt-boolean-specification-filter .crt-icon-radio-group .mat-ripple-element{height:8px!important;width:8px!important;left:calc(50% - 4px)!important;top:calc(50% - 4px)!important;border-radius:50%}
`],encapsulation:2,changeDetection:0})}}var g=s(62278),nt=s(19344);class O extends F{set caption(e){this._caption=e,this.ariaLabel=`Fill in the ${this.caption} filter`}get caption(){return this._caption}constructor(e){super(e),this._cdk=e}ngOnInit(){this.reset()}reset(){this._valueChangeSubscription?.unsubscribe(),this.control=new B.FormControl(void 0),this._valueChangeSubscription=this.control.valueChanges.pipe((0,g.debounceTime)(500)).subscribe(e=>this.valueChange.emit({specificationId:this.specificationId,value:e?.length?e:void 0})),this._cdk.detectChanges()}static{this.\u0275fac=function(i){return new(i||O)(t.\u0275\u0275directiveInject(t.ChangeDetectorRef))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:O,selectors:[["crt-string-specification-filter"]],inputs:{caption:"caption"},features:[t.\u0275\u0275ProvidersFeature([{provide:F,useExisting:(0,t.forwardRef)(()=>O)}]),t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:6,consts:[[3,"caption"],[3,"placeholder","ariaLabel","control"]],template:function(i,n){i&1&&(t.\u0275\u0275elementStart(0,"crt-specification-filter-panel",0),t.\u0275\u0275element(1,"crt-input",1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),i&2&&(t.\u0275\u0275property("caption",n.caption),t.\u0275\u0275advance(),t.\u0275\u0275property("placeholder",t.\u0275\u0275pipeBind1(2,4,"SpecificationFilter.String.Placeholder"))("ariaLabel",n.ariaLabel)("control",n.control))},dependencies:[nt.j,H,N.TranslatePipe],styles:[`crt-string-specification-filter .crt-input{min-height:unset!important;padding-top:4px!important;padding-bottom:4px!important}crt-string-specification-filter .crt-input .crt-input-label-container{display:none!important}
`],encapsulation:2,changeDetection:0})}}var rt=s(13053),Y=s(94123),at=s(36486);function se(o,e){return i=>{const r=B.Validators.max(o)(i);return r?{max:{...r.max,message:e}}:null}}function le(o,e){return i=>{const r=B.Validators.min(o)(i);return r?{min:{...r.min,message:e}}:null}}var ot=s(71614);class Q extends F{set caption(e){this._caption=e,this.fromAriaLabel=`Fill in the ${this.caption} filter starting value`,this.toAriaLabel=`Fill in the ${this.caption} filter ending value`}get caption(){return this._caption}constructor(e,i,n){super(e),this._cdk=e,this.directionality=i,this._translateService=n,this.format={decimalPrecision:0}}ngOnInit(){this.reset()}reset(){this._valueChangeSubscription?.unsubscribe(),this.fromControl=new B.FormControl(void 0),this.toControl=new B.FormControl(void 0),this._valueChangeSubscription=this.fromControl.valueChanges.pipe((0,at.mergeWith)(this.toControl.valueChanges),(0,g.debounceTime)(500)).subscribe(e=>this._emitValue()),this._cdk.detectChanges()}_getMaxValue(){return this.format.decimalPrecision>0?Y.M_.Float.max:Y.M_.Integer.max}_getMinValue(){return this.format.decimalPrecision>0?Y.M_.Float.min:Y.M_.Integer.min}_emitValue(){this.fromControl.value!==null||this.toControl.value!==null?this._handleNonNullValues():this._handleNullValues()}_handleNonNullValues(){(this.fromControl.value!==this._prevFrom||this.toControl.value!==this._prevTo)&&(this.fromControl.valid&&this.toControl.valid&&(this._emitValueChange(),this._updatePreviousValues()),this._updateValidators())}_handleNullValues(){this._prevFrom===void 0&&this._prevTo===void 0||(this.valueChange.emit({specificationId:this.specificationId,value:void 0}),this._prevFrom=null,this._prevTo=null)}_emitValueChange(){this.valueChange.emit({specificationId:this.specificationId,value:{from:this.fromControl.value,to:this.toControl.value}})}_updatePreviousValues(){this._prevFrom=this.fromControl.value,this._prevTo=this.toControl.value}_updateValidators(){this._updateToControlValidators(),this._updateFromControlValidators()}_updateToControlValidators(){this.toControl.clearValidators(),this.toControl.addValidators(le(this.fromControl.value,this._translateService.instant("SpecificationFilter.Numeric.MinValueError"))),this.toControl.addValidators(le(this._getMinValue(),this._translateService.instant("SpecificationFilter.Numeric.MinValueError"))),this.toControl.addValidators(se(this._getMaxValue(),this._translateService.instant("SpecificationFilter.Numeric.MaxValueError"))),this.toControl.invalid&&this.toControl.updateValueAndValidity()}_updateFromControlValidators(){this.fromControl.clearValidators(),this.fromControl.addValidators(se(this.toControl.value,this._translateService.instant("SpecificationFilter.Numeric.MaxValueError"))),this.fromControl.addValidators(le(this._getMinValue(),this._translateService.instant("SpecificationFilter.Numeric.MinValueError"))),this.fromControl.addValidators(se(this._getMaxValue(),this._translateService.instant("SpecificationFilter.Numeric.MaxValueError"))),this.fromControl.invalid&&this.fromControl.updateValueAndValidity()}static{this.\u0275fac=function(i){return new(i||Q)(t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(rt.Directionality),t.\u0275\u0275directiveInject(N.TranslateService))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:Q,selectors:[["crt-numeric-specification-filter"]],inputs:{caption:"caption",format:"format"},features:[t.\u0275\u0275ProvidersFeature([{provide:F,useExisting:(0,t.forwardRef)(()=>Q)}]),t.\u0275\u0275InheritDefinitionFeature],decls:9,vars:18,consts:[[3,"caption"],[1,"numerics-container"],[3,"ariaLabel","placeholder","control","format"],[1,"to","specification-caption"]],template:function(i,n){i&1&&(t.\u0275\u0275elementStart(0,"crt-specification-filter-panel",0)(1,"div",1),t.\u0275\u0275element(2,"crt-number-input",2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementStart(4,"div",3),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(7,"crt-number-input",2),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementEnd()()),i&2&&(t.\u0275\u0275property("caption",n.caption),t.\u0275\u0275advance(),t.\u0275\u0275classProp("rtl",(n.directionality==null?null:n.directionality.value)==="rtl"),t.\u0275\u0275advance(),t.\u0275\u0275property("ariaLabel",n.fromAriaLabel)("placeholder",t.\u0275\u0275pipeBind1(3,12,"SpecificationFilter.Numeric.Placeholder"))("control",n.fromControl)("format",n.format),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,14,"SpecificationFilter.Numeric.To")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ariaLabel",n.toAriaLabel)("placeholder",t.\u0275\u0275pipeBind1(8,16,"SpecificationFilter.Numeric.Placeholder"))("control",n.toControl)("format",n.format))},dependencies:[ot.S,H,N.TranslatePipe],styles:[`crt-numeric-specification-filter .numerics-container{display:flex;padding-top:3.5px;padding-bottom:3.5px}crt-numeric-specification-filter .numerics-container .to{padding-right:12px;margin-top:auto;margin-bottom:auto;min-width:50px}crt-numeric-specification-filter .numerics-container crt-number-input{min-width:0}crt-numeric-specification-filter .numerics-container crt-number-input .crt-input{min-height:unset!important}crt-numeric-specification-filter .numerics-container crt-number-input .crt-input .crt-input-label-container{max-height:0px}crt-numeric-specification-filter .numerics-container.rtl .to{padding-right:0;padding-left:12px}
`],encapsulation:2,changeDetection:0})}}var Ae=s(82519);function ct(o,e){if(o&1){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"crt-checkbox",2),t.\u0275\u0275listener("valueChange",function(r){const a=t.\u0275\u0275restoreView(i).$implicit,c=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(c.onValueChange(a.id,r))}),t.\u0275\u0275elementEnd()()}if(o&2){const i=e.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(),t.\u0275\u0275property("ariaLabel",n.getCheckboxAriaLabel(i))("label",i.name)("title",i.name)}}class L extends F{constructor(){super(...arguments),this._selectedIds=[],this.options=[]}getCheckboxAriaLabel(e){const i=this._selectedIds.includes(e.id);let n=`${e.name}`;return i&&(n=`${n} Selected`),n}onValueChange(e,i){i?this._selectedIds.push(e):this._selectedIds=this._selectedIds.filter(n=>n!==e),this.valueChange.emit({specificationId:this.specificationId,value:this._selectedIds?.length?this._selectedIds:void 0})}reset(){this._selectedIds=[],this.checkboxes?.forEach(e=>e.value=!1)}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=t.\u0275\u0275getInheritedFactory(L)))(n||L)}})()}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:L,selectors:[["crt-list-specification-filter"]],viewQuery:function(i,n){if(i&1&&t.\u0275\u0275viewQuery(Ae.U,5),i&2){let r;t.\u0275\u0275queryRefresh(r=t.\u0275\u0275loadQuery())&&(n.checkboxes=r)}},inputs:{caption:"caption",options:"options"},features:[t.\u0275\u0275ProvidersFeature([{provide:F,useExisting:(0,t.forwardRef)(()=>L)}]),t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[3,"caption"],[4,"ngFor","ngForOf"],["labelPosition","right",3,"valueChange","ariaLabel","label","title"]],template:function(i,n){i&1&&(t.\u0275\u0275elementStart(0,"crt-specification-filter-panel",0),t.\u0275\u0275template(1,ct,2,3,"div",1),t.\u0275\u0275elementEnd()),i&2&&(t.\u0275\u0275property("caption",n.caption),t.\u0275\u0275advance(),t.\u0275\u0275property("ngForOf",n.options))},dependencies:[S.NgForOf,Ae.U,H],styles:[`crt-list-specification-filter crt-specification-filter-panel crt-expansion-panel .crt-expansion-panel.mat-expansion-panel .mat-expansion-panel-content .mat-expansion-panel-body{padding-top:4px}crt-list-specification-filter .crt-checkbox-container{padding-top:0;padding-bottom:8px}
`],encapsulation:2,changeDetection:0})}}function st(o,e){if(o&1){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"crt-boolean-specification-filter",7),t.\u0275\u0275listener("valueChange",function(r){t.\u0275\u0275restoreView(i);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.onFilterValueChange(r))}),t.\u0275\u0275elementEnd()}if(o&2){const i=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275property("specificationId",i.specificationId)("caption",i.caption)}}function lt(o,e){if(o&1){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"crt-string-specification-filter",7),t.\u0275\u0275listener("valueChange",function(r){t.\u0275\u0275restoreView(i);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.onFilterValueChange(r))}),t.\u0275\u0275elementEnd()}if(o&2){const i=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275property("specificationId",i.specificationId)("caption",i.caption)}}function dt(o,e){if(o&1){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"crt-numeric-specification-filter",7),t.\u0275\u0275listener("valueChange",function(r){t.\u0275\u0275restoreView(i);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.onFilterValueChange(r))}),t.\u0275\u0275elementEnd()}if(o&2){const i=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275property("specificationId",i.specificationId)("caption",i.caption)}}function pt(o,e){if(o&1){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"crt-numeric-specification-filter",8),t.\u0275\u0275listener("valueChange",function(r){t.\u0275\u0275restoreView(i);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.onFilterValueChange(r))}),t.\u0275\u0275elementEnd()}if(o&2){const i=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275property("specificationId",i.specificationId)("caption",i.caption)("format",n.decimalFormat)}}function mt(o,e){if(o&1){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"crt-list-specification-filter",9),t.\u0275\u0275listener("valueChange",function(r){t.\u0275\u0275restoreView(i);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.onFilterValueChange(r))}),t.\u0275\u0275elementEnd()}if(o&2){const i=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275property("specificationId",i.specificationId)("options",i.listItems)("caption",i.caption)}}function ft(o,e){if(o&1&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",3),t.\u0275\u0275template(2,st,1,2,"crt-boolean-specification-filter",4)(3,lt,1,2,"crt-string-specification-filter",4)(4,dt,1,2,"crt-numeric-specification-filter",4)(5,pt,1,3,"crt-numeric-specification-filter",5)(6,mt,1,3,"crt-list-specification-filter",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),o&2){const i=e.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(),t.\u0275\u0275property("ngSwitch",i.type),t.\u0275\u0275advance(),t.\u0275\u0275property("ngSwitchCase",n.specificationTypes.Boolean),t.\u0275\u0275advance(),t.\u0275\u0275property("ngSwitchCase",n.specificationTypes.String),t.\u0275\u0275advance(),t.\u0275\u0275property("ngSwitchCase",n.specificationTypes.Integer),t.\u0275\u0275advance(),t.\u0275\u0275property("ngSwitchCase",n.specificationTypes.Decimal),t.\u0275\u0275advance(),t.\u0275\u0275property("ngSwitchCase",n.specificationTypes.List)}}function ut(o,e){o&1&&(t.\u0275\u0275elementStart(0,"div",10),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),o&2&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"SpecificationFilter.NoData")," "))}class D{constructor(){this._specificationValues=new Map,this.filterChange=new t.EventEmitter,this.specificationTypes={Boolean:C.Boolean,String:C.String,Integer:C.Integer,Decimal:C.Decimal,List:C.List},this.decimalFormat={decimalPrecision:2}}onFilterValueChange(e){e.value!==void 0?this._specificationValues.set(e.specificationId,e.value):this._specificationValues.delete(e.specificationId),this.filterChange.emit({specificationFiltersConfiguration:this.specificationFilters,specificationFiltersValues:this._specificationValues,specificationEntityName:this.specificationEntityName,specificationReferenceColumnName:this.specificationReferenceColumnName})}reset(){this._specificationValues=new Map,this.specificationFilterInputs.forEach(e=>{e.reset()})}static{this.\u0275fac=function(i){return new(i||D)}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:D,selectors:[["crt-specification-filter"]],viewQuery:function(i,n){if(i&1&&t.\u0275\u0275viewQuery(F,5),i&2){let r;t.\u0275\u0275queryRefresh(r=t.\u0275\u0275loadQuery())&&(n.specificationFilterInputs=r)}},inputs:{specificationEntityName:"specificationEntityName",specificationReferenceColumnName:"specificationReferenceColumnName",specificationFilters:"specificationFilters"},outputs:{filterChange:"filterChange"},decls:3,vars:2,consts:[[1,"container"],[4,"ngFor","ngForOf"],["class","no-data specification-text",4,"ngIf"],[3,"ngSwitch"],[3,"specificationId","caption","valueChange",4,"ngSwitchCase"],[3,"specificationId","caption","format","valueChange",4,"ngSwitchCase"],[3,"specificationId","options","caption","valueChange",4,"ngSwitchCase"],[3,"valueChange","specificationId","caption"],[3,"valueChange","specificationId","caption","format"],[3,"valueChange","specificationId","options","caption"],[1,"no-data","specification-text"]],template:function(i,n){i&1&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,ft,7,6,"ng-container",1)(2,ut,3,3,"div",2),t.\u0275\u0275elementEnd()),i&2&&(t.\u0275\u0275advance(),t.\u0275\u0275property("ngForOf",n.specificationFilters),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",!(n.specificationFilters!=null&&n.specificationFilters.length)))},dependencies:[S.NgForOf,S.NgIf,S.NgSwitch,S.NgSwitchCase,k,O,Q,L,N.TranslatePipe],styles:["[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{padding:0 4px}[_nghost-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0})}}var h=s(73308),$=s(49973),de=s(61320),E=s(58504),T=s(41108),q=s(81923),G=s(65751);const b="9d8c9238-7a6b-9cc0-be1f-45b130cd4918";class K{constructor(e,i,n){this._entitySchemaRepository=e,this._queryExecutor=i,this._translateService=n,this._allFiltersNodeCaptionPath="EntityHierarchyFilter.AllFilterCaption"}_getLookupDataEsq(e){var i=this;return(0,h.A)(function*(){const r=(yield(0,g.firstValueFrom)(i._entitySchemaRepository.getSchemaByName(e))).getPrimaryDisplayColumn(),a=new $.s(e);return a.addSchemaColumn(r.name).withOrdering(de.Z.Asc,0),a})()}_getLookupData(e){var i=this;return(0,h.A)(function*(){const n=yield i._getLookupDataEsq(e);return yield(0,g.firstValueFrom)(i._queryExecutor.executeSelectQuery(n))})()}_getNodeFilter(e,i,n){let r=null;return e?(r=e.clone(),r.addSchemaColumnFilterWithParameter(E.H.Equal,i,n)):r=this._getLookupFilter(i,n),r}_getLookupFilter(e,i){const n=new T.X;return n.addSchemaColumnFilterWithParameter(E.H.Equal,e,i),n}_formSubNodes(e,i,n,r){var a=this;return(0,h.A)(function*(){const c=[],l=i.columns.find(m=>m.name===e.columnName);let p=r.get(l.referenceSchemaName);p||(p=yield a._getLookupData(l.referenceSchemaName),r.set(l.referenceSchemaName,p));for(const m of p){const v=a._getNodeFilter(n,l.name,m.Id),f={id:m.Id,caption:m.Name,filter:v,children:[]},u=e.children??[];for(const x of u){const J=yield a._formSubNodes(x,i,v,r);f.children=f.children.concat(J.map(ne=>({...ne,id:`${f.id}_${ne.id}`})))}c.push(f)}return c})()}convert(e,i){var n=this;return(0,h.A)(function*(){const r=yield(0,g.firstValueFrom)(n._entitySchemaRepository.getSchemaByName(i)),a=n.createRootNode(),c=new Map;for(const l of e){const p=yield n._formSubNodes(l,r,null,c);a.children=a.children.concat(p)}return[a]})()}createRootNode(){return{id:b,caption:this._translateService.instant(this._allFiltersNodeCaptionPath),filter:null,columnName:"All",children:[]}}static{this.\u0275fac=function(i){return new(i||K)(t.\u0275\u0275inject(q.v),t.\u0275\u0275inject(G.w),t.\u0275\u0275inject(N.TranslateService))}}static{this.\u0275prov=t.\u0275\u0275defineInjectable({token:K,factory:K.\u0275fac,providedIn:"root"})}}var ht=s(72860),yt=s(25697),gt=s(62115),_t=s(12325),Ct=s(91244),vt=s(46558);const xt=["navigateBackButton"];function Nt(o,e){o&1&&t.\u0275\u0275element(0,"mat-icon",8)}function Ft(o,e){if(o&1){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"crt-button",17),t.\u0275\u0275listener("clicked",function(){t.\u0275\u0275restoreView(i);const r=t.\u0275\u0275nextContext().node,a=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(a.onShowSpecificationFilters(r))})("keydown",function(r){t.\u0275\u0275restoreView(i);const a=t.\u0275\u0275nextContext().node,c=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(c.onKeyShowSpecificationFilters(a,r))}),t.\u0275\u0275elementEnd()}if(o&2){const i=t.\u0275\u0275nextContext().node,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("iconPosition","left-icon")("icon","filter")("title",n.getNodeFilterAriaLabel(i)),t.\u0275\u0275attribute("aria-label",n.getNodeFilterAriaLabel(i))}}function St(o,e){if(o&1&&(t.\u0275\u0275elementStart(0,"div",12)(1,"div",13)(2,"div",14),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",15),t.\u0275\u0275template(5,Ft,1,4,"crt-button",16),t.\u0275\u0275elementEnd()()),o&2){const i=e.node,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275attribute("aria-label",n.getNodeAriaLabel(i)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",i.Caption," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.specificationEntityName)}}function It(o,e){o&1&&t.\u0275\u0275element(0,"div",18)}function Et(o,e){if(o&1){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"crt-virtual-scroll-tree-view",9),t.\u0275\u0275listener("nodeExpanded",function(r){t.\u0275\u0275restoreView(i);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.onNodeExpanded(r))})("expandedItemsChanged",function(r){t.\u0275\u0275restoreView(i);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.onExpandedItemsChanged(r))})("selectedItemKeyChange",function(r){t.\u0275\u0275restoreView(i);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.onSelectedItemKeyChange(r))})("paginationChange",function(r){t.\u0275\u0275restoreView(i);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.onPaginationChange(r))}),t.\u0275\u0275template(1,St,6,3,"ng-template",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(2,It,1,0,"div",11)}if(o&2){const i=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("items",i.flatItems)("selectedItemKey",i.selectedNodeId)("expandedItems",i.expandedItems),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",i.loaderVisible)}}function bt(o,e){if(o&1&&(t.\u0275\u0275elementStart(0,"crt-toggle-container-item",5)(1,"div",6),t.\u0275\u0275template(2,Nt,1,0,"mat-icon",7)(3,Et,3,4,"ng-template",null,1,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()()),o&2){const i=t.\u0275\u0275reference(4),n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.initializing)("ngIfElse",i)}}function wt(o,e){if(o&1){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"crt-toggle-container-item",19)(1,"div",6)(2,"div",20)(3,"div",21)(4,"crt-button",22,2),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275listener("clicked",function(){t.\u0275\u0275restoreView(i);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.onHideSpecificationFilters())})("keydown",function(r){t.\u0275\u0275restoreView(i);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.onKeyBackButton(r))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"crt-button",23),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275listener("clicked",function(){t.\u0275\u0275restoreView(i);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.onClearSpecificationFilter())})("keydown",function(r){t.\u0275\u0275restoreView(i);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.onKeyClearSpecificationFilter(r))}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(9,"hr",24),t.\u0275\u0275elementStart(10,"div",25),t.\u0275\u0275element(11,"crt-label",26),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(12,"crt-specification-filter",27),t.\u0275\u0275listener("filterChange",function(r){t.\u0275\u0275restoreView(i);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.onSpecificationFilterChange(r))}),t.\u0275\u0275elementEnd()()()}if(o&2){const i=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275property("iconPosition","left-icon")("icon","back-button-icon")("caption",t.\u0275\u0275pipeBind1(6,10,"EntityHierarchyFilter.BackButtonCaption")),t.\u0275\u0275advance(3),t.\u0275\u0275property("iconPosition","left-icon")("icon","eraser-icon")("caption",t.\u0275\u0275pipeBind1(8,12,"EntityHierarchyFilter.ClearAllFiltersButtonCaption")),t.\u0275\u0275advance(4),t.\u0275\u0275property("caption",i.selectedNodeFullPathCaption),t.\u0275\u0275advance(),t.\u0275\u0275property("specificationFilters",i.specificationFiltersConfiguration)("specificationReferenceColumnName",i.specificationReferenceColumnName)("specificationEntityName",i.specificationEntityName)}}let y=class re extends Ye.K{constructor(){super(...arguments),this._selectedTabIndex=0,this.initializing=!0,this.skeletonStyles={height:"18px","margin-top":"8px","margin-left":"4px"},this.flatItems=[],this.items=[],this.loadSpecificationFilters=new t.EventEmitter,this.specificationFilterChange=new t.EventEmitter,this.expandedItemsChange=new t.EventEmitter,this.loadNext=new t.EventEmitter,this.nodeClick=new t.EventEmitter,this.tabIndexChange=new t.EventEmitter}set nodes(e){const i=this._convertNodesToFlatStructure(e);JSON.stringify(this.flatItems)!==JSON.stringify(i)&&(this.flatItems=i,this.items=e,e?.length&&this._initTreeExpandedNodes(),this.loading=!1,this.initializing=!1)}get nodes(){return this.items}set selectedNodeId(e){this._selectNodeById(e)}get selectedNodeId(){return this._selectedNodeId}set expandedItems(e){this._expandedItems=e||[]}get expandedItems(){return this._expandedItems}set selectedTabIndex(e){e!=null&&(this._selectedTabIndex=e,this.tabIndexChange.emit(e))}get selectedTabIndex(){return this._selectedTabIndex}_selectNodeById(e){this._selectedNodeId=e,!(!e||this._lastSelectedNodeId===e)&&(this._lastSelectedNodeId=e,this.nodeClick.emit(this.selectedNodeId),this.specificationFilter?.reset())}_initTreeExpandedNodes(){const e=this.items?.[0];this.expandedItems?.length===0&&(this._expandedItems=[e.id],this.selectedNodeId=e.id,this.onExpandedItemsChanged(this.expandedItems))}_convertNodesToFlatStructure(e,i=[],n=0,r=""){return e?.forEach(a=>{i.push({Id:a.id,Caption:a.caption,Level:n,ParentId:r,Expandable:!a.isLastLevel,IsLastItem:a.isLastItem}),this._convertNodesToFlatStructure(a.children,i,n+1,a.id)}),i}_refocusActiveNode(){setTimeout(()=>{const e=document.querySelector(".crt-virtual-scroll-view-item-selected");e&&e.focus()},50)}ngAfterViewInit(){this.toggleContainer.showItem()}onSelectedItemKeyChange(e){this.selectedNodeId=e}getNodeAriaLabel(e){let i=e.Caption;if(e.Expandable){const r=this.expandedItems&&this.expandedItems.includes(e.Id)?"Expanded":"Collapsed";i=`${i} ${r}`}return this.selectedNodeId===e.Id&&(i=`${i} Selected`),i}getNodeFilterAriaLabel(e){return`${e.Caption} Open additional filtering`}onSpecificationFilterChange(e){this.specificationFilterChange.emit(e)}onShowSpecificationFilters(e){const i=I(this.items,e.Id,"id");if(!i)return;e.id!==this._lastSelectedNodeId&&this._selectNodeById(e.Id);const n=qe(e.Id,this.items);if(e.id!==b){const r=I(this.items,b,"id");r&&n.unshift(r)}n.push(i),this.selectedNodeFullPathCaption=n.map(r=>r.caption).join(" / "),this.selectedTabIndex=1,setTimeout(()=>this._navigateBackButton?.focus(),50),this.loadSpecificationFilters.emit(this.specificationEntityName)}onKeyShowSpecificationFilters(e,i){i.key==="Enter"&&this.onShowSpecificationFilters(e)}onKeyBackButton(e){e.key==="Enter"&&(this.onHideSpecificationFilters(),this._refocusActiveNode())}onHideSpecificationFilters(){this.selectedTabIndex=0}onKeyClearSpecificationFilter(e){e.key==="Enter"&&this.onClearSpecificationFilter()}onClearSpecificationFilter(){this.specificationFilter?.reset(),this.specificationFilterChange.emit({specificationEntityName:this.specificationEntityName,specificationReferenceColumnName:this.specificationReferenceColumnName,specificationFiltersConfiguration:this.specificationFiltersConfiguration,specificationFiltersValues:new Map})}onNodeExpanded(e){const i=I(this.items,e.Id,"id");i.id!==b&&(this.loading=!0),this.loadNext.emit([i])}onExpandedItemsChanged(e){this.expandedItemsChange.emit(e)}onPaginationChange(e){const i=e?.parentKeys.map(n=>I(this.nodes,n,"id")).filter(n=>n!==void 0);i?.length&&(this.loading=!0,this.loadNext.emit(i))}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=t.\u0275\u0275getInheritedFactory(re)))(n||re)}})()}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:re,selectors:[["crt-entity-hierarchy-filter"]],viewQuery:function(i,n){if(i&1&&(t.\u0275\u0275viewQuery(D,5),t.\u0275\u0275viewQuery(He.I,5),t.\u0275\u0275viewQuery(xt,5)),i&2){let r;t.\u0275\u0275queryRefresh(r=t.\u0275\u0275loadQuery())&&(n.specificationFilter=r.first),t.\u0275\u0275queryRefresh(r=t.\u0275\u0275loadQuery())&&(n.toggleContainer=r.first),t.\u0275\u0275queryRefresh(r=t.\u0275\u0275loadQuery())&&(n._navigateBackButton=r.first)}},inputs:{nodes:"nodes",specificationReferenceColumnName:"specificationReferenceColumnName",specificationEntityName:"specificationEntityName",specificationFiltersConfiguration:"specificationFiltersConfiguration",selectedNodeId:"selectedNodeId",expandedItems:"expandedItems",displayMode:"displayMode",selectedTabIndex:"selectedTabIndex"},outputs:{loadSpecificationFilters:"loadSpecificationFilters",specificationFilterChange:"specificationFilterChange",expandedItemsChange:"expandedItemsChange",loadNext:"loadNext",nodeClick:"nodeClick",tabIndexChange:"tabIndexChange"},features:[t.\u0275\u0275InheritDefinitionFeature],decls:5,vars:2,consts:[["items",""],["treeViewContainer",""],["navigateBackButton",""],[3,"selectedTabIndex","slidingAnimation"],["name",""],[1,"hierarchy-container"],["slot","items"],["class","tree-skeleton-icon","svgIcon","tree-skeleton",4,"ngIf","ngIfElse"],["svgIcon","tree-skeleton",1,"tree-skeleton-icon"],[3,"nodeExpanded","expandedItemsChanged","selectedItemKeyChange","paginationChange","items","selectedItemKey","expandedItems"],["crtVirtualScrollTreeViewItemOutlet",""],["class","crt-hierarchy-progress-bar",4,"ngIf"],["data-item-hierarchy-tree-node","",1,"tree-node"],["node-caption-container","",1,"tree-node-caption-container"],[1,"tree-node-caption","pointer"],[1,"suffix-node-sticky-container"],["node-filter-container","","class","tree-node-filters suffix-node","size","small","color","transparent",3,"iconPosition","icon","title","clicked","keydown",4,"ngIf"],["node-filter-container","","size","small","color","transparent",1,"tree-node-filters","suffix-node",3,"clicked","keydown","iconPosition","icon","title"],[1,"crt-hierarchy-progress-bar"],[1,"specification-container"],[1,"navigation-body-wrapper"],[1,"navigation-header"],["size","large","displayType","text","color","primary",1,"navigate-back-button",3,"clicked","keydown","iconPosition","icon","caption"],["size","medium","size","large","displayType","text","color","default",3,"clicked","keydown","iconPosition","icon","caption"],[1,"navigation-divider"],[1,"navigation-path-caption"],["labelType","caption","labelColor","var(--crt-palette-label-400)",3,"caption"],[3,"filterChange","specificationFilters","specificationReferenceColumnName","specificationEntityName"]],template:function(i,n){i&1&&(t.\u0275\u0275elementStart(0,"crt-toggle-container",3),t.\u0275\u0275template(1,bt,5,2,"ng-template",4,0,t.\u0275\u0275templateRefExtractor)(3,wt,13,14,"ng-template",4,0,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()),i&2&&t.\u0275\u0275property("selectedTabIndex",n.selectedTabIndex)("slidingAnimation",!0)},dependencies:[S.NgIf,ce.MatIcon,D,ht.x,He.I,yt.H,gt.B,_t.V,Ct.o,vt.c,N.TranslatePipe],styles:[`body{--focus-outline-outer-color: var(--crt-palette-secondary-500);--focus-outline-inner-color: white}crt-entity-hierarchy-filter{overflow:auto;min-width:12rem}crt-entity-hierarchy-filter .tree-skeleton-icon{min-height:12rem;width:100%;opacity:.6;min-width:12rem}crt-entity-hierarchy-filter .tree-skeleton-icon:before{animation:tree-skeleton-icon-progress 2s ease-in-out infinite;background-size:200px 100%;position:absolute;top:0;left:0;width:200px;height:100%;content:"";background-image:linear-gradient(90deg,#fff0,#fff9,#fff0)}@keyframes tree-skeleton-icon-progress{0%{transform:translate(-200px)}to{transform:translate(calc(200px + 100vw))}}crt-entity-hierarchy-filter crt-toggle-container,crt-entity-hierarchy-filter .crt-toggle-container{border-radius:0!important}crt-entity-hierarchy-filter crt-toggle-container crt-toggle-container-item div[slot=items],crt-entity-hierarchy-filter .crt-toggle-container crt-toggle-container-item div[slot=items]{height:100%}crt-entity-hierarchy-filter .hierarchy-container .tab-body,crt-entity-hierarchy-filter .specification-container .tab-body{padding:0}crt-entity-hierarchy-filter .pointer{cursor:pointer}crt-entity-hierarchy-filter crt-tree-view{height:100%}crt-entity-hierarchy-filter .tree-node{height:2.5rem;display:flex;align-items:center;padding-left:.5rem;padding-right:.5rem}crt-entity-hierarchy-filter .tree-node:not(.nested-node){width:100%}crt-entity-hierarchy-filter .tree-node .tree-node-caption-container{display:flex}crt-entity-hierarchy-filter .tree-node .tree-node-filters{padding:5px 5px 0;margin-left:auto}crt-entity-hierarchy-filter .tree-node .suffix-node-sticky-container{display:flex;width:100%}crt-entity-hierarchy-filter .tree-node .suffix-node-sticky-container .suffix-node{display:flex;position:sticky;right:8px;left:8px}crt-entity-hierarchy-filter .tree-node:hover .tree-node-filters{visibility:unset}crt-entity-hierarchy-filter .tree-node-hidden{display:none}crt-entity-hierarchy-filter .nested-node{display:flex}crt-entity-hierarchy-filter .nested-node .nested-node-filters{padding:5px 5px 0;margin-left:auto}crt-entity-hierarchy-filter .nested-node .nested-node-filters:hover,crt-entity-hierarchy-filter .nested-node .nested-node-filters:focus{visibility:unset}crt-entity-hierarchy-filter .nested-node:hover .nested-node-filters{visibility:unset}crt-entity-hierarchy-filter .nested-node.focused .nested-node-filters{visibility:unset}crt-entity-hierarchy-filter .nested-node .mat-icon.chevron-icon{height:16px}crt-entity-hierarchy-filter .nested-node .nested-node-icon{align-items:center;display:flex}crt-entity-hierarchy-filter .nested-node .nested-node-icon .chevron-icon.icon-collapsed{transform:rotate(-90deg)}crt-entity-hierarchy-filter .nested-node .nested-node-icon :hover{cursor:pointer}crt-entity-hierarchy-filter .nested-node .nested-node-caption-container{display:flex}crt-entity-hierarchy-filter .nested-node .nested-node-caption-container .nested-node-caption{align-items:center;display:flex;margin-left:.5rem}crt-entity-hierarchy-filter .navigation-body-wrapper{display:flex;flex-direction:column;min-height:0;min-width:0;flex-grow:1;padding:0 4px}crt-entity-hierarchy-filter .navigation-body-wrapper .navigation-header{display:flex;flex-direction:row;justify-content:space-between;align-items:center;height:2.5rem}crt-entity-hierarchy-filter .navigation-body-wrapper .navigation-divider{margin:0;border-style:none;height:1px}crt-entity-hierarchy-filter .navigation-body-wrapper .navigation-path-caption{height:2.5rem;display:flex;flex-wrap:wrap;align-items:center}crt-entity-hierarchy-filter .crt-hierarchy-progress-bar{position:absolute;bottom:0;width:100%;z-index:10;height:2px;background-repeat:no-repeat;background-image:linear-gradient(90deg,var(--crt-palette-label-50) 0%,var(--crt-palette-navigation-secondary-500) 100%);background-color:var(--crt-palette-label-50);background-size:40% 100%;animation:loader-animation 1.4s infinite}@keyframes loader-animation{0%{background-position-x:-67%}to{background-position-x:167%}}crt-entity-hierarchy-filter[dir=rtl] .tree-node .tree-node-caption{margin-right:1rem;margin-left:0rem}crt-entity-hierarchy-filter[dir=rtl] .tree-node .tree-node-filters{margin-right:auto;margin-left:0}crt-entity-hierarchy-filter[dir=rtl] .crt-hierarchy-progress-bar{background-image:linear-gradient(270deg,var(--crt-palette-label-50) 0%,var(--crt-palette-navigation-secondary-500) 100%);animation-direction:reverse}
`],encapsulation:2,changeDetection:0})}};(0,d.__decorate)([(0,V.k)({reuseStrategy:{resetValue:!0}}),(0,d.__metadata)("design:type",Array),(0,d.__metadata)("design:paramtypes",[Array])],y.prototype,"nodes",null),(0,d.__decorate)([(0,V.k)(),(0,d.__metadata)("design:type",String)],y.prototype,"specificationReferenceColumnName",void 0),(0,d.__decorate)([(0,V.k)(),(0,d.__metadata)("design:type",String)],y.prototype,"specificationEntityName",void 0),(0,d.__decorate)([(0,V.k)(),(0,d.__metadata)("design:type",Array)],y.prototype,"specificationFiltersConfiguration",void 0),(0,d.__decorate)([(0,R.j)(),(0,d.__metadata)("design:type",Object)],y.prototype,"loadSpecificationFilters",void 0),(0,d.__decorate)([(0,R.j)(),(0,d.__metadata)("design:type",Object)],y.prototype,"specificationFilterChange",void 0),(0,d.__decorate)([(0,V.k)(),(0,d.__metadata)("design:type",String),(0,d.__metadata)("design:paramtypes",[String])],y.prototype,"selectedNodeId",null),(0,d.__decorate)([(0,V.k)(),(0,d.__metadata)("design:type",Array),(0,d.__metadata)("design:paramtypes",[Array])],y.prototype,"expandedItems",null),(0,d.__decorate)([(0,V.k)(),(0,d.__metadata)("design:type",String)],y.prototype,"displayMode",void 0),(0,d.__decorate)([(0,R.j)(),(0,d.__metadata)("design:type",Object)],y.prototype,"expandedItemsChange",void 0),(0,d.__decorate)([(0,R.j)(),(0,d.__metadata)("design:type",Object)],y.prototype,"loadNext",void 0),(0,d.__decorate)([(0,R.j)(),(0,d.__metadata)("design:type",Object)],y.prototype,"nodeClick",void 0),(0,d.__decorate)([(0,R.j)(),(0,d.__metadata)("design:type",Object)],y.prototype,"tabIndexChange",void 0),(0,d.__decorate)([(0,V.k)(),(0,d.__metadata)("design:type",Number),(0,d.__metadata)("design:paramtypes",[Number])],y.prototype,"selectedTabIndex",null),y=(0,d.__decorate)([(0,Ge.v)({type:"crt.EntityHierarchyFilter",reuseStrategy:Xe.B.Reuse}),(0,Ue.f)({toolbarConfig:{position:290,icon:s(27778),hint:"Components.EntityHierarchyFilter.Hint"},typeCaption:"Components.EntityHierarchyFilter.Caption",viewElementGroupType:Ze.J.Components,propertiesPanelComponentTypeName:"crt.EntityHierarchyFilterPropertiesPanel",designViewItemCommands:{create:"crt.CreateEntityHierarchyFilterComponentCommand",update:"crt.ChangeFilterViewItemCommand",delete:"crt.RemoveFilterViewItemCommand"}})],y);var pe=s(4164);function me(o){return o=o.split("_").pop(),o=o==="empty"?null:o,o}var Le=s(28399),_;(function(o){o.ManualDisplayMode="manualDisplayMode",o.ByParentDisplayMode="byParentDisplayMode"})(_||(_={}));var De=s(38772),fe=s(56267),$e=s(50237);class Me{constructor(e){this.injector=e,this._queryExecutor=this.injector.get(G.w)}_getLookupData(e){var i=this;return(0,h.A)(function*(){const n=e.schemaName,r=e.columnName,a=e.count,c=yield i.getLookupDataEsq(n,r);a&&(c.rowCount=a,c.rowsOffset=e.offset);const l=new T.X(fe.H.And,n);return e.predefinedFilters&&l.add(T.X.fromJson(e.predefinedFilters,$e.b)),i.addFiltersToQuery(e,c,l),(0,g.firstValueFrom)(i._queryExecutor.executeSelectQuery(c))})()}loadData(e){var i=this;return(0,h.A)(function*(){const n=yield i._getLookupData(e),r="empty",a=e.parentNodes?.map(l=>l.id||r).join("_"),c=n.map(l=>{const p=l.Id||r;return{id:a?`${a}_${p}`:p,caption:i.getItemCaption(l),columnName:e.columnName,filters:null,children:[],isLastLevel:!e.nextLevelColumnName||+l.NextLevelCount==0}}).sort((l,p)=>{const m=l.id.split("_").filter(f=>f===r).length,v=p.id.split("_").filter(f=>f===r).length;return m-v});return c.length===e.count&&(c[c.length-1].isLastItem=!0),c})()}}function A(o,e){const i=new T.X(fe.H.And,o);return e?.forEach(n=>{n.id&&n.id!=="empty"?i.addSchemaColumnFilterWithParameter(E.H.Equal,n.columnName,n.id):i.addSchemaColumnIsNullFilter(n.columnName)}),i}class W extends Me{constructor(e){super(e),this._notFilledCaptionKey="EntityHierarchyFilter.NotFilledNode",this._entitySchemaRepository=this.injector.get(q.v),this._translateService=this.injector.get(N.TranslateService)}getLookupDataEsq(e,i){var n=this;return(0,h.A)(function*(){const r=yield(0,g.firstValueFrom)(n._entitySchemaRepository.getSchemaByName(e));n._referencedColumn=r.columns.find(m=>m.name===i);const a=yield(0,g.firstValueFrom)(n._entitySchemaRepository.getSchemaByName(n._referencedColumn.referenceSchemaName)),c=new $.s(a.name),l=a.getPrimaryDisplayColumn().name,p=a.getPrimaryColumn().name;return c.addSchemaColumn(`${l}`,"Name").withOrdering(de.Z.Asc,0),c.addSchemaColumn(`${p}`,"Id"),c})()}getItemCaption(e){return e.Name||`${this._referencedColumn.caption}: ${this._translateService.instant(this._notFilledCaptionKey)}`}addFiltersToQuery(e,i,n){const r=e.schemaName,a=e.columnName,c=e.nextLevelColumnName;if(n.add(A(r,e.parentNodes)),i.filters.addExistsFilter(`[${r}:${a}:Id].Id`,n),c){const p={filter:A(this._referencedColumn.referenceSchemaName,e.parentNodes.map(m=>({columnName:`[${r}:${c}:Id].${a}`,id:m.id,caption:null})))};i.addAggregationSubQueryColumn(`[${r}:${e.columnName}:Id].${c}.Id`,De.C.Count,p,"NextLevelCount")}}static{this.\u0275fac=function(i){return new(i||W)(t.\u0275\u0275inject(t.Injector))}}static{this.\u0275prov=t.\u0275\u0275defineInjectable({token:W,factory:W.\u0275fac,providedIn:"root"})}}class X extends Me{constructor(e){super(e),this._entitySchemaRepository=this.injector.get(q.v)}getLookupDataEsq(e,i){var n=this;return(0,h.A)(function*(){const r=yield(0,g.firstValueFrom)(n._entitySchemaRepository.getSchemaByName(e)),a=new $.s(e),c=r.getPrimaryDisplayColumn().name,l=r.getPrimaryColumn().name;return a.addSchemaColumn(`${c}`,"Name").withOrdering(de.Z.Asc,0),a.addSchemaColumn(`${l}`,"Id"),a})()}getItemCaption(e){return e.Name}addFiltersToQuery(e,i,n){const r=e.schemaName,a=e.columnName;let c=[...e.parentNodes||[]];c.length?c=[c[c.length-1]]:c=[{id:"empty",caption:null,columnName:a}],n.add(A(r,c)),i.filters.add(n),i.addAggregationFunctionColumn(`[${r}:${a}:Id].Id`,De.C.Count,"NextLevelCount")}static{this.\u0275fac=function(i){return new(i||X)(t.\u0275\u0275inject(t.Injector))}}static{this.\u0275prov=t.\u0275\u0275defineInjectable({token:X,factory:X.\u0275fac,providedIn:"root"})}}function Vt(o,e){switch(e){case _.ByParentDisplayMode:return o.get(X);case _.ManualDisplayMode:return o.get(W)}return o.get(W)}let ue=class{constructor(e,i){this.injector=e,this._entityHierarchyFiltersService=i,this._rowCount=30}_getParentNodes(e,i){const n=[],r=e.id.split("_");return r.map((c,l)=>r[l-1]?r.slice(0,l+1).join("_"):c).forEach(c=>{if(c===b)return;const l=me(c);n.push({id:l,columnName:I(i,c,"id").columnName})}),n}convert([e,i,n],r,a,c,l=_.ManualDisplayMode){var p=this;return(0,h.A)(function*(){if(!a)return[];const m=Vt(p.injector,l);if(!i?.length){const f=p._entityHierarchyFiltersService.createRootNode(),u=e[0];if(!e?.length||!u)return[f];const x=l===_.ByParentDisplayMode?u.columnName:u.children?.[0]?.columnName;return f.children=yield m.loadData({schemaName:a,columnName:u.columnName,nextLevelColumnName:x,predefinedFilters:n,parentNodes:[],count:p._rowCount,offset:0}),[f]}const v=(0,Le.cloneDeep)(yield r[c]);for(const f of i){const u=I(v,f.id,"id"),x=u.id===b||l===_.ByParentDisplayMode?e?.[0]:I(e,u.columnName,"columnName")?.children?.[0],J=x?.columnName;if(!J)continue;const ne=l===_.ByParentDisplayMode?J:x?.children?.[0]?.columnName,Dt=p._getParentNodes(u,v);u.children=u.children||[],u.children?.forEach(Mt=>{Mt.isLastItem=!1});const $t=yield m.loadData({schemaName:a,columnName:x?.columnName,nextLevelColumnName:ne,predefinedFilters:n,parentNodes:Dt,count:p._rowCount,offset:u.children.length});u.children.push(...$t)}return v})()}};ue=(0,d.__decorate)([(0,pe.a)({type:"crt.ToHierarchyNodesConverter"}),(0,d.__metadata)("design:paramtypes",[t.Injector,K])],ue);let he=class{convert([e,i],n,r,a,c=_.ManualDisplayMode){return(0,h.A)(function*(){const l=new T.X(fe.H.And,r);if(e){if(e.id!==b){const p=(0,Le.cloneDeep)(e),m=yield n[a];if(p.id=me(p.id),l.add(A(r,[p])),c===_.ManualDisplayMode){const v=Te(e.id);let f=[],u=m[0];for(const x of v)f.push({id:me(x),columnName:u?.columnName}),u=u.children?.[0];f=f?.filter(x=>x.id!==b),f?.length&&l.add(A(r,f))}}return i&&l.add(i),l}})()}};he=(0,d.__decorate)([(0,pe.a)({type:"crt.ToHierarchyFiltersConverter"})],he);let ye=class{constructor(e){this._queryExecutor=e}_formEsq(e,i,n,r){var a=this;return(0,h.A)(function*(){const c=new $.s(e),l=i[i.length-1];c.addSchemaColumn(l.columnName,"Caption");let p=null;return r===_.ManualDisplayMode?p=A(e,i):r===_.ByParentDisplayMode&&(p=A(e,[{columnName:"Id",id:l.id,caption:null}])),c.filters.add(p),yield(0,g.firstValueFrom)(a._queryExecutor.executeSelectQuery(c))})()}_getNodes(e,i,n,r){return(0,h.A)(function*(){const a=yield e[i],c=n.split("_");let l=a[0];const p=[];return r===_.ManualDisplayMode?c.forEach(m=>{p.push({id:m,columnName:l?.columnName}),l=l?.children?.[0]}):r===_.ByParentDisplayMode&&p.push({id:c[c.length-1],columnName:l?.columnName}),p})()}convert([e,i],n,r,a,c,l=_.ManualDisplayMode){var p=this;return(0,h.A)(function*(){const m=yield n[c];let v=I(m,e,"id");const f=I(m,b,"id");if(!e)return f;if(!v&&e!==b){const u=yield p._getNodes(n,a,e,l);if(u.find(J=>!J.columnName))return f;const x=yield p._formEsq(r,u,i,l);if(!x?.length)return f;v={id:e,columnName:u[u.length-1].columnName,caption:x[0].Caption.displayValue}}return v})()}};ye=(0,d.__decorate)([(0,pe.a)({type:"crt.HierarchyCheckSelectedNodeExistsConverter"}),(0,d.__metadata)("design:paramtypes",[G.w])],ye);var Pe=s(81517),je=s(2828),ee=s(41287),te=s(844);let Re=class extends Pe.S{};Re=(0,d.__decorate)([(0,je.$)({type:"crt.EntityHierarchyFilterNodeChangeRequest"})],Re);let ge=class extends ee.l{handle(e){return(0,h.A)(function*(){const i=e.$context;yield i.set(e.selectedNodeIdProfileAttributeName,e.nodeId),yield i.set(e.specificationFilterAttributeName,null)})()}};ge=(0,d.__decorate)([(0,te.l)({type:"crt.EntityHierarchyFilterNodeChangeHandler",requestType:"crt.EntityHierarchyFilterNodeChangeRequest"})],ge);let Be=class extends Pe.S{};Be=(0,d.__decorate)([(0,je.$)({type:"crt.EntityHierarchyFilterLoadNodeDataRequest"})],Be);let _e=class Z extends ee.l{handle(e){return(0,h.A)(function*(){yield e.$context.set(e.expandedNodesAttributeName,e.nodes)})()}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=t.\u0275\u0275getInheritedFactory(Z)))(n||Z)}})()}static{this.\u0275prov=t.\u0275\u0275defineInjectable({token:Z,factory:Z.\u0275fac,providedIn:"root"})}};_e=(0,d.__decorate)([(0,te.l)({type:"crt.EntityHierarchyFilterLoadNodeDataHandler",requestType:"crt.EntityHierarchyFilterLoadNodeDataRequest"})],_e);class M{constructor(e){this._queryExecutor=e}_loadSpecificationListItems(e){const i=e.filter(r=>r.type===C.List);if(!i?.length)return(0,g.of)(e);const n=new $.s("SpecificationListItem");return n.isDistinct=!0,n.addSchemaColumn("Specification"),n.addSchemaColumn("Name"),n.addSchemaColumn("Id"),n.filters.addSchemaColumnInFilterWithParameters(E.H.Equal,"Specification",i.map(r=>r.specificationId)),this._queryExecutor.executeSelectQuery(n).pipe((0,g.map)(r=>this._mapListItems(r)),(0,g.map)(r=>(e.forEach(a=>{a.type===C.List&&(a.listItems=r.filter(c=>c.specificationId===a.specificationId))}),e)))}_mapListItems(e){return e.map(i=>({id:i.Id,name:i.Name,specificationId:i.Specification.value})).sort((i,n)=>i.name.localeCompare(n.name))}_loadSpecifications(e,i,n){const r=new $.s(e);if(r.isDistinct=!0,r.addSchemaColumn("Specification"),r.addSchemaColumn("Specification.Type"),r.addSchemaColumn("Specification.Name"),r.filters.addSchemaColumnIsNotNullFilter("Specification"),n){const a=T.X.fromJson(n,$e.b);r.filters.addExistsFilter(`${i}.Id`,a)}return this._queryExecutor.executeSelectQuery(r).pipe((0,g.map)(a=>this._mapSpecifications(a)))}_mapSpecifications(e){return e.map(i=>({specificationId:i.Specification.value,type:i["Specification.Type"].value,caption:i["Specification.Name"]})).sort((i,n)=>i.caption.localeCompare(n.caption))}formSpecificationModels(e,i,n){return this._loadSpecifications(e,i,n).pipe((0,g.switchMap)(r=>this._loadSpecificationListItems(r)))}formFilters(e,i,n,r){const a=new T.X;for(const c of i.keys()){const l=e.find(m=>m.specificationId===c),p=new T.X;p.addSchemaColumnFilterWithParameter(E.H.Equal,`[${n}:${r}].Specification`,c),l.type===C.Boolean&&this._addBooleanValueFilter(p,i.get(c),n,r),l.type===C.String&&this._addStringValueFilter(p,i.get(c),n,r),(l.type===C.Decimal||l.type===C.Integer)&&this._addNumericValueFilter(p,i.get(c),n,r,l.type),l.type===C.List&&this._addListValueFilter(p,i.get(c),n,r),a.add(p)}return a}_addListValueFilter(e,i,n,r){i?.length&&e.addSchemaColumnInFilterWithParameters(E.H.Equal,`[${n}:${r}].ListItemValue`,i)}_addNumericValueFilter(e,i,n,r,a){const c=a===C.Decimal?"FloatValue":"IntValue";i?.from!==null&&i?.from!==void 0&&e.addSchemaColumnFilterWithParameter(E.H.Greater_or_equal,`[${n}:${r}].${c}`,i.from),i?.to!==null&&i?.to!==void 0&&e.addSchemaColumnFilterWithParameter(E.H.Less_or_equal,`[${n}:${r}].${c}`,i.to)}_addStringValueFilter(e,i,n,r){e.addSchemaColumnFilterWithParameter(E.H.Contain,`[${n}:${r}].StringValue`,i)}_addBooleanValueFilter(e,i,n,r){e.addSchemaColumnFilterWithParameter(E.H.Equal,`[${n}:${r}].BooleanValue`,i)}static{this.\u0275fac=function(i){return new(i||M)(t.\u0275\u0275inject(G.w))}}static{this.\u0275prov=t.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac})}}let Ce=class ae extends ee.l{constructor(e){super(),this._injector=e,this._specificationService=this._injector.get(M)}handle(e){var i=this;return(0,h.A)(function*(){const n=yield e.$context[e.predefinedFilterAttributeName],r=yield(0,g.lastValueFrom)(i._specificationService.formSpecificationModels(e.specificationEntityName,e.specificationReferenceColumnName,n));yield e.$context.set(e.specificationFiltersConfigurationAttributeName,r)})()}static{this.\u0275fac=function(i){return new(i||ae)(t.\u0275\u0275inject(t.Injector))}}static{this.\u0275prov=t.\u0275\u0275defineInjectable({token:ae,factory:ae.\u0275fac,providedIn:"root"})}};Ce=(0,d.__decorate)([(0,te.l)({type:"crt.EntityHierarchyLoadSpecificationFiltersHandler",requestType:"crt.EntityHierarchyLoadSpecificationFiltersRequest"}),(0,d.__metadata)("design:paramtypes",[t.Injector])],Ce);let ve=class oe extends ee.l{constructor(e){super(),this._injector=e,this._specificationService=this._injector.get(M)}handle(e){var i=this;return(0,h.A)(function*(){const n=e.data,r=i._specificationService.formFilters(n.specificationFiltersConfiguration,n.specificationFiltersValues,n.specificationEntityName,n.specificationReferenceColumnName);yield e.$context.set(e.specificationFilterAttributeName,r)})()}static{this.\u0275fac=function(i){return new(i||oe)(t.\u0275\u0275inject(t.Injector))}}static{this.\u0275prov=t.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac,providedIn:"root"})}};ve=(0,d.__decorate)([(0,te.l)({type:"crt.EntityHierarchyFormSpecificationFiltersHandler",requestType:"crt.EntityHierarchyFormSpecificationFiltersRequest"}),(0,d.__metadata)("design:paramtypes",[t.Injector])],ve);var Ht=s(58957),Tt=s(71281),At=s(74368);function Lt(o){return{specificationFilterAttributeName:`${o}_SpecificationFilters`,filterAttributeName:`${o}_Filters`,selectedNodeAttributeName:`${o}_SelectedNode`,nodesConfigAttributeName:`${o}_NodesConfig`,filterConverter:"crt.ToHierarchyFiltersConverter",nodesAttributeName:`${o}_Nodes`,expandedNodesAttributeName:`${o}_ExpandedNodes`,specificationFiltersConfigurationAttributeName:`${o}_SpecificationFiltersConfiguration`,selectedTabIndexAttributeName:`${o}_SelectedTabInd`,predefinedFilterAttributeName:`${o}_PredefinedFilter`,selectedNodeIdAttributeName:`${o}_SelectedNodeId`,selectedNodeIdProfileAttributeName:`${o}_SelectedNodeId_Profile`}}class U{constructor(e){this.injector=e,this._componentName="crt.EntityHierarchyFilter",this._expandedItemsAttributeNameSuffix="_ExpandedItems",this._selectedNodeIdAttributeNameSuffix="_SelectedNodeId",this._specificationSettings=[],this._metadataSchemaUtils=(0,t.inject)(At.u),this._queryExecutor=e.get(G.w),this._profileAttributeService=e.get(Tt.H),this._entitySchemaRepository=e.get(q.v),this._packageInfoService=e.get(Ht.S)}_getComponents(e){return this._metadataSchemaUtils.getViewConfigInfoByProperty("type",this._componentName,e.viewConfig).map(i=>i.viewConfig)}_getComponentName(e){return e.name.replace(/\./g,"_")}_setExpandedItemsAttrValue(e,i){if(i.expandedItems)return;const n=`${i.name}${this._expandedItemsAttributeNameSuffix}`;this._profileAttributeService.createOrUpdateAttributeWithChangeRequest(e,i,"expandedItems",n)}_setAttributeWithChangeRequestForSelectedNodeId(e,i){this._profileAttributeService.createOrUpdateAttributeWithChangeRequest(e,i,"selectedNodeId")}_getSpecificationSettingsEntity(){const e=new $.s("SpecificationSettings");return e.addSchemaColumn("SpecificationEntityName"),e.addSchemaColumn("EntityName"),(0,g.lastValueFrom)(this._queryExecutor.executeSelectQuery(e))}_setSpecificationEntityName(e){const i=this._specificationSettings.find(n=>n.EntityName===e.schemaName);e.specificationEntityName=i?i.SpecificationEntityName:""}_setSpecificationEntityColumnReferenceName(e){var i=this;return(0,h.A)(function*(){if(!e.specificationEntityName)return;const r=(yield(0,g.lastValueFrom)(i._entitySchemaRepository.getSchemaByName(e.specificationEntityName))).columns.filter(a=>!["ModifiedBy","CreatedBy"].includes(a.name)).find(a=>a.referenceSchemaName===e.schemaName);e.specificationReferenceColumnName=r?.name})()}_setComponentConfigValues(e,i){e.nodeClick={request:"crt.EntityHierarchyFilterNodeChangeRequest",params:{selectedNodeIdProfileAttributeName:i.selectedNodeIdProfileAttributeName,specificationFilterAttributeName:i.specificationFilterAttributeName,nodeId:"@event"}},e.specificationFilterChange={request:"crt.EntityHierarchyFormSpecificationFiltersRequest",params:{selectedNodeAttributeName:i.selectedNodeAttributeName,nodesAttributeName:i.nodesAttributeName,specificationReferenceColumnName:e.specificationReferenceColumnName,specificationFilterAttributeName:i.specificationFilterAttributeName,data:"@event"}},e.loadNext={request:"crt.EntityHierarchyFilterLoadNodeDataRequest",params:{expandedNodesAttributeName:i.expandedNodesAttributeName,nodes:"@event"}},e.nodes||(e.nodes=`$${i.nodesAttributeName}`),e.loadSpecificationFilters={request:"crt.EntityHierarchyLoadSpecificationFiltersRequest",params:{specificationEntityName:"@event",selectedNodeAttributeName:i.selectedNodeAttributeName,nodesAttributeName:i.nodesAttributeName,specificationFiltersConfigurationAttributeName:i.specificationFiltersConfigurationAttributeName,specificationReferenceColumnName:e.specificationReferenceColumnName,predefinedFilterAttributeName:i.predefinedFilterAttributeName}},e.tabIndexChange={request:"crt.ChangeViewModelAttributeValueRequest",params:{attributeName:i.selectedTabIndexAttributeName,attributeValue:"@event"}}}_setComponentAttributes(e,i,n){const r=i.viewModelConfig.attributes;e.displayMode=e.displayMode||_.ManualDisplayMode,r[n.nodesConfigAttributeName]={value:e.nodesConfig},r[n.expandedNodesAttributeName]={value:null},r[n.specificationFilterAttributeName]={value:null},r[n.specificationFiltersConfigurationAttributeName]={value:[]},e.specificationFiltersConfiguration=`$${n.specificationFiltersConfigurationAttributeName}`,r[n.selectedTabIndexAttributeName]={value:0},e.selectedTabIndex=`$${n.selectedTabIndexAttributeName}`,r[n.filterAttributeName]={from:[n.selectedNodeAttributeName,n.specificationFilterAttributeName],converter:`${n.filterConverter} : '${e.schemaName}' : '${n.nodesConfigAttributeName}' : '${e.displayMode}'`,filter:`crt.ToBoolean : $${n.selectedNodeAttributeName}`},r[n.nodesAttributeName]={from:[n.nodesConfigAttributeName,n.expandedNodesAttributeName,n.predefinedFilterAttributeName],converter:`crt.ToHierarchyNodesConverter : '${e.schemaName}' : '${n.nodesAttributeName}' : '${e.displayMode}'`},r[n.selectedNodeAttributeName]={from:[n.selectedNodeIdProfileAttributeName,n.predefinedFilterAttributeName],converter:`crt.HierarchyCheckSelectedNodeExistsConverter : '${e.schemaName}' : '${n.nodesConfigAttributeName}' : '${n.nodesAttributeName}' : '${e.displayMode}'`}}_getComponentAttributeNames(e){const i=this._getComponentName(e);return Lt(i)}_isSpecificationPackageInstalled(){var e=this;return(0,h.A)(function*(){return!!(yield(0,g.lastValueFrom)(e._packageInfoService.getPackagesInfo())).find(n=>n.Name==="CrtSpecification")})()}_loadSpecificationSettings(){var e=this;return(0,h.A)(function*(){if(e._specificationSettings.length||!(yield e._isSpecificationPackageInstalled()))return;const i=yield e._getSpecificationSettingsEntity();e._specificationSettings=i})()}crtOnMetaDataInit(e){var i=this;return(0,h.A)(function*(){const n=e,r=i._getComponents(n);for(const a of r){yield i._loadSpecificationSettings();const c=i._getComponentAttributeNames(a);i._setComponentAttributes(a,n,c),i._setSpecificationEntityName(a),yield i._setSpecificationEntityColumnReferenceName(a),i._setComponentConfigValues(a,c),i._setExpandedItemsAttrValue(n,a),i._setAttributeWithChangeRequestForSelectedNodeId(n,a)}return e})()}static{this.\u0275fac=function(i){return new(i||U)(t.\u0275\u0275inject(t.Injector))}}static{this.\u0275prov=t.\u0275\u0275defineInjectable({token:U,factory:U.\u0275fac})}}class z{constructor(e,i){this.el=e,this.renderer=i,this.isRtl=!1,this.paddingPerLevel=2,this.treeNodeSelector="[data-item-hierarchy-tree-node]"}ngOnInit(){if(!this.el?.nativeElement?.ariaLevel)return;const e=+this.el.nativeElement.ariaLevel;let i=.5;e!==1&&(i=(e-1)*this.paddingPerLevel);const n=`${i}rem`;let r="padding-left";this.isRtl&&(r="padding-right");const a=this.el.nativeElement.querySelector(this.treeNodeSelector);this.renderer.setStyle(a,r,n)}static{this.\u0275fac=function(i){return new(i||z)(t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(t.Renderer2))}}static{this.\u0275dir=t.\u0275\u0275defineDirective({type:z,selectors:[["","crtHierarchyTreeNodePadding",""]],inputs:{isRtl:"isRtl"}})}}class P{static{this.\u0275fac=function(i){return new(i||P)}}static{this.\u0275mod=t.\u0275\u0275defineNgModule({type:P})}static{this.\u0275inj=t.\u0275\u0275defineInjector({})}}(function(){(typeof ngJitMode>"u"||ngJitMode)&&t.\u0275\u0275setNgModuleScope(P,{declarations:[z],exports:[z]})})();var ke=s(40203),Oe=s(7281),Qe=s(57274),Ke=s(93213),We=s(25063);class j{static{this.\u0275fac=function(i){return new(i||j)}}static{this.\u0275mod=t.\u0275\u0275defineNgModule({type:j})}static{this.\u0275inj=t.\u0275\u0275defineInjector({providers:[M],imports:[S.CommonModule,ke.D,Oe.L,Qe.u,Ke.$,We.D,N.TranslateModule]})}}(function(){(typeof ngJitMode>"u"||ngJitMode)&&t.\u0275\u0275setNgModuleScope(j,{declarations:[D,k,H,O,Q,L],imports:[S.CommonModule,ke.D,Oe.L,Qe.u,Ke.$,We.D,N.TranslateModule],exports:[D]})})();let ie=class xe{constructor(e){this._materialIconsRegistrar=e,this._materialIconsRegistrar.addIcons([{name:"hierarchy-chevron-down",icon:s(70674)},{name:"tree-skeleton",icon:s(49430)},{name:"filter",icon:s(7716)}])}static{this.\u0275fac=function(i){return new(i||xe)(t.\u0275\u0275inject(Se.K))}}static{this.\u0275mod=t.\u0275\u0275defineNgModule({type:xe})}static{this.\u0275inj=t.\u0275\u0275defineInjector({providers:[K,{provide:Je.m,useClass:U,multi:!0}],imports:[S.CommonModule,Ve.c,ce.MatIconModule,Fe.q,P,j,Ie.F,Ee.q,be.S,we.x,N.TranslateModule]})}};ie=(0,d.__decorate)([(0,ze.g)({viewElements:[y],converters:[ue,he,ye],requestHandlers:[ge,_e,Ce,ve]}),(0,d.__metadata)("design:paramtypes",[Se.K])],ie),function(){(typeof ngJitMode>"u"||ngJitMode)&&t.\u0275\u0275setNgModuleScope(ie,{declarations:[y],imports:[S.CommonModule,Ve.c,ce.MatIconModule,Fe.q,P,j,Ie.F,Ee.q,be.S,we.x,N.TranslateModule],exports:[y]})}()},70674:w=>{w.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M3.27572 5.27844C3.64335 4.90719 4.2394 4.90719 4.60703 5.27844L8 8.70489L11.393 5.27844C11.7606 4.90719 12.3566 4.90719 12.7243 5.27844C13.0919 5.6497 13.0919 6.25163 12.7243 6.62289L8.66565 10.7216C8.29802 11.0928 7.70198 11.0928 7.33435 10.7216L3.27572 6.62289C2.90809 6.25163 2.90809 5.6497 3.27572 5.27844Z" fill="currentColor"/>
</svg>
`},27778:w=>{w.exports=`<svg width="72" height="64" viewBox="0 0 72 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="16" y="17" width="2" height="39" rx="1" fill="#D1D1D1"/>
<rect x="34.752" y="31" width="2" height="25" rx="1" fill="#D1D1D1"/>
<rect x="17" y="24" width="2" height="9" rx="1" transform="rotate(-90 17 24)" fill="#D1D1D1"/>
<rect x="35.752" y="41" width="2" height="9" rx="1" transform="rotate(-90 35.752 41)" fill="#D1D1D1"/>
<rect x="34.752" y="56" width="2" height="10" rx="1" transform="rotate(-90 34.752 56)" fill="#D1D1D1"/>
<rect x="9" y="3" width="16" height="12" rx="3" fill="#40ACF0"/>
<rect x="28" y="17" width="16" height="12" rx="3" fill="#004FD6"/>
<rect x="46.752" y="33" width="16" height="12" rx="3" fill="#004FD6"/>
<rect x="46.752" y="49" width="16" height="12" rx="3" fill="#004FD6"/>
</svg>
`},7716:w=>{w.exports=`<svg width="12" height="10" viewBox="0 0 12 10" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4.66667 9C4.66667 9.55229 5.11438 10 5.66667 10H6.33333C6.88562 10 7.33333 9.55229 7.33333 9C7.33333 8.44771 6.88562 8 6.33333 8H5.66667C5.11438 8 4.66667 8.44771 4.66667 9ZM1 0C0.447715 0 0 0.447715 0 1C0 1.55228 0.447715 2 1 2L11 2C11.5523 2 12 1.55228 12 1C12 0.447715 11.5523 0 11 0L1 0ZM2 5C2 5.55228 2.44772 6 3 6L9 6C9.55229 6 10 5.55228 10 5C10 4.44772 9.55229 4 9 4L3 4C2.44772 4 2 4.44772 2 5Z" fill="currentColor"/>
</svg>
`},49430:w=>{w.exports=`<svg
	xmlns="http://www.w3.org/2000/svg" fill="none">
	<rect x="12" y="12" width="16" height="16" rx="8" fill="#E7E7E7"/>
	<rect x="36" y="12" width="45%" height="16" rx="8" fill="#E7E7E7"/>
	<rect x="12" y="52" width="16" height="16" rx="8" fill="#E7E7E7"/>
	<rect x="36" y="52" width="20%" height="16" rx="8" fill="#E7E7E7"/>
	<rect width="100%" height="40" transform="translate(0 80)" fill="#E7ECFA"/>
	<rect x="12" y="92" width="16" height="16" rx="8" fill="white"/>
	<rect x="36" y="92" width="75%" height="16" rx="8" fill="white"/>
	<rect x="16" y="132" width="16" height="16" rx="8" fill="#E7E7E7"/>
	<rect x="40" y="132" width="70%" height="16" rx="8" fill="#E7E7E7"/>
	<rect x="36" y="172" width="16" height="16" rx="8" fill="#E7E7E7"/>
	<rect x="60" y="172" width="45%" height="16" rx="8" fill="#E7E7E7"/>
	<rect x="12" y="212" width="16" height="16" rx="8" fill="#E7E7E7"/>
	<rect x="36" y="212" width="70%" height="16" rx="8" fill="#E7E7E7"/>
	<rect x="12" y="252" width="16" height="16" rx="8" fill="#E7E7E7"/>
	<rect x="36" y="252" width="15%" height="16" rx="8" fill="#E7E7E7"/>
</svg>`}}]);
