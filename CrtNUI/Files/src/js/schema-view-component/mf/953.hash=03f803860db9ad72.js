(self.webpackChunkapp_studio_enterprise_schema_view=self.webpackChunkapp_studio_enterprise_schema_view||[]).push([[953],{15509:(w,g,i)=>{i.d(g,{e:()=>a});var m=i(37845),y=i.n(m),I=i(31843),E=i.n(I),d=i(31575),r=i(59131),h=i.n(r);class a extends I.MatTree{constructor(){super(...arguments),this._nodeOutlet=null}static{this.\u0275fac=(()=>{let O;return function(f){return(O||(O=r.\u0275\u0275getInheritedFactory(a)))(f||a)}})()}static{this.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["crt-tree-view"]],viewQuery:function(u,f){if(u&1&&r.\u0275\u0275viewQuery(d.P,7),u&2){let C;r.\u0275\u0275queryRefresh(C=r.\u0275\u0275loadQuery())&&(f._nodeOutlet=C.first)}},hostAttrs:["role","tree",1,"mat-tree","crt-tree-view"],exportAs:["crtTreeView"],features:[r.\u0275\u0275ProvidersFeature([{provide:m.CdkTree,useExisting:a}]),r.\u0275\u0275InheritDefinitionFeature],decls:1,vars:0,consts:[["crtTreeViewNodeOutlet",""]],template:function(u,f){u&1&&r.\u0275\u0275elementContainer(0,0)},dependencies:[d.P],styles:[`.crt-tree-view{display:block}.crt-tree-view-node{display:flex;align-items:center;flex:1;word-wrap:break-word}.crt-nested-tree-view-node{border-bottom-width:0}
`],encapsulation:2})}}},7069:(w,g,i)=>{i.d(g,{G:()=>h});var m=i(37845),y=i.n(m),I=i(31843),E=i.n(I),d=i(59131),r=i.n(d);class h extends I.MatTreeNodeDef{static{this.\u0275fac=(()=>{let v;return function(u){return(v||(v=d.\u0275\u0275getInheritedFactory(h)))(u||h)}})()}static{this.\u0275dir=d.\u0275\u0275defineDirective({type:h,selectors:[["","crtTreeNodeDef",""]],inputs:{when:[d.\u0275\u0275InputFlags.None,"crtTreeNodeDefWhen","when"],data:[d.\u0275\u0275InputFlags.None,"crtTreeNode","data"]},features:[d.\u0275\u0275ProvidersFeature([{provide:m.CdkTreeNodeDef,useExisting:h}]),d.\u0275\u0275InheritDefinitionFeature]})}}},31575:(w,g,i)=>{i.d(g,{P:()=>h});var m=i(37845),y=i.n(m),I=i(31843),E=i.n(I),d=i(59131),r=i.n(d);class h extends I.MatTreeNodeOutlet{static{this.\u0275fac=(()=>{let v;return function(u){return(v||(v=d.\u0275\u0275getInheritedFactory(h)))(u||h)}})()}static{this.\u0275dir=d.\u0275\u0275defineDirective({type:h,selectors:[["","crtTreeViewNodeOutlet",""]],features:[d.\u0275\u0275ProvidersFeature([{provide:m.CdkTreeNodeOutlet,useExisting:h}]),d.\u0275\u0275InheritDefinitionFeature]})}}},96806:(w,g,i)=>{i.d(g,{u:()=>h});var m=i(37845),y=i.n(m),I=i(31843),E=i.n(I),d=i(59131),r=i.n(d);class h extends I.MatTreeNodeToggle{static{this.\u0275fac=(()=>{let v;return function(u){return(v||(v=d.\u0275\u0275getInheritedFactory(h)))(u||h)}})()}static{this.\u0275dir=d.\u0275\u0275defineDirective({type:h,selectors:[["","crtTreeNodeToggle",""]],inputs:{recursive:[d.\u0275\u0275InputFlags.None,"crtTreeNodeToggleRecursive","recursive"]},features:[d.\u0275\u0275ProvidersFeature([{provide:m.CdkTreeNodeToggle,useExisting:h}]),d.\u0275\u0275InheritDefinitionFeature]})}}},16027:(w,g,i)=>{i.d(g,{G:()=>h});var m=i(37845),y=i.n(m),I=i(31843),E=i.n(I),d=i(59131),r=i.n(d);class h extends I.MatTreeNode{static{this.\u0275fac=(()=>{let v;return function(u){return(v||(v=d.\u0275\u0275getInheritedFactory(h)))(u||h)}})()}static{this.\u0275dir=d.\u0275\u0275defineDirective({type:h,selectors:[["crt-tree-view-node"]],hostAttrs:[1,"crt-tree-view-node","mat-tree-node"],exportAs:["crtTreeNode"],features:[d.\u0275\u0275ProvidersFeature([{provide:m.CdkTreeNode,useExisting:h}]),d.\u0275\u0275InheritDefinitionFeature]})}}},91244:(w,g,i)=>{i.d(g,{o:()=>o});var m=i(73308),y=i(13053),I=i.n(y),E=i(62225),d=i.n(E),r=i(37845),h=i.n(r),a=i(59131),v=i.n(a),O=i(73723),u=i(28399),f=i.n(u),C=i(62278),b=i.n(C),p=i(89422),R=i.n(p),N=i(56055),D=i(58917),F=i(46558),A=i(40297),K=i.n(A),B=i(59922),S=i(15509),W=i(16027),P=i(96806),M=i(7069),L=i(52989),k=i.n(L);const x=c=>({node:c});function T(c,t){if(c&1){const n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"mat-icon",7),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(n);const _=a.\u0275\u0275nextContext().$implicit,V=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(V.onToggleNodeClick(_))}),a.\u0275\u0275elementEnd()}if(c&2){const n=a.\u0275\u0275nextContext().$implicit,l=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("svgIcon",l.treeControl.isExpanded(n)?"tree-arrow-down":"tree-arrow-right")}}function e(c,t){if(c&1&&(a.\u0275\u0275elementStart(0,"crt-tree-view-node",4),a.\u0275\u0275template(1,T,1,1,"mat-icon",5),a.\u0275\u0275elementContainer(2,6),a.\u0275\u0275elementEnd()),c&2){const n=t.$implicit,l=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("item",n==null?null:n.item)("ngClass",l.getNodeClasses(n)),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",l.hasChildren(n)),a.\u0275\u0275advance(),a.\u0275\u0275property("ngTemplateOutlet",l.nodeOutlet)("ngTemplateOutletContext",a.\u0275\u0275pureFunction1(5,x,n==null?null:n.item))}}function s(c,t){if(c&1&&(a.\u0275\u0275elementStart(0,"crt-tree-view",2),a.\u0275\u0275template(1,e,3,7,"crt-tree-view-node",3),a.\u0275\u0275elementEnd()),c&2){const n=a.\u0275\u0275nextContext();a.\u0275\u0275property("dataSource",n.treeDataSource)("treeControl",n.treeControl)("trackBy",n.treeNodeTracker)}}class o{constructor(){this._changeDetectorRef=(0,a.inject)(a.ChangeDetectorRef),this._directionality=(0,a.inject)(y.Directionality),this._allNodes$=new C.BehaviorSubject([]),this._expandedItems=[],this._itemsSubscription=new C.Subscription,this._updateItemsDebounce=(0,u.debounce)(t=>this._updateItems(t),0),this.processOnTreeViewItemActionFn=this._processOnTreeViewItemAction.bind(this),this.isStrictCheckTreeElementInViewportFn=this._isStrictCheckTreeElementInViewport.bind(this),this.getFocusTreeElementFn=this._getFocusTreeElement.bind(this),this.getFocusTreeActionFn=this._getFocusTreeAction.bind(this),this.treeControl=new r.FlatTreeControl(t=>t.level,t=>t.expandable),this.treeDataSource=new E.ArrayDataSource([]),this.itemKeyPropertyName="Id",this.itemLevelPropertyName="Level",this.itemExpandablePropertyName="Expandable",this.itemParentKeyPropertyName="ParentId",this.isLastItemPropertyName="IsLastItem",this.itemHeight=40,this.minVisibleItemsCount=5,this.loading=!1,this.viewItems=new a.QueryList,this.selectedItemKeyChange=new a.EventEmitter,this.nodeExpanded=new a.EventEmitter,this.expandedItemsChanged=new a.EventEmitter,this.paginationChange=new a.EventEmitter,this.setupLastItemFn=null,this.hasChildren=t=>t.expandable}set items(t){t instanceof O.A&&(this._itemsSubscription.unsubscribe(),this._itemsSubscription=new C.Subscription,this._itemsSubscription.add(t.changed.subscribe(()=>this._updateItemsDebounce(t)))),this._updateItemsDebounce([...t])}get allItems(){return this._allNodes$?.value}set expandedItems(t){Array.isArray(t)&&this._hasExpandedItemsChanges(t)&&this._initExpandedItems(t)}set visibleItems(t){this._visibleItems=t}get visibleItems(){return this._visibleItems}_processOnTreeViewItemAction(t,n,l,_){if(this.processOnViewItemActionFn){this.processOnViewItemActionFn(t,n,l,()=>this._baseProcessOnTreeViewItemAction(t,n,l,_));return}this._baseProcessOnTreeViewItemAction(t,n,l,_)}_baseProcessOnTreeViewItemAction(t,n,l,_){if(t==="viewItemElementKeyDown"&&this._isToggleKey(l)){this._getToggleKeydownFn(l.key)(n);return}_()}_isStrictCheckTreeElementInViewport(t){return this.isStrictCheckElementInViewportFn?this.isStrictCheckElementInViewportFn(t):t()}_getFocusTreeElement(t,n,l){return this.getFocusElementFn?this.getFocusElementFn(t,n,l):l()}_getFocusTreeAction(t,n,l){return this.getFocusActionFn?this.getFocusActionFn(t,n,l):l}_hasExpandedItemsChanges(t){return(0,u.difference)(t,this._expandedItems).length>0||(0,u.difference)(this._expandedItems,t).length>0}_initExpandedItems(t){this._expandedItems=[...t],this._allNodes$?.value?.forEach(n=>{this.treeControl.collapse(n),this._updateNodesVisibility(n)}),this._processExpandedItems(),this._updateVisibleNodes()}_updateItems(t){var n=this;Promise.all((t??[]).map(function(){var l=(0,m.A)(function*(_){return{key:_[n.itemKeyPropertyName]instanceof Promise?yield _[n.itemKeyPropertyName]:_[n.itemKeyPropertyName],expandable:_[n.itemExpandablePropertyName]instanceof Promise?yield _[n.itemExpandablePropertyName]:_[n.itemExpandablePropertyName],level:_[n.itemLevelPropertyName]instanceof Promise?yield _[n.itemLevelPropertyName]:_[n.itemLevelPropertyName],parentKey:_[n.itemParentKeyPropertyName]instanceof Promise?yield _[n.itemParentKeyPropertyName]:_[n.itemParentKeyPropertyName],isLastItem:_[n.isLastItemPropertyName]instanceof Promise?yield _[n.isLastItemPropertyName]:_[n.isLastItemPropertyName],item:_}});return function(_){return l.apply(this,arguments)}}())).then(l=>{this._setupAllNodes(l),this._processExpandedItems(),this._updateVisibleNodes(),this._detectChanges()})}_setupAllNodes(t){if(this._lastExpandedItem){this._loadExpandedItems(t),this._lastExpandedItem=null;return}this._mergeNodeProperties(t),this._allNodes$.next(t),this.allItems.filter(n=>n.expandable).forEach(n=>{this._updateNodesVisibility(n)})}_loadExpandedItems(t){const n=t.filter(_=>_.parentKey===this._lastExpandedItem);n.forEach(_=>_.hidden=!1);const l=this.allItems.findIndex(_=>_.key===this._lastExpandedItem);this.allItems.splice(l+1,0,...n)}_mergeNodeProperties(t){this.allItems?.forEach(n=>{const l=t.find(_=>_.key===n.key);l&&(l.hidden=n.hidden)})}_processExpandedItems(){this._expandedItems?.forEach(t=>{const n=this.allItems.find(l=>l.key===t);n&&n.expandable&&(this.treeControl.expand(n),this._getChildren(n.key,!0).length?n.hidden||this._updateNodesVisibility(n):this.nodeExpanded.emit(n.item))})}_detectChanges(){this._changeDetectorRef.detectChanges()}_updateVisibleNodes(){this.visibleItems=this.allItems.filter(t=>!t.hidden).map(t=>t.item)}_updateNodesVisibility(t){const n=this.treeControl.isExpanded(t);this._getChildren(t.key,!1,n).forEach(_=>_.hidden=!n)}_getChildren(t,n=!1,l=!1,_=[]){const V=this.allItems.filter(U=>U.parentKey===t);return _.push(...V),n||V.forEach(U=>{(!l||this.treeControl.isExpanded(U))&&this._getChildren(U.key,n,l,_)}),_}_updateExpandedItems(t){const n=t.key;if(this._expandedItems=this._expandedItems||[],this.treeControl.isExpanded(t))this._expandedItems.find(l=>l===n)||this._expandedItems.push(n);else{const l=this._expandedItems.indexOf(n);l>-1&&this._expandedItems.splice(l,1)}}_isToggleKey(t){return t?t.key===p.Key.ArrowLeft||t.key===p.Key.ArrowRight:!1}_getToggleKeydownFn(t){return this._isRtl()?t===p.Key.ArrowLeft?this.expandNode.bind(this):this.collapseNode.bind(this):t===p.Key.ArrowLeft?this.collapseNode.bind(this):this.expandNode.bind(this)}_isRtl(){return this._directionality.value==="rtl"}_processToggleNode(t,n){const l=this.allItems.find(_=>_.key===t);!l.expandable||this.treeControl.isExpanded(l)===(n==="expand")||(this.treeControl[n](l),this.onToggleNodeClick(l))}_isChildOfNode(t,n){const l=this.allItems.find(_=>_.key===n);return l?l.parentKey===t?!0:this._isChildOfNode(t,l.parentKey):!1}_baseProcessOnToggleNodeClick(t){this._updateNodesVisibility(t),this._updateVisibleNodes(),this._updateExpandedItems(t),this.treeControl.isExpanded(t)&&!this._getChildren(t.key,!0).length&&(this._lastExpandedItem=t.key,this.nodeExpanded.emit(t.item)),this._handleSelectedNodeChangeOnNodeToggle(t),this.expandedItemsChanged.emit(this._expandedItems),this._detectChanges()}_handleSelectedNodeChangeOnNodeToggle(t){if(this.onToggleNodeSelectedItemChangeFn){this.onToggleNodeSelectedItemChangeFn(this.treeControl.isExpanded(t)?"viewTreeItemElementExpand":"viewTreeItemElementCollapse",t.key);return}this.treeControl.isExpanded(t)||!this.selectedItemKey||this._isChildOfNode(t.key,this.selectedItemKey)&&(this.selectedItemKey=t.key,this.selectedItemKeyChange.emit(t.key))}treeNodeTracker(t,n){return this.treeNodeTrackerFn?this.treeNodeTrackerFn(t,n):{key:n.key,parentKey:n.parentKey,level:n.level,expandable:n.expandable,hidden:n.hidden}}ngAfterViewInit(){this.treeDataSource=new E.ArrayDataSource(this.virtualScrollViewport?.visibleVirtualItems?.asObservable().pipe((0,C.map)(t=>t.map(n=>this.allItems.find(l=>l.key===n.key)))))}ngOnDestroy(){this._itemsSubscription.unsubscribe()}onSelectedItemKeyChange(t){this.selectedItemKeyChange.emit(t)}onToggleNodeClick(t){if(this.processOnViewItemActionFn){this.processOnViewItemActionFn(this.treeControl.isExpanded(t)?"viewTreeItemElementExpand":"viewTreeItemElementCollapse",t.key,null,()=>this._baseProcessOnToggleNodeClick(t));return}this._baseProcessOnToggleNodeClick(t)}onPaginationChange(t){const n=t?.lastItemsKeys?.map(l=>this.allItems.find(_=>_.key===l)?.parentKey)||[];this.paginationChange.emit({type:t.type,parentKeys:n})}expandNode(t){this._processToggleNode(t,"expand")}collapseNode(t){this._processToggleNode(t,"collapse")}expandAll(){this.allItems.forEach(t=>{this._getChildren(t.key,!0).length&&(this.treeControl.expand(t),this._updateExpandedItems(t),this._updateNodesVisibility(t))}),this.expandedItemsChanged.emit(this._expandedItems),this._updateVisibleNodes(),this._detectChanges()}getNodeClasses(t){const n=[];return t?.level===0&&n.push("root-level-node"),this.hasChildren(t)?n.push("parent-node"):n.push("child-node"),n.push("dynamic-"+t?.level+"-level-node"),n}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:o,selectors:[["crt-virtual-scroll-tree-view"]],contentQueries:function(n,l,_){if(n&1&&a.\u0275\u0275contentQuery(_,F.c,5,a.TemplateRef),n&2){let V;a.\u0275\u0275queryRefresh(V=a.\u0275\u0275loadQuery())&&(l.nodeOutlet=V.first)}},viewQuery:function(n,l){if(n&1&&(a.\u0275\u0275viewQuery(N.l,5),a.\u0275\u0275viewQuery(D.r,5,D.r)),n&2){let _;a.\u0275\u0275queryRefresh(_=a.\u0275\u0275loadQuery())&&(l.virtualScrollViewport=_.first),a.\u0275\u0275queryRefresh(_=a.\u0275\u0275loadQuery())&&(l.viewItems=_)}},inputs:{itemKeyPropertyName:"itemKeyPropertyName",itemLevelPropertyName:"itemLevelPropertyName",itemExpandablePropertyName:"itemExpandablePropertyName",itemParentKeyPropertyName:"itemParentKeyPropertyName",isLastItemPropertyName:"isLastItemPropertyName",selectedItemKey:"selectedItemKey",focusedItemKey:"focusedItemKey",itemHeight:"itemHeight",minVisibleItemsCount:"minVisibleItemsCount",loading:"loading",items:"items",expandedItems:"expandedItems",processOnViewItemActionFn:"processOnViewItemActionFn",onToggleNodeSelectedItemChangeFn:"onToggleNodeSelectedItemChangeFn",isStrictCheckElementInViewportFn:"isStrictCheckElementInViewportFn",getFocusElementFn:"getFocusElementFn",getFocusActionFn:"getFocusActionFn",setupLastItemFn:"setupLastItemFn",treeNodeTrackerFn:"treeNodeTrackerFn"},outputs:{selectedItemKeyChange:"selectedItemKeyChange",nodeExpanded:"nodeExpanded",expandedItemsChanged:"expandedItemsChanged",paginationChange:"paginationChange"},decls:2,vars:13,consts:[[3,"selectedItemKeyChange","paginationChange","items","itemKeyPropertyName","loading","itemHeight","focusedItemKey","selectedItemKey","minVisibleItemsCount","viewItems","processOnViewItemActionFn","getFocusElementFn","getFocusActionFn","isStrictCheckElementInViewportFn","setupLastItemFn"],["crtVirtualScrollViewOutlet",""],[3,"dataSource","treeControl","trackBy"],["crtVirtualScrollViewItem","","tabIndex","0",3,"item","ngClass",4,"crtTreeNodeDef"],["crtVirtualScrollViewItem","","tabIndex","0",3,"item","ngClass"],["crtTreeNodeToggle","","class","material-icons mat-icon-rtl-mirror node-toggle-icon",3,"svgIcon","click",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["crtTreeNodeToggle","",1,"material-icons","mat-icon-rtl-mirror","node-toggle-icon",3,"click","svgIcon"]],template:function(n,l){n&1&&(a.\u0275\u0275elementStart(0,"crt-virtual-scroll-viewport",0),a.\u0275\u0275listener("selectedItemKeyChange",function(V){return l.onSelectedItemKeyChange(V)})("paginationChange",function(V){return l.onPaginationChange(V)}),a.\u0275\u0275template(1,s,2,3,"ng-template",1),a.\u0275\u0275elementEnd()),n&2&&a.\u0275\u0275property("items",l.visibleItems)("itemKeyPropertyName",l.itemKeyPropertyName)("loading",l.loading)("itemHeight",l.itemHeight)("focusedItemKey",l.focusedItemKey)("selectedItemKey",l.selectedItemKey)("minVisibleItemsCount",l.minVisibleItemsCount)("viewItems",l.viewItems)("processOnViewItemActionFn",l.processOnTreeViewItemActionFn)("getFocusElementFn",l.getFocusTreeElementFn)("getFocusActionFn",l.getFocusTreeActionFn)("isStrictCheckElementInViewportFn",l.isStrictCheckTreeElementInViewportFn)("setupLastItemFn",l.setupLastItemFn)},dependencies:[A.NgClass,A.NgIf,A.NgTemplateOutlet,N.l,D.r,B.p,S.e,W.G,P.u,M.G,L.MatIcon],styles:["crt-tree-view[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;min-width:100%;--node-height: 40px;--node-gap: .5rem;--node-padding: 2rem;--root-node-padding: var(--node-padding);--node-level: 0}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node[_ngcontent-%COMP%]{padding-inline-start:calc(var(--root-node-padding) + var(--node-padding) * var(--node-level));display:flex;gap:var(--node-gap);min-height:var(--node-height);white-space:nowrap;outline:none}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node[_ngcontent-%COMP%]   .mat-icon.node-toggle-icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:16px;line-height:16px;cursor:pointer}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.root-level-node.child-node[_ngcontent-%COMP%]   .prefix-node[_ngcontent-%COMP%]{margin-inline-start:0}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-1-level-node[_ngcontent-%COMP%]{--node-level: 1}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-2-level-node[_ngcontent-%COMP%]{--node-level: 2}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-3-level-node[_ngcontent-%COMP%]{--node-level: 3}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-4-level-node[_ngcontent-%COMP%]{--node-level: 4}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-5-level-node[_ngcontent-%COMP%]{--node-level: 5}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-6-level-node[_ngcontent-%COMP%]{--node-level: 6}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-7-level-node[_ngcontent-%COMP%]{--node-level: 7}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-8-level-node[_ngcontent-%COMP%]{--node-level: 8}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-9-level-node[_ngcontent-%COMP%]{--node-level: 9}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-10-level-node[_ngcontent-%COMP%]{--node-level: 10}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-11-level-node[_ngcontent-%COMP%]{--node-level: 11}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-12-level-node[_ngcontent-%COMP%]{--node-level: 12}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-13-level-node[_ngcontent-%COMP%]{--node-level: 13}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-14-level-node[_ngcontent-%COMP%]{--node-level: 14}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-15-level-node[_ngcontent-%COMP%]{--node-level: 15}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-16-level-node[_ngcontent-%COMP%]{--node-level: 16}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-17-level-node[_ngcontent-%COMP%]{--node-level: 17}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-18-level-node[_ngcontent-%COMP%]{--node-level: 18}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-19-level-node[_ngcontent-%COMP%]{--node-level: 19}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-20-level-node[_ngcontent-%COMP%]{--node-level: 20}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-21-level-node[_ngcontent-%COMP%]{--node-level: 21}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-22-level-node[_ngcontent-%COMP%]{--node-level: 22}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-23-level-node[_ngcontent-%COMP%]{--node-level: 23}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-24-level-node[_ngcontent-%COMP%]{--node-level: 24}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-25-level-node[_ngcontent-%COMP%]{--node-level: 25}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-26-level-node[_ngcontent-%COMP%]{--node-level: 26}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-27-level-node[_ngcontent-%COMP%]{--node-level: 27}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-28-level-node[_ngcontent-%COMP%]{--node-level: 28}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-29-level-node[_ngcontent-%COMP%]{--node-level: 29}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.dynamic-30-level-node[_ngcontent-%COMP%]{--node-level: 30}crt-tree-view[_ngcontent-%COMP%]   .crt-tree-view-node.child-node[_ngcontent-%COMP%]   .prefix-node[_ngcontent-%COMP%]{margin-inline-start:16px}"],changeDetection:0})}}},46558:(w,g,i)=>{i.d(g,{c:()=>I});var m=i(59131),y=i.n(m);class I{static{this.\u0275fac=function(r){return new(r||I)}}static{this.\u0275dir=m.\u0275\u0275defineDirective({type:I,selectors:[["","crtVirtualScrollTreeViewItemOutlet",""]],inputs:{node:"node"}})}}},80953:(w,g,i)=>{i.d(g,{x:()=>S});var m=i(40297),y=i(52989),I=i(91244),E=i(46558),d=i(15509),r=i(16027),h=i(31575),a=i(96806),v=i(37845),O=i(31843),u=i(59131);class f extends O.MatNestedTreeNode{static{this.\u0275fac=(()=>{let P;return function(L){return(P||(P=u.\u0275\u0275getInheritedFactory(f)))(L||f)}})()}static{this.\u0275dir=u.\u0275\u0275defineDirective({type:f,selectors:[["crt-nested-tree-view-node"]],hostAttrs:[1,"crt-nested-tree-view-node","mat-nested-tree-node"],inputs:{node:[u.\u0275\u0275InputFlags.None,"crtNestedTreeNode","node"]},exportAs:["crtNestedTreeNode"],features:[u.\u0275\u0275ProvidersFeature([{provide:v.CdkNestedTreeNode,useExisting:f},{provide:v.CdkTreeNode,useExisting:f},{provide:v.CDK_TREE_NODE_OUTLET_NODE,useExisting:f}]),u.\u0275\u0275InheritDefinitionFeature]})}}var C=i(7069);class b{static{this.\u0275fac=function(M){return new(M||b)}}static{this.\u0275mod=u.\u0275\u0275defineNgModule({type:b})}static{this.\u0275inj=u.\u0275\u0275defineInjector({})}}(function(){(typeof ngJitMode>"u"||ngJitMode)&&u.\u0275\u0275setNgModuleScope(b,{declarations:[d.e,r.G,h.P,a.u,f,C.G],exports:[d.e,r.G,h.P,a.u,f,C.G]})})();var p=i(84177),R=i(79877),N=i(48067),D=i(56055),F=i(58917),A=i(59922);class K{static{this.\u0275fac=function(M){return new(M||K)}}static{this.\u0275mod=u.\u0275\u0275defineNgModule({type:K})}static{this.\u0275inj=u.\u0275\u0275defineInjector({imports:[m.CommonModule,p.CdkVirtualScrollViewport,R.R,p.ScrollingModule]})}}(function(){(typeof ngJitMode>"u"||ngJitMode)&&u.\u0275\u0275setNgModuleScope(K,{declarations:[D.l,F.r,A.p],imports:[m.CommonModule,p.CdkVirtualScrollViewport,p.CdkFixedSizeVirtualScroll,N.C,R.R,p.ScrollingModule],exports:[D.l,F.r,A.p]})})();var B=i(50663);class S{constructor(P){this._materialIconsRegistrator=P,this._materialIconsRegistrator.addIcons([{name:"tree-arrow-down",icon:i(16227)},{name:"tree-arrow-right",icon:i(75035)}])}static{this.\u0275fac=function(M){return new(M||S)(u.\u0275\u0275inject(B.K))}}static{this.\u0275mod=u.\u0275\u0275defineNgModule({type:S})}static{this.\u0275inj=u.\u0275\u0275defineInjector({imports:[m.CommonModule,K,b,y.MatIconModule]})}}(function(){(typeof ngJitMode>"u"||ngJitMode)&&u.\u0275\u0275setNgModuleScope(S,{declarations:[I.o,E.c],imports:[m.CommonModule,K,b,y.MatIconModule],exports:[I.o,E.c]})})()},56055:(w,g,i)=>{i.d(g,{l:()=>x});var m=i(73308),y=i(18081),I=i.n(y),E=i(84177),d=i.n(E),r=i(59131),h=i.n(r),a=i(73723),v=i(28399),O=i.n(v),u=i(62278),f=i.n(u),C=i(36486),b=i.n(C),p=i(89422),R=i.n(p),N=i(59922),D=i(58917),F=i(40297),A=i.n(F),K=i(48067),B=i(82491);const S=["virtualScrollViewport"],W=["virtualFocusItem"],P=T=>({"crt-virtual-scroll-viewport":!0,"crt-virtual-scroll-viewport-hidden":T}),M=T=>({visibleItems:T});function L(T,e){T&1&&r.\u0275\u0275element(0,"ts-mask",10)}function k(T,e){T&1&&r.\u0275\u0275elementContainer(0)}class x{constructor(){this._changeDetectorRef=(0,r.inject)(r.ChangeDetectorRef),this._renderer=(0,r.inject)(r.Renderer2),this._platform=(0,r.inject)(y.Platform),this._resetFocusStateDebounceTime=50,this._scrollToViewItemElementByItemKeyDebounceTime=10,this._setFocusedItemDebounceTime=10,this._processSetFocusOnNewItemByPositionDebounceTime=10,this._processSetFocusOnNewItemByPositionDebounceTimeForSafari=50,this._virtualScrollItemsBufferSize=5,this._items$=new u.BehaviorSubject([]),this._visibleVirtualItems=new u.BehaviorSubject([]),this._loading$=new u.BehaviorSubject(!1),this._viewRefreshing=new u.BehaviorSubject(!1),this._itemsSubscription=new u.Subscription,this._viewItemsChangedSubscription=new u.Subscription,this._viewItemsEventsUnlistens=[],this._updateItemsDebounce=(0,v.debounce)(e=>this._updateItems(e),0),this._resetFocusStateDebounce=(0,v.debounce)(()=>this._resetFocusState(),this._resetFocusStateDebounceTime),this._processSetFocusOnNewItemByPositionDebounce=(0,v.debounce)((e,s)=>this._processSetFocusOnNewItemByPosition(e,s),this._platform.SAFARI?this._processSetFocusOnNewItemByPositionDebounceTimeForSafari:this._processSetFocusOnNewItemByPositionDebounceTime),this._scrollToViewItemElementByItemKeyDebounce=(0,v.debounce)(e=>this._scrollToViewItemElementByItemKey(e),this._scrollToViewItemElementByItemKeyDebounceTime),this._setFocusItemByDirectionTypeDebounce=(0,v.debounce)((e,s)=>this._setFocusItemByDirectionType(e,s),this._setFocusedItemDebounceTime),this._setFocusedItemKeyDebounce=(0,v.debounce)(e=>this._setFocusedItemKey(e),this._setFocusedItemDebounceTime),this.isVirtualFocusItemInFocus=!1,this._viewItems=new r.QueryList,this.itemKeyPropertyName="Id",this.isLastItemPropertyName="IsLastItem",this.itemHeight=40,this.minVisibleItemsCount=5,this.selectedItemKeyChange=new r.EventEmitter,this.focusedItemKeyChange=new r.EventEmitter,this.paginationChange=new r.EventEmitter,this.setupLastItemFn=e=>{const s=e[e.length-1];s&&(s.isLastItem=!0)}}get _isVirtualScrollInitialized(){return!!this.virtualScroll&&!!this._virtualScrollSubscription$}set viewItems(e){this._viewItems=e,this._subscribeOnViewItemsChanged()}get viewItems(){return this._viewItems}get allItems(){return this._items$}get visibleVirtualItems(){return this._visibleVirtualItems}get visibleItems(){return this._visibleVirtualItems.pipe((0,C.map)(e=>e.map(s=>s.item)))}get viewportMinHeight(){return Math.min(this.minVisibleItemsCount*this.itemHeight,this.visibleVirtualItems.value.length*this.itemHeight)}get maskVisible(){return this._loading$.value||this._viewRefreshing.value}get viewportHidden(){return this.visibleVirtualItems.value.length===0}get virtualFocusItemTabIndex(){return this.viewportHidden||!(0,v.isEmpty)(this._focusedItemKey)?-1:0}set items(e){e instanceof a.A&&(this._itemsSubscription.unsubscribe(),this._itemsSubscription=new u.Subscription,this._itemsSubscription.add(e.changed.subscribe(()=>this._updateItemsDebounce(e)))),this._updateItemsDebounce(e)}set loading(e){this._loading$.next(e)}set selectedItemKey(e){this._isValuesEquals(this._selectedItemKey,e)||(this._selectedItemKey=e,this._updateViewItemsSelectedState())}set focusedItemKey(e){this._isValuesEquals(this._focusedItemKey,e)||(this._focusedItemKey=e,this._updateViewItemsFocusedState())}get focusedItemKey(){return this._focusedItemKey}_updateItems(e){var s=this;Promise.all((e??[]).map(function(){var o=(0,m.A)(function*(c){return{key:c[s.itemKeyPropertyName]instanceof Promise?yield c[s.itemKeyPropertyName]:c[s.itemKeyPropertyName],isLastItem:c[s.isLastItemPropertyName]instanceof Promise?yield c[s.isLastItemPropertyName]:c[s.isLastItemPropertyName],item:c}});return function(c){return o.apply(this,arguments)}}())).then(o=>{this.setupLastItemFn?.(o),this._items$.next(o),this._setRefreshingView(),this._reloadView()})}_setRefreshingView(){setTimeout(()=>{this.detectChanges()},0)}_reloadView(){this._updateData(),this._subscribeOnVirtualScroll()}_updateData(){if((0,v.isEmpty)(this._items$.value)){this._setVirtualData([]);return}this._updateVirtualData(this._lastListRange),this.virtualScroll.checkViewportSize(),this._updateViewItemsState()}_updateVirtualData(e){if(!this._isVirtualScrollInitialized)return;const s=this.virtualScroll.measureScrollOffset();this._updateVirtualDataByVisibleItemsRange(e),this.virtualScroll.scrollToOffset(s)}_updateVirtualDataByVisibleItemsRange(e){this._isInvalidListRange(e)&&(e=this._getDefaultListRange()),this._checkViewportSizeWithDelayIfNeed(),this._setVirtualData(this._items$.value.slice(e.start,e.end))}_setVirtualData(e){this._destroyViewItemsEventsListeners(),this.visibleVirtualItems.next(e);const s=this.visibleVirtualItems.value.filter(o=>o.isLastItem);s.length>0&&(s.forEach(o=>o.isLastItem=!1),this.paginationChange.emit({type:"loadNextPage",lastItemsKeys:s.map(o=>o.key)})),this._setRefreshingView()}_checkViewportSizeWithDelayIfNeed(){this.virtualScroll?.getViewportSize()!==0||this.viewportHidden||setTimeout(()=>{this.virtualScroll.checkViewportSize()},100)}_subscribeOnVirtualScroll(){!this.virtualScroll||this._isVirtualScrollInitialized||(this._virtualScrollSubscription$?.unsubscribe(),this._virtualScrollSubscription$=new u.Subscription,this._virtualScrollSubscription$.add(this.virtualScroll.renderedRangeStream.subscribe(this._processRenderedRangeStream.bind(this))))}_processRenderedRangeStream(e){this._lastListRange=e,this._updateVirtualData(e),this._updateViewItemsState()}_subscribeOnViewItemsChanged(){this._viewItemsChangedSubscription.unsubscribe(),this._viewItemsChangedSubscription=new u.Subscription,this._viewItemsChangedSubscription.add(this.viewItems.changes.pipe((0,C.tap)(e=>this._subscribeOnViewItemsEvents(e)),(0,C.switchMap)(e=>(0,u.from)(this._updateViewItemKey(e)))).subscribe(()=>this._updateViewItemsState()))}_subscribeOnViewItemsEvents(e){this._destroyViewItemsEventsListeners(),e.forEach(s=>{this._viewItemsEventsUnlistens.push(this._renderer.listen(s.nativeElement,"focusin",o=>this._onViewItemElementFocusIn(s,o)),this._renderer.listen(s.nativeElement,"focusout",o=>this._onViewItemElementFocusOut(s,o)),this._renderer.listen(s.nativeElement,"click",o=>this._onViewItemElementClick(s,o)),this._renderer.listen(s.nativeElement,"keydown",o=>this._onViewItemElementKeyDown(s,o)))})}_updateViewItemKey(e){var s=this;return Promise.all(e.map(function(){var o=(0,m.A)(function*(c){return c.itemKey=c.item[s.itemKeyPropertyName]instanceof Promise?yield c.item[s.itemKeyPropertyName]:c.item[s.itemKeyPropertyName]});return function(c){return o.apply(this,arguments)}}()))}_updateViewItemsState(){this._updateViewItemsFocusedState(),this._updateViewItemsSelectedState()}_updateViewItemsFocusedState(){this._resetFocusedItemStateIfNeed(),this._resetFocusStateDebounce()}_resetFocusState(){if(this.processOnViewItemActionFn){this.processOnViewItemActionFn("resetFocusState",this._focusedItemKey,null,this._baseResetFocusState.bind(this));return}this._baseResetFocusState()}_baseResetFocusState(){if((0,v.isEmpty)(this._focusedItemKey)){this._setVirtualFocusItemState(!1);return}this._resetFocusedItemStateIfNeed();const e=this._getFocusElement(this._focusedItemKey),s=this._getFocusAction(this._focusedItemKey);if(this.isVirtualFocusItemInFocus){this._focusOnElement(e,this._isStrictCheckElementInViewport(),s);return}this._focusOnElement(e,this._isStrictCheckElementInViewport(),s)||this._focusOnVirtualFocusItem()}_resetFocusedItemStateIfNeed(){const e=this._findViewItem(this._focusedItemKey);this._resetViewItemState(e,"focused")}_resetViewItemState(e,s){this._setViewItemState(e,s,!0),this._clearViewItemState(s,e?.itemKey)}_focusOnElement(e,s,o){return this._isElementInViewport(e,s)?(this.isVirtualFocusItemInFocus=!1,o(e),!0):!1}_isElementInViewport(e,s){if(!e||!this.virtualScrollViewport)return!1;const o=e.getBoundingClientRect(),c=this.virtualScrollViewport.nativeElement.getBoundingClientRect(),t=c.top,n=this._getVirtualScrollBottom(t)||c.bottom;return s?o.top>=t&&o.bottom<=n:o.top<n&&o.bottom>t}_getVirtualScrollBottom(e){return this.virtualScroll?e+this.virtualScroll.elementRef.nativeElement.clientHeight:null}_focusOnVirtualFocusItem(){this._setVirtualFocusItemState(!0),setTimeout(()=>{this.virtualFocusItem.nativeElement.focus()},10)}_clearViewItemState(e,s){this._getViewItemsWithState(e).filter(o=>!s||o.itemKey!==s).forEach(o=>{this._setViewItemState(o,e,!1)})}_getViewItemsWithState(e){return this.viewItems.filter(s=>!!s[e])}_setViewItemState(e,s,o){e&&(e[s]=o)}_updateViewItemsSelectedState(){const e=this._findViewItem(this._selectedItemKey);this._resetViewItemState(e,"selected")}_onViewItemElementFocusIn(e,s){if(this.processOnViewItemActionFn){this.processOnViewItemActionFn("viewItemElementFocusIn",e.itemKey,s,()=>this._baseViewItemFocusIn(e));return}this._baseViewItemFocusIn(e)}_onViewItemElementFocusOut(e,s){if(!this.isVirtualFocusItemInFocus){if(this.processOnViewItemActionFn){this.processOnViewItemActionFn("viewItemElementFocusOut",e.itemKey,s,this._baseViewItemFocusOut.bind(this));return}this._baseViewItemFocusOut()}}_onViewItemElementClick(e,s){if(this.processOnViewItemActionFn){this.processOnViewItemActionFn("viewItemElementClick",e.itemKey,s,()=>this._baseViewItemElementClick(e));return}this._baseViewItemElementClick(e)}_baseViewItemElementClick(e){this._setSelectedItem(e)}_onViewItemElementKeyDown(e,s){if(this.processOnViewItemActionFn){this.processOnViewItemActionFn("viewItemElementKeyDown",e.itemKey,s,()=>this._baseViewItemElementKeyDown(e,s));return}this._baseViewItemElementKeyDown(e,s)}_baseViewItemElementKeyDown(e,s){switch(s.key){case p.Key.ArrowDown:{this._focusOnEventSiblingElement(s,"next");break}case p.Key.ArrowUp:{this._focusOnEventSiblingElement(s,"previous");break}case p.Key.Home:{this._focusOnEdgeElement("first");break}case p.Key.End:{this._focusOnEdgeElement("last");break}case p.Key.Enter:{this._setSelectedItem(e);break}}}_focusOnEdgeElement(e){this._processSetFocusOnNewItemByPositionDebounce(e,!0)}_focusOnEventSiblingElement(e,s){const o=`${s}ElementSibling`;e.preventDefault(),e.stopPropagation(),e.currentTarget[o]instanceof HTMLElement&&e.currentTarget[o].focus()}_setSelectedItem(e){this._resetViewItemState(e,"selected");const s=e?.itemKey||null;this._isValuesEquals(this._selectedItemKey,s)||(this._selectedItemKey=s,this._emitSelectedItemKeyChange(s))}_setFocusedItem(e){this._resetViewItemState(e,"focused");const s=e?.itemKey||null;this._setFocusedItemKeyDebounce(s)}_setFocusedItemKey(e){this._isValuesEquals(this._focusedItemKey,e)||(this._focusedItemKey=e,this.detectChanges(),this._emitFocusedItemKeyChange(e))}_setVirtualFocusItemState(e){this.isVirtualFocusItemInFocus=e,this.virtualFocusItem&&(this.virtualFocusItem.nativeElement.tabIndex=e?0:-1)}_emitSelectedItemKeyChange(e){this.selectedItemKeyChange.emit(e)}_emitFocusedItemKeyChange(e){this.focusedItemKeyChange.emit(e)}_setFocusItemByDirectionType(e,s){switch(e){case"next":{this._processSetFocusOnNewItemByDirection("next",s);break}case"previous":{this._processSetFocusOnNewItemByDirection("previous",s);break}case"first":{this._processSetFocusOnNewItemByPosition("first",s);break}case"last":{this._processSetFocusOnNewItemByPosition("last",s);break}default:{this._processSetFocusOnNewItemByItemKey(e,s);break}}}_processSetFocusOnNewItemByDirection(e,s){if((0,v.isEmpty)(this._focusedItemKey))return;const o=this._items$.value.findIndex(n=>n.key===this._focusedItemKey);if(o===-1)return;const c=Math.min(Math.max(0,this._items$.value.length-1),Math.max(0,o+(e==="next"?1:-1))),t=this._items$.value[c];this._processSetFocusOnNewItem(t,s)}_processSetFocusOnNewItemByPosition(e,s){const o=this._items$.value[e==="first"?0:this._items$.value.length-1];this._processSetFocusOnNewItem(o,s)}_processSetFocusOnNewItemByItemKey(e,s){const o=this._items$.value.find(c=>c.key===e);this._processSetFocusOnNewItem(o,s)}_processSetFocusOnNewItem(e,s){if(!e){this._resetViewItemState(null,"focused");return}const o=this._findViewItem(e.key);this._resetViewItemState(o,"focused"),!(o&&this._focusOnElement(o.nativeElement,this._isStrictCheckElementInViewport(),this._getFocusAction(o.itemKey)))&&(this._setFocusedItemKey(e.key),s&&this._scrollToViewItemElementByItemKeyDebounce(e.key))}_scrollToViewItemElementByItemKey(e){const s=this._findViewItem(e);if(this._isElementInViewport(s?.nativeElement,!1))return;if(this._resetFocusStateDebounce(),s?.nativeElement){s.nativeElement.scrollIntoView({block:"center",behavior:"auto"});return}const o=this._items$.value.findIndex(c=>c.key===e);o!==-1&&this.virtualScroll.scrollToIndex(o)}_processOnVirtualFocusItemFocusOut(e){if(this.processOnViewItemActionFn){this.processOnViewItemActionFn("viewItemElementFocusOut",this._focusedItemKey,e,this._baseViewItemFocusOut.bind(this));return}this._baseViewItemFocusOut()}_baseViewItemFocusIn(e){this._setVirtualFocusItemState(!1),this._setFocusedItem(e)}_baseViewItemFocusOut(){this._setFocusedItem(null)}_baseVirtualFocusItemKeyDown(e){this._handleNavigationKeys(e)}_handleNavigationKeys(e){switch(e.key){case p.Key.ArrowUp:case p.Key.ArrowDown:this._processArrowKeyVirtualFocusItemKeyDown(e);break;case p.Key.Home:case p.Key.End:this._processEdgeKeyVirtualFocusItemKeyDown(e);break;case p.Key.Enter:this._processEnterVirtualFocusItemKeyDown();break;case p.Key.Tab:this._processTabVirtualFocusItemKeyDown(e);break}}_processEdgeKeyVirtualFocusItemKeyDown(e){this._processSetFocusOnNewItemByPositionDebounce(e.key===p.Key.Home?"first":"last",!0)}_processArrowKeyVirtualFocusItemKeyDown(e){this._processSetFocusOnNewItemByDirection(e.key===p.Key.ArrowUp?"previous":"next",!0)}_processEnterVirtualFocusItemKeyDown(){this._setSelectedItemByItemKey(this._focusedItemKey),this._scrollToViewItemElementByItemKeyDebounce(this._focusedItemKey)}_setSelectedItemByItemKey(e){const s=this.viewItems.find(c=>c.itemKey===e);if(s){this._setSelectedItem(s);return}let o=e;this._isValuesEquals(this._selectedItemKey,e)&&(o=null),this._selectedItemKey=o,this._emitSelectedItemKeyChange(o)}_processTabVirtualFocusItemKeyDown(e){e.preventDefault(),e.stopPropagation(),this._scrollToViewItemElementByItemKeyDebounce(this._focusedItemKey)}_isStrictCheckElementInViewport(){return this.isStrictCheckElementInViewportFn?this.isStrictCheckElementInViewportFn(()=>!0):!0}_getFocusElement(e){return this.getFocusElementFn?this.getFocusElementFn(e,this.viewItems,()=>this._baseGetFocusElement(e)):this._baseGetFocusElement(e)}_baseGetFocusElement(e){return this._findViewItem(e)?.nativeElement}_getFocusAction(e){return this.getFocusActionFn?this.getFocusActionFn(e,this.viewItems,this._baseGetFocusAction.bind(this)):this._baseGetFocusAction.bind(this)}_baseGetFocusAction(e){return e.focus()}_findViewItem(e){return this.viewItems.find(s=>s.itemKey===e)}_isValuesEquals(e,s){return e===s||(0,v.isEmpty)(e)&&(0,v.isEmpty)(s)}_isInvalidListRange(e){return!e?.start&&!e?.end}_getDefaultListRange(){return{start:0,end:Math.floor(this.virtualScroll.getViewportSize()/this.itemHeight)+Math.min(this._items$.value.length,this._virtualScrollItemsBufferSize)}}_destroyViewItemsEventsListeners(){this._viewItemsEventsUnlistens.forEach(e=>e()),this._viewItemsEventsUnlistens=[]}detectChanges(){this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._subscribeOnViewItemsChanged()}ngOnDestroy(){this._itemsSubscription.unsubscribe(),this._viewItemsChangedSubscription.unsubscribe(),this._virtualScrollSubscription$?.unsubscribe(),this._destroyViewItemsEventsListeners()}setFocusItem(e,s,o=!0){e?.preventDefault(),e?.stopPropagation(),this._setFocusItemByDirectionTypeDebounce(s,o)}scrollToItem(e){this._scrollToViewItemElementByItemKeyDebounce(e)}onVirtualFocusItemFocusOut(e){this.virtualFocusItem.nativeElement.tabIndex=-1,this.isVirtualFocusItemInFocus&&(this.isVirtualFocusItemInFocus=!1,this._processOnVirtualFocusItemFocusOut(e))}onVirtualFocusItemKeyDown(e){if(this._scrollToViewItemElementByItemKeyDebounce(this._focusedItemKey),this.processOnViewItemActionFn){this.processOnViewItemActionFn("viewItemElementKeyDown",this._focusedItemKey,e,()=>this._baseVirtualFocusItemKeyDown(e));return}this._baseVirtualFocusItemKeyDown(e)}onViewportResized(e){this.virtualScroll.checkViewportSize()}onWheelTree(){this._resetFocusStateDebounce()}onFirstVirtualFocusItemFocusIn(e){this.setFocusItem(e,"first",!0)}onLastVirtualFocusItemFocusIn(e){this.setFocusItem(e,"last",!0)}static{this.\u0275fac=function(s){return new(s||x)}}static{this.\u0275cmp=r.\u0275\u0275defineComponent({type:x,selectors:[["crt-virtual-scroll-viewport"]],contentQueries:function(s,o,c){if(s&1&&(r.\u0275\u0275contentQuery(c,N.p,5,r.TemplateRef),r.\u0275\u0275contentQuery(c,D.r,4,D.r)),s&2){let t;r.\u0275\u0275queryRefresh(t=r.\u0275\u0275loadQuery())&&(o.viewOutlet=t.first),r.\u0275\u0275queryRefresh(t=r.\u0275\u0275loadQuery())&&(o._viewItems=t)}},viewQuery:function(s,o){if(s&1&&(r.\u0275\u0275viewQuery(S,5,r.ElementRef),r.\u0275\u0275viewQuery(E.CdkVirtualScrollViewport,5),r.\u0275\u0275viewQuery(W,5,r.ElementRef)),s&2){let c;r.\u0275\u0275queryRefresh(c=r.\u0275\u0275loadQuery())&&(o.virtualScrollViewport=c.first),r.\u0275\u0275queryRefresh(c=r.\u0275\u0275loadQuery())&&(o.virtualScroll=c.first),r.\u0275\u0275queryRefresh(c=r.\u0275\u0275loadQuery())&&(o.virtualFocusItem=c.first)}},inputs:{itemKeyPropertyName:"itemKeyPropertyName",isLastItemPropertyName:"isLastItemPropertyName",itemHeight:"itemHeight",minVisibleItemsCount:"minVisibleItemsCount",processOnViewItemActionFn:"processOnViewItemActionFn",isStrictCheckElementInViewportFn:"isStrictCheckElementInViewportFn",getFocusElementFn:"getFocusElementFn",getFocusActionFn:"getFocusActionFn",viewItems:"viewItems",items:"items",loading:"loading",selectedItemKey:"selectedItemKey",focusedItemKey:"focusedItemKey",setupLastItemFn:"setupLastItemFn"},outputs:{selectedItemKeyChange:"selectedItemKeyChange",focusedItemKeyChange:"focusedItemKeyChange",paginationChange:"paginationChange"},decls:12,vars:16,consts:[["virtualScrollViewport",""],["virtualFocusItem",""],[3,"ngClass"],["class","component-mask",4,"ngIf"],["crtResizable","",1,"crt-virtual-scroll-viewport-wrap",3,"resized","wheel"],[1,"crt-virtual-scroll-virtual-focus-item",3,"focusin","tabIndex"],[1,"crt-virtual-scroll-virtual-focus-item",3,"keydown","focusout"],["tabIndex","-1",1,"crt-virtual-scroll-viewport-container",3,"itemSize"],[4,"cdkVirtualFor","cdkVirtualForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"component-mask"]],template:function(s,o){if(s&1){const c=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",2,0),r.\u0275\u0275template(2,L,1,0,"ts-mask",3),r.\u0275\u0275elementStart(3,"div",4),r.\u0275\u0275listener("resized",function(n){return r.\u0275\u0275restoreView(c),r.\u0275\u0275resetView(o.onViewportResized(n))})("wheel",function(){return r.\u0275\u0275restoreView(c),r.\u0275\u0275resetView(o.onWheelTree())}),r.\u0275\u0275elementStart(4,"div",5),r.\u0275\u0275listener("focusin",function(n){return r.\u0275\u0275restoreView(c),r.\u0275\u0275resetView(o.onFirstVirtualFocusItemFocusIn(n))}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div",6,1),r.\u0275\u0275listener("keydown",function(n){return r.\u0275\u0275restoreView(c),r.\u0275\u0275resetView(o.onVirtualFocusItemKeyDown(n))})("focusout",function(n){return r.\u0275\u0275restoreView(c),r.\u0275\u0275resetView(o.onVirtualFocusItemFocusOut(n))}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"cdk-virtual-scroll-viewport",7),r.\u0275\u0275template(8,k,1,0,"ng-container",8),r.\u0275\u0275pipe(9,"async"),r.\u0275\u0275elementContainer(10,9),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(11,"div",5),r.\u0275\u0275listener("focusin",function(n){return r.\u0275\u0275restoreView(c),r.\u0275\u0275resetView(o.onLastVirtualFocusItemFocusIn(n))}),r.\u0275\u0275elementEnd()()()}s&2&&(r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(12,P,o.viewportHidden)),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",o.maskVisible),r.\u0275\u0275advance(),r.\u0275\u0275styleProp("min-height",o.viewportMinHeight,"px"),r.\u0275\u0275advance(),r.\u0275\u0275property("tabIndex",o.virtualFocusItemTabIndex),r.\u0275\u0275advance(3),r.\u0275\u0275property("itemSize",o.itemHeight),r.\u0275\u0275advance(),r.\u0275\u0275property("cdkVirtualForOf",r.\u0275\u0275pipeBind1(9,10,o.allItems)),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngTemplateOutlet",o.viewOutlet)("ngTemplateOutletContext",r.\u0275\u0275pureFunction1(14,M,o.visibleItems)),r.\u0275\u0275advance(),r.\u0275\u0275property("tabIndex",o.virtualFocusItemTabIndex))},dependencies:[F.NgClass,F.NgIf,F.NgTemplateOutlet,E.CdkVirtualScrollViewport,E.CdkFixedSizeVirtualScroll,K.C,B.I,E.CdkVirtualForOf,F.AsyncPipe],styles:[".crt-virtual-scroll-viewport[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.crt-virtual-scroll-viewport.crt-virtual-scroll-viewport-hidden[_ngcontent-%COMP%]{height:unset}.crt-virtual-scroll-viewport.crt-virtual-scroll-viewport-hidden[_ngcontent-%COMP%]   .crt-virtual-scroll-viewport-wrap[_ngcontent-%COMP%]{display:none}.crt-virtual-scroll-viewport[_ngcontent-%COMP%]   .crt-virtual-scroll-viewport-wrap[_ngcontent-%COMP%]{width:100%;height:100%}.crt-virtual-scroll-viewport[_ngcontent-%COMP%]   .crt-virtual-scroll-viewport-wrap[_ngcontent-%COMP%]   .crt-virtual-scroll-virtual-focus-item[_ngcontent-%COMP%]:focus-visible{outline:none}.crt-virtual-scroll-viewport[_ngcontent-%COMP%]   .crt-virtual-scroll-viewport-wrap[_ngcontent-%COMP%]   .crt-virtual-scroll-viewport-container[_ngcontent-%COMP%]{height:100%}"],changeDetection:0})}}},58917:(w,g,i)=>{i.d(g,{r:()=>I});var m=i(59131),y=i.n(m);class I{get nativeElement(){return this.elementRef.nativeElement}set selected(d){this._processElementClass(d,this._selectedClassName)}get selected(){return this._hasClass(this._selectedClassName)}set focused(d){this._processElementClass(d,this._focusedClassName)}get focused(){return this._hasClass(this._focusedClassName)}constructor(d){this.elementRef=d,this._selectedClassName="crt-virtual-scroll-view-item-selected",this._focusedClassName="crt-virtual-scroll-view-item-focused"}_processElementClass(d,r){if(d){if(this._hasClass(r))return;this.nativeElement.classList.add(r)}else{if(!this._hasClass(r))return;this.nativeElement.classList.remove(r)}}_hasClass(d){return this.nativeElement.classList.contains(d)}static{this.\u0275fac=function(r){return new(r||I)(m.\u0275\u0275directiveInject(m.ElementRef))}}static{this.\u0275dir=m.\u0275\u0275defineDirective({type:I,selectors:[["","crtVirtualScrollViewItem",""]],hostAttrs:[1,"crt-virtual-scroll-view-item"],inputs:{item:"item"}})}}},59922:(w,g,i)=>{i.d(g,{p:()=>d});var m=i(62278),y=i.n(m),I=i(59131),E=i.n(I);class d{static{this.\u0275fac=function(a){return new(a||d)}}static{this.\u0275dir=I.\u0275\u0275defineDirective({type:d,selectors:[["","crtVirtualScrollViewOutlet",""]],inputs:{visibleItems:"visibleItems"}})}}},16227:w=>{w.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M3.27572 5.27844C3.64335 4.90719 4.2394 4.90719 4.60703 5.27844L8 8.70489L11.393 5.27844C11.7606 4.90719 12.3566 4.90719 12.7243 5.27844C13.0919 5.6497 13.0919 6.25163 12.7243 6.62289L8.66565 10.7216C8.29802 11.0928 7.70198 11.0928 7.33435 10.7216L3.27572 6.62289C2.90809 6.25163 2.90809 5.6497 3.27572 5.27844Z" fill="currentColor"/>
</svg>
`},75035:w=>{w.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><g xmlns="http://www.w3.org/2000/svg" transform="matrix(0 -1 1 0 -0 16)"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.27572 5.27844C3.64335 4.90719 4.2394 4.90719 4.60703 5.27844L8 8.70489L11.393 5.27844C11.7606 4.90719 12.3566 4.90719 12.7243 5.27844C13.0919 5.6497 13.0919 6.25163 12.7243 6.62289L8.66565 10.7216C8.29802 11.0928 7.70198 11.0928 7.33435 10.7216L3.27572 6.62289C2.90809 6.25163 2.90809 5.6497 3.27572 5.27844Z" fill="currentColor" /></g></svg>'}}]);
