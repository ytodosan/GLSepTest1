(self.webpackChunkapp_studio_enterprise_schema_view=self.webpackChunkapp_studio_enterprise_schema_view||[]).push([[489],{10489:(J,d,e)=>{e.r(d),e.d(d,{ABSTRACT_DIALOG_PROVIDER_ACTIONS:()=>$.C,Attachment:()=>o.o3,Channel:()=>Q.c,ChannelEntityConverter:()=>V.p,ChannelService:()=>T.l,ChannelType:()=>W.C,ChatEntityConverter:()=>U.K,ChatMessage:()=>o.cM,ChatOperator:()=>c.BP,ChatOperatorStatus:()=>c.f7,ChatQueueOperator:()=>E,ChatQueueOperatorEntityConverter:()=>G.Z,ChatQueueOperatorService:()=>I.J,ChatSettingsPageInitHandler:()=>j.F,ChatStatus:()=>c.BA,CreateQueueAgentHandler:()=>u.D,CreateQueueAgentRequest:()=>u.A,CrtChatHistoryComponent:()=>C.D,CrtChatMessagesComponent:()=>S.z,CrtOmnichatModule:()=>m.B,FacebookApiProvider:()=>R.I,FacebookChannelCreateRecordHandler:()=>L.x,FacebookChannelErrorDialogComponent:()=>b.p,FacebookProvider:()=>i,FacebookRegistrationService:()=>y.T,FacebookSettingsService:()=>v.d,LookupDataTokenType:()=>o.WS,MessageDirection:()=>o.Tt,MessageLocalizableData:()=>o.eo,MessageLocalizableDataToken:()=>o.Rk,MessageType:()=>o.Go,OmnichannelChat:()=>c.Hh,OmnichannelChatService:()=>f.I,OpenFacebookIntegrationPageRequestHandler:()=>h,RegisterTelegramResponse:()=>M,RegisterWhatsAppResponse:()=>z,TelegramChannelAttributeChangedHandler:()=>D.z,TelegramChannelSaveHandler:()=>x.c,TelegramRegistrationService:()=>F.A,WhatsAppChannelSaveHandler:()=>B.X,WhatsAppRegistrationService:()=>A.J});var m=e(44459),C=e(45328),S=e(97696),b=e(91308),f=e(56704),O=e(28399),r=e(62278),l=e(59131),v=e(91820);class i{constructor(t,a){this._settingsService=t,this._window=a,this._permissions="pages_show_list,pages_messaging,pages_manage_metadata,business_management,pages_read_engagement",this._toSubscribeFields="messages,messaging_postbacks,message_echoes,standby,messaging_handovers",this._sdkUrl="https://connect.facebook.net/en_US/sdk.js"}_loadScript(t,a,n=null){const s=document.createElement("script");s.async=!0,s.src=t,s.onload=a,n||(n=document.head),n.appendChild(s)}_innerLogin(t=!1){const a={scope:this._permissions,return_scopes:!0};return t&&(a.auth_type="rerequest"),new r.Observable(n=>{FB.login(s=>{s.authResponse?n.next(!0):n.next(!1)},a)})}_getSubscribed(t,a){FB.api(`/me/subscribed_apps?access_token=${t}`,"GET",{},n=>{a(n?.data?.[0]?.subscribed_fields||[])})}isLoggedIn(){return new r.Observable(t=>{FB.getLoginStatus(a=>{a.status==="connected"?t.next(!0):t.next(!1)})})}login(){return this._innerLogin()}reLogin(){return this._innerLogin(!0)}getPages(){return new r.Observable(t=>{FB.api("me/accounts",a=>{t.next(a)})})}initialize(){return new r.Observable(t=>{this._loadScript(this._sdkUrl,()=>{this._settingsService.getApplicationId().subscribe(a=>{const n=a.replace(/\D+/g,"").trim();FB.init({appId:n,autoLogAppEvents:!0,cookie:!0,xfbml:!0,version:this._settingsService.getApiVersion()}),this.isInitialized=!0,t.next(!0)})})})}attachPage(t){return new r.Observable(a=>{this._getSubscribed(t,n=>{const s=(0,O.union)(n,this._toSubscribeFields.split(",")).join(",");FB.api(`/me/subscribed_apps?subscribed_fields=${s}&access_token=${t}`,"POST",{},k=>{a.next(k)})})})}isFacebookSettingValid(){return this._settingsService.getIdentityServerUrl()&&this._window.location.protocol==="https:"}static{this.\u0275fac=function(a){return new(a||i)(l.\u0275\u0275inject(v.d),l.\u0275\u0275inject("Window"))}}static{this.\u0275prov=l.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}}var R=e(75169),F=e(44488),y=e(21896),A=e(24788),I=e(53136),T=e(33856),p=e(5960),P=e(41287),H=e(844);let h=class extends P.l{constructor(t){super(),this._facebookProvider=t}handle(t){return this._facebookProvider.initialize().pipe((0,r.take)(1)).subscribe(),this.next?.handle(t)}};h=(0,p.__decorate)([(0,H.l)({requestType:"crt.OpenFacebookIntegrationPageRequest",type:"crt.OpenFacebookIntegrationPageHandler"}),(0,p.__metadata)("design:paramtypes",[i])],h);var x=e(42498),L=e(90150),B=e(90090),u=e(10414),D=e(69906),j=e(91438),c=e(32072),o=e(48594);class M{}class z{}class E{}var Q=e(71640),W=e(98647),U=e(14876),G=e(30700),V=e(82134),$=e(31576)}}]);
