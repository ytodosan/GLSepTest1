(self.webpackChunkapp_studio_enterprise_omnichannel_messaging=self.webpackChunkapp_studio_enterprise_omnichannel_messaging||[]).push([[9632],{29632:(q,P,O)=>{O.r(P),O.d(P,{ClassTransformer:()=>C,Exclude:()=>k,Expose:()=>j,Transform:()=>K,TransformInstanceToInstance:()=>D,TransformInstanceToPlain:()=>z,TransformPlainToInstance:()=>B,TransformationType:()=>c,Type:()=>R,classToClassFromExist:()=>X,classToPlain:()=>V,classToPlainFromExist:()=>J,deserialize:()=>Z,deserializeArray:()=>$,instanceToInstance:()=>W,instanceToPlain:()=>G,plainToClass:()=>U,plainToClassFromExist:()=>Q,plainToInstance:()=>H,serialize:()=>Y});var c;(function(i){i[i.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",i[i.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",i[i.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"})(c||(c={}));class E{constructor(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}addTypeMetadata(t){this._typeMetadatas.has(t.target)||this._typeMetadatas.set(t.target,new Map),this._typeMetadatas.get(t.target).set(t.propertyName,t)}addTransformMetadata(t){this._transformMetadatas.has(t.target)||this._transformMetadatas.set(t.target,new Map),this._transformMetadatas.get(t.target).has(t.propertyName)||this._transformMetadatas.get(t.target).set(t.propertyName,[]),this._transformMetadatas.get(t.target).get(t.propertyName).push(t)}addExposeMetadata(t){this._exposeMetadatas.has(t.target)||this._exposeMetadatas.set(t.target,new Map),this._exposeMetadatas.get(t.target).set(t.propertyName,t)}addExcludeMetadata(t){this._excludeMetadatas.has(t.target)||this._excludeMetadatas.set(t.target,new Map),this._excludeMetadatas.get(t.target).set(t.propertyName,t)}findTransformMetadatas(t,e,n){return this.findMetadatas(this._transformMetadatas,t,e).filter(a=>!a.options||a.options.toClassOnly===!0&&a.options.toPlainOnly===!0?!0:a.options.toClassOnly===!0?n===c.CLASS_TO_CLASS||n===c.PLAIN_TO_CLASS:a.options.toPlainOnly===!0?n===c.CLASS_TO_PLAIN:!0)}findExcludeMetadata(t,e){return this.findMetadata(this._excludeMetadatas,t,e)}findExposeMetadata(t,e){return this.findMetadata(this._exposeMetadatas,t,e)}findExposeMetadataByCustomName(t,e){return this.getExposedMetadatas(t).find(n=>n.options&&n.options.name===e)}findTypeMetadata(t,e){return this.findMetadata(this._typeMetadatas,t,e)}getStrategy(t){const e=this._excludeMetadatas.get(t),n=e&&e.get(void 0),a=this._exposeMetadatas.get(t),r=a&&a.get(void 0);return n&&r||!n&&!r?"none":n?"excludeAll":"exposeAll"}getExposedMetadatas(t){return this.getMetadata(this._exposeMetadatas,t)}getExcludedMetadatas(t){return this.getMetadata(this._excludeMetadatas,t)}getExposedProperties(t,e){return this.getExposedMetadatas(t).filter(n=>!n.options||n.options.toClassOnly===!0&&n.options.toPlainOnly===!0?!0:n.options.toClassOnly===!0?e===c.CLASS_TO_CLASS||e===c.PLAIN_TO_CLASS:n.options.toPlainOnly===!0?e===c.CLASS_TO_PLAIN:!0).map(n=>n.propertyName)}getExcludedProperties(t,e){return this.getExcludedMetadatas(t).filter(n=>!n.options||n.options.toClassOnly===!0&&n.options.toPlainOnly===!0?!0:n.options.toClassOnly===!0?e===c.CLASS_TO_CLASS||e===c.PLAIN_TO_CLASS:n.options.toPlainOnly===!0?e===c.CLASS_TO_PLAIN:!0).map(n=>n.propertyName)}clear(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()}getMetadata(t,e){const n=t.get(e);let a;n&&(a=Array.from(n.values()).filter(p=>p.propertyName!==void 0));const r=[];for(const p of this.getAncestors(e)){const s=t.get(p);if(s){const o=Array.from(s.values()).filter(u=>u.propertyName!==void 0);r.push(...o)}}return r.concat(a||[])}findMetadata(t,e,n){const a=t.get(e);if(a){const r=a.get(n);if(r)return r}for(const r of this.getAncestors(e)){const p=t.get(r);if(p){const s=p.get(n);if(s)return s}}}findMetadatas(t,e,n){const a=t.get(e);let r;a&&(r=a.get(n));const p=[];for(const s of this.getAncestors(e)){const o=t.get(s);o&&o.has(n)&&p.push(...o.get(n))}return p.slice().reverse().concat((r||[]).slice().reverse())}getAncestors(t){if(!t)return[];if(!this._ancestorsMap.has(t)){const e=[];for(let n=Object.getPrototypeOf(t.prototype.constructor);typeof n.prototype<"u";n=Object.getPrototypeOf(n.prototype.constructor))e.push(n);this._ancestorsMap.set(t,e)}return this._ancestorsMap.get(t)}}const y=new E;function w(){if(typeof globalThis<"u")return globalThis;if(typeof global<"u")return global;if(typeof window<"u")return window;if(typeof self<"u")return self}function F(i){return i!==null&&typeof i=="object"&&typeof i.then=="function"}function b(i){const t=new i;return!(t instanceof Set)&&!("push"in t)?[]:t}class A{constructor(t,e){this.transformationType=t,this.options=e,this.recursionStack=new Set}transform(t,e,n,a,r,p=0){if(Array.isArray(e)||e instanceof Set){const s=a&&this.transformationType===c.PLAIN_TO_CLASS?b(a):[];return e.forEach((o,u)=>{const m=t?t[u]:void 0;if(!this.options.enableCircularCheck||!this.isCircular(o)){let h;if(typeof n!="function"&&n&&n.options&&n.options.discriminator&&n.options.discriminator.property&&n.options.discriminator.subTypes){if(this.transformationType===c.PLAIN_TO_CLASS){h=n.options.discriminator.subTypes.find(M=>M.name===o[n.options.discriminator.property]);const d={newObject:s,object:o,property:void 0},S=n.typeFunction(d);h===void 0?h=S:h=h.value,n.options.keepDiscriminatorProperty||delete o[n.options.discriminator.property]}this.transformationType===c.CLASS_TO_CLASS&&(h=o.constructor),this.transformationType===c.CLASS_TO_PLAIN&&(o[n.options.discriminator.property]=n.options.discriminator.subTypes.find(d=>d.value===o.constructor).name)}else h=n;const T=this.transform(m,o,h,void 0,o instanceof Map,p+1);s instanceof Set?s.add(T):s.push(T)}else this.transformationType===c.CLASS_TO_CLASS&&(s instanceof Set?s.add(o):s.push(o))}),s}else{if(n===String&&!r)return e==null?e:String(e);if(n===Number&&!r)return e==null?e:Number(e);if(n===Boolean&&!r)return e==null?e:!!e;if((n===Date||e instanceof Date)&&!r)return e instanceof Date?new Date(e.valueOf()):e==null?e:new Date(e);if(w().Buffer&&(n===Buffer||e instanceof Buffer)&&!r)return e==null?e:Buffer.from(e);if(F(e)&&!r)return new Promise((s,o)=>{e.then(u=>s(this.transform(void 0,u,n,void 0,void 0,p+1)),o)});if(!r&&e!==null&&typeof e=="object"&&typeof e.then=="function")return e;if(typeof e=="object"&&e!==null){!n&&e.constructor!==Object&&(!Array.isArray(e)&&e.constructor===Array||(n=e.constructor)),!n&&t&&(n=t.constructor),this.options.enableCircularCheck&&this.recursionStack.add(e);const s=this.getKeys(n,e,r);let o=t||{};!t&&(this.transformationType===c.PLAIN_TO_CLASS||this.transformationType===c.CLASS_TO_CLASS)&&(r?o=new Map:n?o=new n:o={});for(const u of s){if(u==="__proto__"||u==="constructor")continue;const m=u;let h=u,T=u;if(!this.options.ignoreDecorators&&n){if(this.transformationType===c.PLAIN_TO_CLASS){const f=y.findExposeMetadataByCustomName(n,u);f&&(T=f.propertyName,h=f.propertyName)}else if(this.transformationType===c.CLASS_TO_PLAIN||this.transformationType===c.CLASS_TO_CLASS){const f=y.findExposeMetadata(n,u);f&&f.options&&f.options.name&&(h=f.options.name)}}let d;this.transformationType===c.PLAIN_TO_CLASS?d=e[m]:e instanceof Map?d=e.get(m):e[m]instanceof Function?d=e[m]():d=e[m];let S,M=d instanceof Map;if(n&&r)S=n;else if(n){const f=y.findTypeMetadata(n,T);if(f){const l={newObject:o,object:e,property:T},N=f.typeFunction?f.typeFunction(l):f.reflectedType;f.options&&f.options.discriminator&&f.options.discriminator.property&&f.options.discriminator.subTypes?e[m]instanceof Array?S=f:(this.transformationType===c.PLAIN_TO_CLASS&&(S=f.options.discriminator.subTypes.find(L=>{if(d&&d instanceof Object&&f.options.discriminator.property in d)return L.name===d[f.options.discriminator.property]}),S===void 0?S=N:S=S.value,f.options.keepDiscriminatorProperty||d&&d instanceof Object&&f.options.discriminator.property in d&&delete d[f.options.discriminator.property]),this.transformationType===c.CLASS_TO_CLASS&&(S=d.constructor),this.transformationType===c.CLASS_TO_PLAIN&&d&&(d[f.options.discriminator.property]=f.options.discriminator.subTypes.find(L=>L.value===d.constructor).name)):S=N,M=M||f.reflectedType===Map}else if(this.options.targetMaps)this.options.targetMaps.filter(l=>l.target===n&&!!l.properties[T]).forEach(l=>S=l.properties[T]);else if(this.options.enableImplicitConversion&&this.transformationType===c.PLAIN_TO_CLASS){const l=Reflect.getMetadata("design:type",n.prototype,T);l&&(S=l)}}const g=Array.isArray(e[m])?this.getReflectedType(n,T):void 0,I=t?t[m]:void 0;if(o.constructor.prototype){const f=Object.getOwnPropertyDescriptor(o.constructor.prototype,h);if((this.transformationType===c.PLAIN_TO_CLASS||this.transformationType===c.CLASS_TO_CLASS)&&(f&&!f.set||o[h]instanceof Function))continue}if(!this.options.enableCircularCheck||!this.isCircular(d)){const f=this.transformationType===c.PLAIN_TO_CLASS?h:u;let l;this.transformationType===c.CLASS_TO_PLAIN?(l=e[f],l=this.applyCustomTransformations(l,n,f,e,this.transformationType),l=e[f]===l?d:l,l=this.transform(I,l,S,g,M,p+1)):d===void 0&&this.options.exposeDefaultValues?l=o[h]:(l=this.transform(I,d,S,g,M,p+1),l=this.applyCustomTransformations(l,n,f,e,this.transformationType)),(l!==void 0||this.options.exposeUnsetFields)&&(o instanceof Map?o.set(h,l):o[h]=l)}else if(this.transformationType===c.CLASS_TO_CLASS){let f=d;f=this.applyCustomTransformations(f,n,u,e,this.transformationType),(f!==void 0||this.options.exposeUnsetFields)&&(o instanceof Map?o.set(h,f):o[h]=f)}}return this.options.enableCircularCheck&&this.recursionStack.delete(e),o}else return e}}applyCustomTransformations(t,e,n,a,r){let p=y.findTransformMetadatas(e,n,this.transformationType);return this.options.version!==void 0&&(p=p.filter(s=>s.options?this.checkVersion(s.options.since,s.options.until):!0)),this.options.groups&&this.options.groups.length?p=p.filter(s=>s.options?this.checkGroups(s.options.groups):!0):p=p.filter(s=>!s.options||!s.options.groups||!s.options.groups.length),p.forEach(s=>{t=s.transformFn({value:t,key:n,obj:a,type:r,options:this.options})}),t}isCircular(t){return this.recursionStack.has(t)}getReflectedType(t,e){if(!t)return;const n=y.findTypeMetadata(t,e);return n?n.reflectedType:void 0}getKeys(t,e,n){let a=y.getStrategy(t);a==="none"&&(a=this.options.strategy||"exposeAll");let r=[];if((a==="exposeAll"||n)&&(e instanceof Map?r=Array.from(e.keys()):r=Object.keys(e)),n)return r;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&t){const p=y.getExposedProperties(t,this.transformationType),s=y.getExcludedProperties(t,this.transformationType);r=[...p,...s]}if(!this.options.ignoreDecorators&&t){let p=y.getExposedProperties(t,this.transformationType);this.transformationType===c.PLAIN_TO_CLASS&&(p=p.map(o=>{const u=y.findExposeMetadata(t,o);return u&&u.options&&u.options.name?u.options.name:o})),this.options.excludeExtraneousValues?r=p:r=r.concat(p);const s=y.getExcludedProperties(t,this.transformationType);s.length>0&&(r=r.filter(o=>!s.includes(o))),this.options.version!==void 0&&(r=r.filter(o=>{const u=y.findExposeMetadata(t,o);return!u||!u.options?!0:this.checkVersion(u.options.since,u.options.until)})),this.options.groups&&this.options.groups.length?r=r.filter(o=>{const u=y.findExposeMetadata(t,o);return!u||!u.options?!0:this.checkGroups(u.options.groups)}):r=r.filter(o=>{const u=y.findExposeMetadata(t,o);return!u||!u.options||!u.options.groups||!u.options.groups.length})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(r=r.filter(p=>this.options.excludePrefixes.every(s=>p.substr(0,s.length)!==s))),r=r.filter((p,s,o)=>o.indexOf(p)===s),r}checkVersion(t,e){let n=!0;return n&&t&&(n=this.options.version>=t),n&&e&&(n=this.options.version<e),n}checkGroups(t){return t?this.options.groups.some(e=>t.includes(e)):!0}}const x={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0};class C{instanceToPlain(t,e){return new A(c.CLASS_TO_PLAIN,{...x,...e}).transform(void 0,t,void 0,void 0,void 0,void 0)}classToPlainFromExist(t,e,n){return new A(c.CLASS_TO_PLAIN,{...x,...n}).transform(e,t,void 0,void 0,void 0,void 0)}plainToInstance(t,e,n){return new A(c.PLAIN_TO_CLASS,{...x,...n}).transform(void 0,e,t,void 0,void 0,void 0)}plainToClassFromExist(t,e,n){return new A(c.PLAIN_TO_CLASS,{...x,...n}).transform(t,e,void 0,void 0,void 0,void 0)}instanceToInstance(t,e){return new A(c.CLASS_TO_CLASS,{...x,...e}).transform(void 0,t,void 0,void 0,void 0,void 0)}classToClassFromExist(t,e,n){return new A(c.CLASS_TO_CLASS,{...x,...n}).transform(e,t,void 0,void 0,void 0,void 0)}serialize(t,e){return JSON.stringify(this.instanceToPlain(t,e))}deserialize(t,e,n){const a=JSON.parse(e);return this.plainToInstance(t,a,n)}deserializeArray(t,e,n){const a=JSON.parse(e);return this.plainToInstance(t,a,n)}}function k(i={}){return function(t,e){y.addExcludeMetadata({target:t instanceof Function?t:t.constructor,propertyName:e,options:i})}}function j(i={}){return function(t,e){y.addExposeMetadata({target:t instanceof Function?t:t.constructor,propertyName:e,options:i})}}function D(i){return function(t,e,n){const a=new C,r=n.value;n.value=function(...p){const s=r.apply(this,p);return!!s&&(typeof s=="object"||typeof s=="function")&&typeof s.then=="function"?s.then(u=>a.instanceToInstance(u,i)):a.instanceToInstance(s,i)}}}function z(i){return function(t,e,n){const a=new C,r=n.value;n.value=function(...p){const s=r.apply(this,p);return!!s&&(typeof s=="object"||typeof s=="function")&&typeof s.then=="function"?s.then(u=>a.instanceToPlain(u,i)):a.instanceToPlain(s,i)}}}function B(i,t){return function(e,n,a){const r=new C,p=a.value;a.value=function(...s){const o=p.apply(this,s);return!!o&&(typeof o=="object"||typeof o=="function")&&typeof o.then=="function"?o.then(m=>r.plainToInstance(i,m,t)):r.plainToInstance(i,o,t)}}}function K(i,t={}){return function(e,n){y.addTransformMetadata({target:e.constructor,propertyName:n,transformFn:i,options:t})}}function R(i,t={}){return function(e,n){const a=Reflect.getMetadata("design:type",e,n);y.addTypeMetadata({target:e.constructor,propertyName:n,reflectedType:a,typeFunction:i,options:t})}}const _=new C;function V(i,t){return _.instanceToPlain(i,t)}function G(i,t){return _.instanceToPlain(i,t)}function J(i,t,e){return _.classToPlainFromExist(i,t,e)}function U(i,t,e){return _.plainToInstance(i,t,e)}function H(i,t,e){return _.plainToInstance(i,t,e)}function Q(i,t,e){return _.plainToClassFromExist(i,t,e)}function W(i,t){return _.instanceToInstance(i,t)}function X(i,t,e){return _.classToClassFromExist(i,t,e)}function Y(i,t){return _.serialize(i,t)}function Z(i,t,e){return _.deserialize(i,t,e)}function $(i,t,e){return _.deserializeArray(i,t,e)}}}]);
