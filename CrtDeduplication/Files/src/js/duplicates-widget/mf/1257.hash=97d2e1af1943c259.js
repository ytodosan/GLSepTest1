(self.webpackChunkapp_studio_enterprise_duplicates_widget=self.webpackChunkapp_studio_enterprise_duplicates_widget||[]).push([[1257],{11257:(P,w,E)=>{E.r(w),E.d(w,{ResizableDirective:()=>m,ResizableModule:()=>z,ResizeHandleDirective:()=>g});var s=E(59131),X=E(40297),u=E(62278),c=E(36486);const b=typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;function Y(i){const t=i.cloneNode(!0),r=t.querySelectorAll("[id]"),n=i.nodeName.toLowerCase();return t.removeAttribute("id"),r.forEach(e=>{e.removeAttribute("id")}),n==="canvas"?O(i,t):(n==="input"||n==="select"||n==="textarea")&&T(i,t),M("canvas",i,t,O),M("input, textarea, select",i,t,T),t}function M(i,t,r,n){const e=t.querySelectorAll(i);if(e.length){const d=r.querySelectorAll(i);for(let o=0;o<e.length;o++)n(e[o],d[o])}}let G=0;function T(i,t){t.type!=="file"&&(t.value=i.value),t.type==="radio"&&t.name&&(t.name=`mat-clone-${t.name}-${G++}`)}function O(i,t){const r=t.getContext("2d");if(r)try{r.drawImage(i,0,0)}catch{}}function x(i,t,r,n){const e={top:i.top,bottom:i.bottom,left:i.left,right:i.right};return t.top&&(e.top+=n),t.bottom&&(e.bottom+=n),t.left&&(e.left+=r),t.right&&(e.right+=r),e.height=e.bottom-e.top,e.width=e.right-e.left,e}function $(i,t){let r=0,n=0;const e=i.nativeElement.style,o=["transform","-ms-transform","-moz-transform","-o-transform"].map(a=>e[a]).find(a=>!!a);if(o&&o.includes("translate")&&(r=o.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$1"),n=o.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$2")),t==="absolute")return{height:i.nativeElement.offsetHeight,width:i.nativeElement.offsetWidth,top:i.nativeElement.offsetTop-n,bottom:i.nativeElement.offsetHeight+i.nativeElement.offsetTop-n,left:i.nativeElement.offsetLeft-r,right:i.nativeElement.offsetWidth+i.nativeElement.offsetLeft-r};{const a=i.nativeElement.getBoundingClientRect();return{height:a.height,width:a.width,top:a.top-n,bottom:a.bottom-n,left:a.left-r,right:a.right-r,scrollTop:i.nativeElement.scrollTop,scrollLeft:i.nativeElement.scrollLeft}}}const D=Object.freeze({topLeft:"nw-resize",topRight:"ne-resize",bottomLeft:"sw-resize",bottomRight:"se-resize",leftOrRight:"col-resize",topOrBottom:"row-resize"});function I(i,t){return i.left&&i.top?t.topLeft:i.right&&i.top?t.topRight:i.left&&i.bottom?t.bottomLeft:i.right&&i.bottom?t.bottomRight:i.left||i.right?t.leftOrRight:i.top||i.bottom?t.topOrBottom:""}function R({edges:i,initialRectangle:t,newRectangle:r}){const n={};return Object.keys(i).forEach(e=>{n[e]=(r[e]||0)-(t[e]||0)}),n}const C="resize-active",j="resize-ghost-element",A=50;class m{constructor(t,r,n,e){this.platformId=t,this.renderer=r,this.elm=n,this.zone=e,this.enableGhostResize=!1,this.resizeSnapGrid={},this.resizeCursors=D,this.ghostElementPositioning="fixed",this.allowNegativeResizes=!1,this.mouseMoveThrottleMS=A,this.resizeStart=new s.EventEmitter,this.resizing=new s.EventEmitter,this.resizeEnd=new s.EventEmitter,this.mouseup=new u.Subject,this.mousedown=new u.Subject,this.mousemove=new u.Subject,this.destroy$=new u.Subject,this.pointerEventListeners=v.getInstance(r,e)}ngOnInit(){const t=(0,u.merge)(this.pointerEventListeners.pointerDown,this.mousedown),r=(0,u.merge)(this.pointerEventListeners.pointerMove,this.mousemove).pipe((0,c.tap)(({event:l})=>{e&&l.cancelable&&l.preventDefault()}),(0,c.share)()),n=(0,u.merge)(this.pointerEventListeners.pointerUp,this.mouseup);let e;const d=()=>{e&&e.clonedNode&&(this.elm.nativeElement.parentElement.removeChild(e.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","inherit"))},o=()=>({...D,...this.resizeCursors});t.pipe((0,c.mergeMap)(l=>{function f(h){return{clientX:h.clientX-l.clientX,clientY:h.clientY-l.clientY}}const y=()=>{const h={x:1,y:1};return e&&(this.resizeSnapGrid.left&&e.edges.left?h.x=+this.resizeSnapGrid.left:this.resizeSnapGrid.right&&e.edges.right&&(h.x=+this.resizeSnapGrid.right),this.resizeSnapGrid.top&&e.edges.top?h.y=+this.resizeSnapGrid.top:this.resizeSnapGrid.bottom&&e.edges.bottom&&(h.y=+this.resizeSnapGrid.bottom)),h};function S(h,p){return{x:Math.ceil(h.clientX/p.x),y:Math.ceil(h.clientY/p.y)}}return(0,u.merge)(r.pipe((0,c.take)(1)).pipe((0,c.map)(h=>[,h])),r.pipe((0,c.pairwise)())).pipe((0,c.map)(([h,p])=>[h&&f(h),f(p)])).pipe((0,c.filter)(([h,p])=>{if(!h)return!0;const N=y(),L=S(h,N),_=S(p,N);return L.x!==_.x||L.y!==_.y})).pipe((0,c.map)(([,h])=>{const p=y();return{clientX:Math.round(h.clientX/p.x)*p.x,clientY:Math.round(h.clientY/p.y)*p.y}})).pipe((0,c.takeUntil)((0,u.merge)(n,t)))})).pipe((0,c.filter)(()=>!!e)).pipe((0,c.map)(({clientX:l,clientY:f})=>x(e.startingRect,e.edges,l,f))).pipe((0,c.filter)(l=>this.allowNegativeResizes||!!(l.height&&l.width&&l.height>0&&l.width>0))).pipe((0,c.filter)(l=>this.validateResize?this.validateResize({rectangle:l,edges:R({edges:e.edges,initialRectangle:e.startingRect,newRectangle:l})}):!0),(0,c.takeUntil)(this.destroy$)).subscribe(l=>{e&&e.clonedNode&&(this.renderer.setStyle(e.clonedNode,"height",`${l.height}px`),this.renderer.setStyle(e.clonedNode,"width",`${l.width}px`),this.renderer.setStyle(e.clonedNode,"top",`${l.top}px`),this.renderer.setStyle(e.clonedNode,"left",`${l.left}px`)),this.resizing.observers.length>0&&this.zone.run(()=>{this.resizing.emit({edges:R({edges:e.edges,initialRectangle:e.startingRect,newRectangle:l}),rectangle:l})}),e.currentRect=l}),t.pipe((0,c.map)(({edges:l})=>l||{}),(0,c.filter)(l=>Object.keys(l).length>0),(0,c.takeUntil)(this.destroy$)).subscribe(l=>{e&&d();const f=$(this.elm,this.ghostElementPositioning);e={edges:l,startingRect:f,currentRect:f};const y=o(),S=I(e.edges,y);this.renderer.setStyle(document.body,"cursor",S),this.setElementClass(this.elm,C,!0),this.enableGhostResize&&(e.clonedNode=Y(this.elm.nativeElement),this.elm.nativeElement.parentElement.appendChild(e.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","hidden"),this.renderer.setStyle(e.clonedNode,"position",this.ghostElementPositioning),this.renderer.setStyle(e.clonedNode,"left",`${e.startingRect.left}px`),this.renderer.setStyle(e.clonedNode,"top",`${e.startingRect.top}px`),this.renderer.setStyle(e.clonedNode,"height",`${e.startingRect.height}px`),this.renderer.setStyle(e.clonedNode,"width",`${e.startingRect.width}px`),this.renderer.setStyle(e.clonedNode,"cursor",I(e.edges,y)),this.renderer.addClass(e.clonedNode,j),e.clonedNode.scrollTop=e.startingRect.scrollTop,e.clonedNode.scrollLeft=e.startingRect.scrollLeft),this.resizeStart.observers.length>0&&this.zone.run(()=>{this.resizeStart.emit({edges:R({edges:l,initialRectangle:f,newRectangle:f}),rectangle:x(f,{},0,0)})})}),n.pipe((0,c.takeUntil)(this.destroy$)).subscribe(()=>{e&&(this.renderer.removeClass(this.elm.nativeElement,C),this.renderer.setStyle(document.body,"cursor",""),this.renderer.setStyle(this.elm.nativeElement,"cursor",""),this.resizeEnd.observers.length>0&&this.zone.run(()=>{this.resizeEnd.emit({edges:R({edges:e.edges,initialRectangle:e.startingRect,newRectangle:e.currentRect}),rectangle:e.currentRect})}),d(),e=null)})}ngOnDestroy(){(0,X.isPlatformBrowser)(this.platformId)&&this.renderer.setStyle(document.body,"cursor",""),this.mousedown.complete(),this.mouseup.complete(),this.mousemove.complete(),this.destroy$.next()}setElementClass(t,r,n){n?this.renderer.addClass(t.nativeElement,r):this.renderer.removeClass(t.nativeElement,r)}}m.\u0275fac=function(t){return new(t||m)(s.\u0275\u0275directiveInject(s.PLATFORM_ID),s.\u0275\u0275directiveInject(s.Renderer2),s.\u0275\u0275directiveInject(s.ElementRef),s.\u0275\u0275directiveInject(s.NgZone))},m.\u0275dir=s.\u0275\u0275defineDirective({type:m,selectors:[["","mwlResizable",""]],inputs:{validateResize:"validateResize",enableGhostResize:"enableGhostResize",resizeSnapGrid:"resizeSnapGrid",resizeCursors:"resizeCursors",ghostElementPositioning:"ghostElementPositioning",allowNegativeResizes:"allowNegativeResizes",mouseMoveThrottleMS:"mouseMoveThrottleMS"},outputs:{resizeStart:"resizeStart",resizing:"resizing",resizeEnd:"resizeEnd"},exportAs:["mwlResizable"]}),(typeof ngDevMode>"u"||ngDevMode)&&s.\u0275setClassMetadata(m,[{type:s.Directive,args:[{selector:"[mwlResizable]",exportAs:"mwlResizable"}]}],function(){return[{type:void 0,decorators:[{type:s.Inject,args:[s.PLATFORM_ID]}]},{type:s.Renderer2},{type:s.ElementRef},{type:s.NgZone}]},{validateResize:[{type:s.Input}],enableGhostResize:[{type:s.Input}],resizeSnapGrid:[{type:s.Input}],resizeCursors:[{type:s.Input}],ghostElementPositioning:[{type:s.Input}],allowNegativeResizes:[{type:s.Input}],mouseMoveThrottleMS:[{type:s.Input}],resizeStart:[{type:s.Output}],resizing:[{type:s.Output}],resizeEnd:[{type:s.Output}]});class v{constructor(t,r){this.pointerDown=new u.Observable(n=>{let e,d;return r.runOutsideAngular(()=>{e=t.listen("document","mousedown",o=>{n.next({clientX:o.clientX,clientY:o.clientY,event:o})}),b&&(d=t.listen("document","touchstart",o=>{n.next({clientX:o.touches[0].clientX,clientY:o.touches[0].clientY,event:o})}))}),()=>{e(),b&&d()}}).pipe((0,c.share)()),this.pointerMove=new u.Observable(n=>{let e,d;return r.runOutsideAngular(()=>{e=t.listen("document","mousemove",o=>{n.next({clientX:o.clientX,clientY:o.clientY,event:o})}),b&&(d=t.listen("document","touchmove",o=>{n.next({clientX:o.targetTouches[0].clientX,clientY:o.targetTouches[0].clientY,event:o})}))}),()=>{e(),b&&d()}}).pipe((0,c.share)()),this.pointerUp=new u.Observable(n=>{let e,d,o;return r.runOutsideAngular(()=>{e=t.listen("document","mouseup",a=>{n.next({clientX:a.clientX,clientY:a.clientY,event:a})}),b&&(d=t.listen("document","touchend",a=>{n.next({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,event:a})}),o=t.listen("document","touchcancel",a=>{n.next({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,event:a})}))}),()=>{e(),b&&(d(),o())}}).pipe((0,c.share)())}static getInstance(t,r){return v.instance||(v.instance=new v(t,r)),v.instance}}class g{constructor(t,r,n,e){this.renderer=t,this.element=r,this.zone=n,this.resizableDirective=e,this.resizeEdges={},this.eventListeners={},this.destroy$=new u.Subject}ngOnInit(){this.zone.runOutsideAngular(()=>{this.listenOnTheHost("mousedown").subscribe(t=>{this.onMousedown(t,t.clientX,t.clientY)}),this.listenOnTheHost("mouseup").subscribe(t=>{this.onMouseup(t.clientX,t.clientY)}),b&&(this.listenOnTheHost("touchstart").subscribe(t=>{this.onMousedown(t,t.touches[0].clientX,t.touches[0].clientY)}),(0,u.merge)(this.listenOnTheHost("touchend"),this.listenOnTheHost("touchcancel")).subscribe(t=>{this.onMouseup(t.changedTouches[0].clientX,t.changedTouches[0].clientY)}))})}ngOnDestroy(){this.destroy$.next(),this.unsubscribeEventListeners()}onMousedown(t,r,n){t.cancelable&&t.preventDefault(),this.eventListeners.touchmove||(this.eventListeners.touchmove=this.renderer.listen(this.element.nativeElement,"touchmove",e=>{this.onMousemove(e,e.targetTouches[0].clientX,e.targetTouches[0].clientY)})),this.eventListeners.mousemove||(this.eventListeners.mousemove=this.renderer.listen(this.element.nativeElement,"mousemove",e=>{this.onMousemove(e,e.clientX,e.clientY)})),this.resizable.mousedown.next({clientX:r,clientY:n,edges:this.resizeEdges})}onMouseup(t,r){this.unsubscribeEventListeners(),this.resizable.mouseup.next({clientX:t,clientY:r,edges:this.resizeEdges})}get resizable(){return this.resizableDirective||this.resizableContainer}onMousemove(t,r,n){this.resizable.mousemove.next({clientX:r,clientY:n,edges:this.resizeEdges,event:t})}unsubscribeEventListeners(){Object.keys(this.eventListeners).forEach(t=>{this.eventListeners[t](),delete this.eventListeners[t]})}listenOnTheHost(t){return(0,u.fromEvent)(this.element.nativeElement,t).pipe((0,c.takeUntil)(this.destroy$))}}g.\u0275fac=function(t){return new(t||g)(s.\u0275\u0275directiveInject(s.Renderer2),s.\u0275\u0275directiveInject(s.ElementRef),s.\u0275\u0275directiveInject(s.NgZone),s.\u0275\u0275directiveInject(m,8))},g.\u0275dir=s.\u0275\u0275defineDirective({type:g,selectors:[["","mwlResizeHandle",""]],inputs:{resizeEdges:"resizeEdges",resizableContainer:"resizableContainer"}}),(typeof ngDevMode>"u"||ngDevMode)&&s.\u0275setClassMetadata(g,[{type:s.Directive,args:[{selector:"[mwlResizeHandle]"}]}],function(){return[{type:s.Renderer2},{type:s.ElementRef},{type:s.NgZone},{type:m,decorators:[{type:s.Optional}]}]},{resizeEdges:[{type:s.Input}],resizableContainer:[{type:s.Input}]});class z{}z.\u0275fac=function(t){return new(t||z)},z.\u0275mod=s.\u0275\u0275defineNgModule({type:z}),z.\u0275inj=s.\u0275\u0275defineInjector({}),(typeof ngDevMode>"u"||ngDevMode)&&s.\u0275setClassMetadata(z,[{type:s.NgModule,args:[{declarations:[m,g],exports:[m,g]}]}],null,null)}}]);
